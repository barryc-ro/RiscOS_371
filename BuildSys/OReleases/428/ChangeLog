Change logs since RISC OS 3.60
------------------------------

======================================
NFS::riscos_bl.$.Sources.Apps.ARPlayer
======================================

Version: 1.30 Mon 21-Nov-94        Aideen McConville             

New !ARPlayer from JA (from UniqueWay).

Changed files:
    Makefile  (no longer installs Sprites and Sprites22)
    Resources.!RunImage

***************************************************************************
                      Black - RISC OS 3.60 (4.28) build
***************************************************************************


===============================================================================

===================================
NFS::riscos_bl.$.Sources.Apps.Alarm
===================================

Version: 2.64 Mon 07-Nov-94        Alan Glover                   

Change to save by default to Choices:Alarm.Alarms. bas.!Runimage changed.

---------------------------------------------------------------------------

Version: 2.65 Thu 01-Dec-94        Steve Cormie                  

* Fixed MED-03935, MED-04003, MED-04009, MED-04051: Wimpslot in ROM !Run
  file was left as at 3.10 (32K). Things have moved on and the slot now
  needs to be 44K.
* Fixed MED-04004: Adjust clicking on save as alarms dialogue now works.

---------------------------------------------------------------------------

Version: 2.66 Mon 05-Dec-94        Steve Cormie                  

* Fixed MED-04006/04012: ROM version of !Alarm now uses Choices: as default
  location for saving alarms.

---------------------------------------------------------------------------

Version: 2.67 Wed 07-Dec-94        Steve Cormie                  

* Fixed MED-04001: Deferring alarms cleared the repeat flags but not the
  repeat day/offset.

---------------------------------------------------------------------------

Version: 2.68 Wed 18-Jan-95        Aideen McConville             

Build and Version change only - No functional change

* Fix MED-03784: Module version and date derived from Messages file during build

Changed files: Makefile
               awk.Version (new file)
               s.Main
               Version     (deleted - now a derived file - s.Version)
               UK.Messages

---------------------------------------------------------------------------

Version: 2.69 Wed 01-Feb-95        Steve Cormie                  

* Fixed MED-04493: Error return not considered when calling SYS "XOS_Find",17.

---------------------------------------------------------------------------

Version: 2.70 Mon 13-Feb-95        Aideen McConville             

Small correction to fix in 2.68 - Alarm was ending up with two sets of
brackets around the date in its help string.

Changed file: s.main

***************************************************************************
                      Black - RISC OS 3.60 (4.28) build
***************************************************************************


===============================================================================

======================================
NFS::riscos_bl.$.Sources.Apps.CDPlayer
======================================

Version: 1.14 Thu 09-Feb-95        Aideen McConville             

!CDPlayer from CDNet::DO_1.$.SCSI_CDFS.DISCSOURCE.CDPlayer

          Should correspond to Released DO disc 0284,602

Checked in as a fully built component (as released).
Was built with DDE R4.

Note: If built with an internal RISC_OSLib (3.10 or later) the !Run
****  file needs to an extra line:
      Set AudioPanel$Path <Obey$Dir>.

                      --------------------

SCormie (13/02/95):

Changed error message in !Run file (fixes MED-04391). No new version.

                      --------------------

AMcConville (Mon 06-Mar-95):

Fixed MED-04812 and MED-04819. Standard configuration: 0,0,0
Installed config file now writable.

Changed files: Makefile
               Resources.config

No new version.
                      --------------------

AMcConville (Mon 06-Mar-95):

Added !Help file. No new version.

***************************************************************************
                      Black - RISC OS 3.60 (4.28) build
***************************************************************************


===============================================================================

=======================================
NFS::riscos_bl.$.Sources.Apps.ChangeFSI
=======================================

Version: 1.03 Thu 24-Nov-94        Aideen McConville             

New version from Sophie (has JPEG output facility).

Requires JPEGCompress module (jcompmod) - installed in !System.Modules
from Video.Render.jcompmod.

Changed files:
    Makefile
    crunch.ChangeFSI (use same crunch flags as Sophie)
    DataFiles.FSIinfo
    DataFiles.FSIuse
    source.ChangeFSI
    UK.!Help
    UK.3dTemplate
    UK.Messages
    UK.Templates

---------------------------------------------------------------------------

Version: 1.04 Fri 09-Dec-94        Graham Simms                  

* Changed the Output dialogue box to be more user friendly.

* Added some checks to make sure values were valid before
  starting conversion.
  
Changed files:

    source.ChangeFSI
    UK.3dTemplate
    UK.Messages

Note: UK.Templates not yet updated.

---------------------------------------------------------------------------

Version: 1.05 Fri 09-Dec-94        Graham Simms                  

Updated both template files.

Changed files:

    UK.3dTemplate
    UK.Templates

---------------------------------------------------------------------------
** Not sure how 1.06 managed to avoid the source filer! GS
---------------------------------------------------------------------------

Version: 1.07 Wed 04-Jan-95        Graham Simms                  

Fixed several bugs and improved user interface slightly.

Changed files:

    source.ChangeFSI
    UK.3dTemplate
    UK.Messages

---------------------------------------------------------------------------

Version: 1.08 Wed 18-Jan-95        Graham Simms                  

Fixed the following bugs:
  MED-03469 - Poor error returned when not enough memory to convert image
              when running from the command line.
  MED-03769 - Failed to convert JFIF 1.02 images. Fixed by changing djpeg to
              release 5
  MED-03976 - Failed to convert very wide images. Fixe my making wimpslot
              variable size to allow the extra space needed to be 'DIM'ed.
  MED-04268 - Added 'x' and 'y' to Scaling dialogue box for clarification.
  MED-04300 - Added validation string to Special field of Output dialogue box
              so that only valid letters are accepted.
  MED-04302 - altered output dialogue box to align icons correctly.
  
Changed files:

    source.ChangeFSI
    UK.3dTemplate
    UK.Templates
    UK.Messages
    JPEG.*
    UK.!Run
    
---------------------------------------------------------------------------

Version: 1.09 Tue 31-Jan-95        Aideen McConville             

* Fix MED-04386: Makefile - !Sprites23 no longer installed
                 !Run - Bar from working on pre-3.60 machines.

---------------------------------------------------------------------------

Version: 1.10 Wed 01-Mar-95        Graham Simms

* UK.!Help              - Replaced old text with new.
* Datafiles.Documents.* - Replaced old documentation with new.
* Makefile              - Added changed to work with new documentation.
* Source.ChangeFSI      - greyed out 'fast' option when VRAM fitted.
                          corrected fault with 24bpp BMP images.
                          Added 'Smoothing' to processing dialogue box.
                          
---------------------------------------------------------------------------

Version: 1.11 Fri 10-Mar-95        Graham Simms                  

* UK.Templates          - Replaced corrupt templates whith some that work. Fixes
                          MED-04850.
* Source.ChangeFSI      - Fixed MED-03469 by setting the file 'flag' to 0 when it is
                          closed.
                          Fixed MED-04706 by responding correctly to the pre-quit 
                          message.
                          Fixed MED-04890 where the indirected menu item length was
                          stored incorrectly.
                          
---------------------------------------------------------------------------

Version: 1.12 Mon 13-Mar-95        Graham Simms                  

* UK.Templates
  UK.3dTemplates        - Changed copyright to 1995
  
* Source.ChnageFSI      - Re-checked in because the last copy was junk. Don't know
                          why. Probably either !Zap or the SourceFiler junking the
                          file.
                          
***************************************************************************
                      Black - RISC OS 3.60 (4.28) build
***************************************************************************


===============================================================================

===================================
NFS::riscos_bl.$.Sources.Apps.Chars
===================================


===============================================================================

=====================================
NFS::riscos_bl.$.Sources.Apps.CloseUp
=====================================


===============================================================================

==================================
NFS::riscos_bl.$.Sources.Apps.Draw
==================================

Version: 1.01 Fri 04-Nov-94        JCoxhead                      

   Lots of pointless fixes to avoid warnings about enumeration types.
   JPEG support.
   Rotate ears taken off objects that cannot rotate.
   JPEG rotation made conditional on support provided by Sprite Extend. This
cannot be tested (!), but might work anyway.
   Changes for Orlando.
   Function key shortcaut for save jpeg (same as save sprites).
   Changed draw_transmat to drawmod_transmat to make type checking easier in
JPEG SWI's.
   New build structure.

---------------------------------------------------------------------------

Version: 1.02 Sat 05-Nov-94        Aideen McConville             

* Makefile:
     Now copies hdr.AppName and hdr.ResFiles into directory 's' so that
     ModuleWrap can find them.

* Resources.UK.!Run:
      Wimpslots increased slightly so that !Draw will run on a RISC PC

---------------------------------------------------------------------------

Version: 1.03 Fri 25-Nov-94        Steve Cormie                  

* Fixed MED-03880: Added !Draw module command help and syntax to Messages file.
* Fixed MED-03901: Brought ROM module version into line with application version.

---------------------------------------------------------------------------

Version: 1.04 Thu 01-Dec-94        JCoxhead                      

 * Fixed MED-03926: corrupt files after Undo.
 * Render files which do not have the font table at the beginning.
 * Alter JPEG rotation so it works if the JPEG is flipped (Draw unflips it
again).
 * Set Dither bit when rendering JPEG's.
 * Update Messages files (JPEG entries had been lost, so files were called
FileTc and the save menu had the JPEG entry missing).

---------------------------------------------------------------------------

Version: 1.05 Thu 19-Jan-95        JCoxhead                      

 * Dither sprites on output.
 * Set |draw_jpegs_rotate| when a JPEG is displayed for the first time -
ensures that the rotation code is disabled for all JPEG's, not only those
loaded from file.
 * Grey out Transform => Rotate when the selection is not rotatable.
 * Reinstate bounding of the diagram before printing.

(AMcC) Fixed in this or earlier version:

MED-04306  Text.Rotate not greyed for System font
MED-04253  Ctrl-Drag print bounding box in Draw: doesn't work
MED-04212  !Draw module help/syntax has been broken
MED-04061  !Draw/!Paint saving Sprites to !Paint breaks the rules
MED-03938  !Draw - dragging shpaes by the ears kills draw.
MED-03928  !Draw funny numbers in the title bar
MED-03927  !Draw complete lockup dropping files after errror
MED-03922  !Draw JPEG and X-scale Y scale causes App to crash
MED-03921  !Draw Transform.Y Scale kills the application
MED-03920  !Draw Transform.X Scale hourglasses machine 4 ever

---------------------------------------------------------------------------

Version: 1.06 Wed 01-Feb-95        Aideen McConville             

Build and Version change only - No functional change

* Fix MED-03784: Module version and date derived from Messages file during build

Changed files: Makefile
               awk.AppName (new file)
               asm.AppName (deleted - now a derived file)
               UK.Messages

---------------------------------------------------------------------------

Version: 1.07 Tue 07-Feb-95        Steve Cormie                  

* Fixed MED-04520: Added directed comments to Messages file for tokenisation.

---------------------------------------------------------------------------

Version: 1.08 Tue 28-Feb-95        JCoxhead                      

 * Pass the right bits to jpeg_plot_transformed().
 * Improve the presentation of a redraw error message.

---------------------------------------------------------------------------

Version: 1.09 Tue 07-Mar-95        JCoxhead                      

 * Fix MED-4786: use the right entries for palettes < 16 entries. Also, get
the "true" Wimp palette.

***************************************************************************
                      Black - RISC OS 3.60 (4.28) build
***************************************************************************


===============================================================================

==================================
NFS::riscos_bl.$.Sources.Apps.Edit
==================================

Version: 1.51 Fri 25-Nov-94        Steve Cormie                  

* Fixed MED-03879: Added !Edit module command help and syntax to Messages file.

---------------------------------------------------------------------------

Version: 1.52 Wed 18-Jan-95        Aideen McConville             

* Fix MED-03784: Module version and date derived from Messages file during build

Changed files: Makefile
               awk.AppName  (new file)
               s.AppName    (deleted - now a derived file)
               Resources.UK.Messages  (Now contains Version/Date)
               Resources.UK.Templates (Version/Date no longer hardwired in)
               h.editv      (moved from RISC_OSLib)
               c.edit       (include line change for editv.h)
               c.editv      (look up Version/Date in Messages file)

               (RISC_OSLib:rlib.c.txtedit - also updated)

---------------------------------------------------------------------------

Version: 1.53 Tue 07-Feb-95        Steve Cormie                  

* Fixed MED-04519: Added directed comments to Messages file for message tokenisation.

---------------------------------------------------------------------------

Version: 1.54 Fri 24-Feb-95        Aideen McConville             

* Fixed MED-04667: Corrected EditId token in Messages file (and awk script)

***************************************************************************
                      Black - RISC OS 3.60 (4.28) build
***************************************************************************


===============================================================================

==================================
NFS::riscos_bl.$.Sources.Apps.Help
==================================

Version: 2.27 Wed 23-Nov-94        Aideen McConville             

* Fix MED-03826 - remove Help tokens T0 ... from Messages file.

---------------------------------------------------------------------------

Version: 2.28 Wed 18-Jan-95        Aideen McConville             

Build and Version change only - No functional change

* Fix MED-03784: Module version and date derived from Messages file during build

Changed files: Makefile
               awk.Version (new file)
               s.Main
               Version     (deleted - now a derived file - s.Version)
               UK.Messages

***************************************************************************
                      Black - RISC OS 3.60 (4.28) build
***************************************************************************


===============================================================================

=====================================
NFS::riscos_bl.$.Sources.Apps.Maestro
=====================================

Version: 2.13 Tue 13-Dec-94        Steve Cormie                  

* Fixed MED-04048: Only tested to work on OS 3.60+, !Sprites23 no longer
  installed.

AMcC (13-Mar-95): Makefile: ensure that installed directory is /r

***************************************************************************
                      Black - RISC OS 3.60 (4.28) build
***************************************************************************


===============================================================================

===================================
NFS::riscos_bl.$.Sources.Apps.Paint
===================================

Version: 1.89 Thu 10-Nov-94        JCoxhead                      

 * Imports JPEG images.
 * Supports new-ofrmat sprites with palette.
 * Support for previous operating systems removed.
 * Use debugging memory allocator (m_ module).
 * Enable 15- and 24-bit sprite editing.
 * Use sprite_readpixel() again (mended for 3.6).
 * Lots of casts to avoid enumeration warnings from new C compiler.
 * Uses new Sprite Extend reason code OSSpriteOp_VerifyArea.
 * Turn on hourglass around file loading.
 * Better input verification for numbers.

---------------------------------------------------------------------------

Version: 1.90 Fri 25-Nov-94        Steve Cormie                  

* Fixed MED-03880: Added !Draw module command help and syntax to Messages file.
* Fixed MED-03902: Brought ROM module version into line with application version.

---------------------------------------------------------------------------

Version: 1.91 Thu 08-Dec-94        JCoxhead                      

 * Use file name as sprite name when importing JPEG images.
 * Call OSSpriteOp_VerifyArea on loading a new sprite file.
 * Don't attempt to auto-open a window on a sprite with an unrecognised mode.
 * Remove RISC_OS_PLUS conditional compilation.
 * If 'None' is selected as the current colour in a colour picker when
the mask is deleted, deselect it first.
 * Allow palettes to be given to new-format shallow sprites.
 * When filling rectangles with E C F 0 for the mask pattern, intersect
the clipping rectangle given by the Wimp with the area to be filled with
mask; avoids 16-bit overflow in OS_Plot ("32-bit OS," ho ho).
 * Turn on hourglass around spraycan fills; optimise a bit.

---------------------------------------------------------------------------

Version: 1.92 Tue 17-Jan-95        Aideen McConville             

Build and Version change only - No functional change

* Fix MED-03784: Module version and date derived from Messages file during build

Changed files: Makefile
               awk.AppName (new file)
               asm.AppName (deleted - now a derived file)
               UK.Messages

---------------------------------------------------------------------------

Version: 1.93 Tue 14-Feb-95        JCoxhead                      

 * Import JPEG's into sprites with full palette.
 * On snapshot, only lose the temporary ranslation table if it has been found.
 * Error diffuse JPEG's when converting them on input.
 * When saving the sprite from a sprite file with only one, offer the file
name as destination.
 * Disable ECF definition for deep sprites - a colour picker prvides no way
to choose the pattern.
 * Improve ECF definition from deep sprites.
 * Make ECF's as painted with pixel paint/brush paint (which write direct to
the sprite) line up properly with all other tools (which work by redirecting
output to sprite and then using OS_Plot).

---------------------------------------------------------------------------

Version: 1.94 Fri 17-Feb-95        Steve Cormie                  

* Fixed MED-04521: Added directed comments to Messages file for message tokenisation.

***************************************************************************
                      Black - RISC OS 3.60 (4.28) build
***************************************************************************


===============================================================================

====================================
NFS::riscos_bl.$.Sources.Apps.Player
====================================

Version: 1.23 Mon 13-Mar-95        Aideen McConville             

Created.

***************************************************************************
                      Black - RISC OS 3.60 (4.28) build
***************************************************************************


===============================================================================

=======================================
NFS::riscos_bl.$.Sources.Apps.PhotoView
=======================================

Version: 0.09 Fri 31-Mar-95        Aideen McConville             

!PhotoView from Released DO disc 0284,530/S

Build environment included.

---------------------------------------------------------------------------

Version: 0.10 Fri 31-Mar-95        Aideen McConville             

MED-03872: New PhotoCD module (0.25 14-Jan-1995) from Stewart Palmer

MED-05094: New image.c from Graham Simms

Version updated in main.c

***************************************************************************
                      Black - RISC OS 3.60 (4.28) build
***************************************************************************


===============================================================================

=====================================
NFS::riscos_bl.$.Sources.Apps.SciCalc
=====================================

Version: 0.55 Tue 13-Dec-94        Steve Cormie                  

* Fixed MED-04048: Only tested to run on OS 3.60 or later.
* Fixed MED-03933: Now updates title bar before possibly generating an error
  when changing base.
* Updated version in !Help file.

AMcC (13-Mar-95): Makefile: ensure that installed directory is /r

***************************************************************************
                      Black - RISC OS 3.60 (4.28) build
***************************************************************************


===============================================================================

====================================
NFS::riscos_bl.$.Sources.Apps.Squash
====================================

Version: 0.49 Tue 13-Dec-94        Steve Cormie                  

* Fixed MED-04048: Only tested to work on OS 3.60+, no longer intalls
  !Sprites23.

AMcC (13-Mar-95): Makefile: ensure that installed directory is /r

***************************************************************************
                      Black - RISC OS 3.60 (4.28) build
***************************************************************************


===============================================================================

=======================================
NFS::riscos_bl.$.Sources.Demos.ArtWorks
=======================================


===============================================================================

=========================================
NFS::riscos_bl.$.Sources.Demos.AudioDemos
=========================================

Version: 0.01 Mon 13-Mar-95        Aideen McConville             

Created.

---------------------------------------------------------------------------

Version: 0.02 Fri 17-Mar-95        Aideen McConville             

* Fix MED-04980 - Added UK.Readme from JAllin.

***************************************************************************
                      Black - RISC OS 3.60 (4.28) build
***************************************************************************


===============================================================================

=====================================
NFS::riscos_bl.$.Sources.Demos.Images
=====================================

Version: 0.14 Mon 13-Mar-95        Aideen McConville             

New Team Picture (and Readme) for Black Release.

AMcC (17-Mar-95): Makefile: Simplified install rule, also sets access perms

***************************************************************************
                      Black - RISC OS 3.60 (4.28) build
***************************************************************************


===============================================================================

========================================
NFS::riscos_bl.$.Sources.Demos.SlideShow
========================================

Version: 1.08 Tue 29-Nov-94        Steve Cormie                  

* Fixed MED-03908: Only Escape error from ChangeFSI causes return to desktop.
  Other errors just cause the current image to be skipped.

---------------------------------------------------------------------------

Version: 1.09 Fri 06-Jan-95        Steve Cormie                  

* Fixed the fix made in version 1.08. Memory used by BASIC increased by 256
  bytes for each picture displayed using ChangeFSI due to a string being
  created each time. Memory used should now be static.

---------------------------------------------------------------------------

Version: 1.10 Fri 06-Jan-95        Steve Cormie                  

* Removed debugging left in version 1.09.

AMcC (17-Mar-95): Makefile: Install rule - sets access perms

***************************************************************************
                      Black - RISC OS 3.60 (4.28) build
***************************************************************************


===============================================================================

=====================================
NFS::riscos_bl.$.Sources.Demos.Sounds
=====================================

Version: 0.02 Mon 27-Feb-95        Aideen McConville             

* Fixed MED-04681 : New versions of ADPCM sound files (1812 & Enigma) from
                    Replay (old ones were crackly).

AMcC (13-Mar-95): Makefile: Added Access line to install rule to ensure files are
                  publicly readable.

***************************************************************************
                      Black - RISC OS 3.60 (4.28) build
***************************************************************************


===============================================================================

========================================
NFS::riscos_bl.$.Sources.Demos.Tutorials
========================================

Version: 0.08 Fri 09-Dec-94        Aideen McConville             

 * Fixed MED-04096

     Added UK.StarComms (from TechPubs) and updated Makefile to
     install it.

---------------------------------------------------------------------------

Version: 0.09 Wed 11-Jan-95        Aideen McConville             

* New StarComms from Martin Ley (no longer describes *Speaker command -
  no effect on machines later than the A5000).

---------------------------------------------------------------------------

Version: 0.10 Wed 18-Jan-95        Aideen McConville             

* New StarComms from Martin Ley:
    Fixes MED-04163 - rmfaster - for backwards compatibility only.

---------------------------------------------------------------------------

Version: 0.11 Thu 19-Jan-95        Martin Ley                    

Fixed formatting errors and typos in StarComms file (in advance of bug
report submitted by DReid - Ref No to follow). Also, *Speaker documented as
existing, but doing nothing.
---------------------------------------------------------------------------

Version: 0.12 Thu 26-Jan-95        Martin Ley                    

Fixed bug MED-04405, submitted by DReid.
---------------------------------------------------------------------------

Version: 0.13 Mon 30-Jan-95        Martin Ley                    

Removed descriptions of the following commands:

*RMRun
*RMLoad
*Obey2

as per MED-04458 (Alan Glover)

---------------------------------------------------------------------------

Version: 0.14 Wed 01-Feb-95        Martin Ley                    

Fixed bug MED-04457 (aglover): added descriptions to commands taking a
parameter <n>, to give range of possible values for n.
---------------------------------------------------------------------------

Version: 0.15 Mon 13-Feb-95        Martin Ley                    

Added descriptions of the following *commands, as a result of MED-04577:

*Configure SCSIFSDirCache
*Configure SCSIFSdiscs
*Configure SCSIFSdrive
*FwShow
*InetGateway
*Render
*Share
*ShareFS
*ShareFSIcon
*Shares
*Unshare
*VRMLoad
*VRMRun

---------------------------------------------------------------------------

Version: 0.16 Wed 15-Feb-95        Martin Ley                    

Removed *InetConfig command at K Welton's request.
---------------------------------------------------------------------------

Version: 0.17 Fri 17-Feb-95        Martin Ley                    

Incorporated more minor improvements due to MED-04405.
---------------------------------------------------------------------------

Version: 0.18 Mon 20-Feb-95        Martin Ley                    

Removed VRMRun andVRMLoad (MED-04577)
---------------------------------------------------------------------------

Version: 0.19 Tue 21-Feb-95        Martin Ley                    

Corrected minor error in *SafeLogon command syntax
---------------------------------------------------------------------------

Version: 0.20 Fri 10-Mar-95        Mike Hardy                    

Substantially reworked StarComms file:

* Reformatted to fit on 80 column screen modes

* Commands in file verified against those in version 4.15; some
  removed/added as a result; *InetChecksum also added

* Descriptions checked against PRM; some reworked, especially descriptions
  of commands imported from other projects

* Fixed several incorrect syntax descriptions

* Fixed outstanding bugs (MED-04405, MED-04765)

* Results checked against all Black bug reports relating to StarComms file;
  nothing 'unfixed'.

---------------------------------------------------------------------------

Version: 0.21 Fri 10-Mar-95        Aideen McConville             

Some file rename fixes. (from MHardy)

AMcC (20-Mar-95): Makefile - install rule: set access for files & dirs
No new version.

---------------------------------------------------------------------------

Version: 0.22 Thu 23-Mar-95        Mike Hardy                    

Further changes to StarComms file:

* Fixed MED-05040, MED-05048.

* Specified exact version of RISC OS documented, rather than just
  'RISC OS 3'.

* Fixed bad wrapping of *MemoryI syntax

* Fixed syntax of *PathMacro describing *Path (cut and paste mistake by me)

* Minor change to formatting of *Render.

***************************************************************************
                      Black - RISC OS 3.60 (4.28) build
***************************************************************************


===============================================================================

=====================================
NFS::riscos_bl.$.Sources.Demos.Videos
=====================================

Version: 0.01 Fri 09-Dec-94        Steve Cormie                  

* Fixed MED-04113: Removed references to specific machines from ReadMe file.

AMcC (13-Mar-95): Makefile: Added Access line to install rule to ensure files are
                  publicly readable.

***************************************************************************
                      Black - RISC OS 3.60 (4.28) build
***************************************************************************


===============================================================================

==========================================
NFS::riscos_bl.$.Sources.Diversions.Blocks
==========================================

Version: 0.13 Tue 31-Jan-95        Aideen McConville             

* Fix MED-04386: Makefile - !Sprites23 no longer installed

***************************************************************************
                      Black - RISC OS 3.60 (4.28) build
***************************************************************************


===============================================================================

=========================================
NFS::riscos_bl.$.Sources.Diversions.Clock
=========================================

Version: 0.23 Tue 31-Jan-95        Aideen McConville             

* Fix MED-04386: Makefile - !Sprites23 no longer installed

***************************************************************************
                      Black - RISC OS 3.60 (4.28) build
***************************************************************************


===============================================================================

===========================================
NFS::riscos_bl.$.Sources.Diversions.Flasher
===========================================


===============================================================================

==========================================
NFS::riscos_bl.$.Sources.Diversions.MemNow
==========================================


===============================================================================

===========================================
NFS::riscos_bl.$.Sources.Diversions.Meteors
===========================================


===============================================================================

============================================
NFS::riscos_bl.$.Sources.Diversions.MineHunt
============================================


===============================================================================

============================================
NFS::riscos_bl.$.Sources.Diversions.Patience
============================================

Version: 0.67 Tue 31-Jan-95        Aideen McConville             

* Fix MED-04386: Makefile - !Sprites23 no longer installed

***************************************************************************
                      Black - RISC OS 3.60 (4.28) build
***************************************************************************


===============================================================================

==========================================
NFS::riscos_bl.$.Sources.Diversions.Puzzle
==========================================

Version: 0.53 Tue 31-Jan-95        Aideen McConville             

* Fix MED-04386: Makefile - !Sprites23 no longer installed

***************************************************************************
                      Black - RISC OS 3.60 (4.28) build
***************************************************************************


===============================================================================

===============================
NFS::riscos_bl.$.Sources.HdrSrc
===============================

Version: 3.50 Thu 23-Jun-94        Aideen McConville             

Equivalent to the headers used to build RISC OS 3.50

---------------------------------------------------------------------------

Version: 3.51 Fri 24-Jun-94        Aideen McConville             

Added:   hdr.Machine.Morris
Updated: hdr.IO.IOMD         (now includes support for Morris)
Updated: hdr.Pointer         (includes support for PS2Mouse)
Deleted: hdr.Arthur.Space200
Deleted: hdr.NewSpace

The last two are redundant
(and are really Kernel interface files - stored in Kernel.hdr)


---------------------------------------------------------------------------

Version: 3.52 Fri 24-Jun-94        Aideen McConville             

Updated: hdr.Macros - includes JumpAddress, LD and ST from EcoMacros
                                                       (now deprecated)

---------------------------------------------------------------------------

Version: 3.53 Mon 04-Jul-94        Aideen McConville             

Makefile                 New exports - KEYV, PDriverReg, PDumperReg,
                                       PoduleReg, VIDC1a

hdr.CMOS                 16-bit sound output allocation (MT)
hdr.CPU.Generic26        OPT restored
hdr.IO.IOMD              More Morris support (RM)
hdr.KEYV                 New file (RM)

Register.Devices
Register.DrawObj
Register.DrawTags
Register.FSNumbers
Register.ISV-SWIs
Register.ISV-Types
Register.NewErrors
Register.PDriverReg      New file
Register.PDumperReg      New file
Register.PoduleReg       New file
Register.Services

---------------------------------------------------------------------------

Version: 3.54 Thu 28-Jul-94        Aideen McConville             

Changed headers:
  Register.ISV-SWIs
  Register.ISV-Types
  Register.NewErrors
  Register.Services

---------------------------------------------------------------------------

Version: 3.55 Thu 11-Aug-94        Aideen McConville             

Changed headers:
  Register.ISV-SWIs
  Register.ISV-Types
  Register.NewErrors

  hdr.CMOS
  hdr.Machine.Morris - StorkPowerSave flag added.

---------------------------------------------------------------------------
 Makefile - don't create Arthur directory


---------------------------------------------------------------------------

Version: 3.56 Tue 30-Aug-94        Graham Simms                  

Added new JPEG error to Register.NewErrors

---------------------------------------------------------------------------

Version: 3.57 Wed 14-Sep-94        Mike Stephens                 

31-Aug-94  SMC  hdr.Debug       Added debugging to file.

Added 2 Printer driver JPEG errors to Register.NewErrors

---------------------------------------------------------------------------

Version: 3.58 Mon 19-Sep-94        Graham Simms                  

16-Sep-94  SMC  hdr.Pointer     Name string in pointer records is no longer
                                limited to <= 30 characters.

Added new JPEGNoRoom error to Register.NewErrors

---------------------------------------------------------------------------

Version: 3.59 Thu 22-Sep-94        Graham Simms                  


20-Sep-94  SMC  hdr.Debug       Added support for DebugIt module.
                hdr.NdrDebug    Added support for DebugIt module.
                
22-Sep-94  GPS  Register.NewErrors   Added new Sprite_JPEGFatal error.                

---------------------------------------------------------------------------

22-Sep-94  SMC  Register.NewErrors      Added token to message for
                                        Sprite_NoMaskOrPaletteAllowedInThisDepth.

---------------------------------------------------------------------------

27-Sep-94  GPS  hdr.Sprite   Added SpriteReason_CheckSpriteArea (17).
27-Sep-94  GPS  Register.NewErrors   Added Sprite_BadData error.
               
---------------------------------------------------------------------------

19-Oct-94  amg  hdr.ImageSize (dir)   Created

19-Oct-94  AMcC Makefile - updated to Export hdr.ImageSize files

---------------------------------------------------------------------------

25-Oct-94  GPS  hdr.Sprite           Removed SpriteReason_PutSpriteTransformedCalibrated, PutSpriteScaledCalibrated
                                     Added definitions for JPEG SWIs.

25-Oct-94  GPS  Register.NewErrors   Added Sprite_NoGrScl error.


---------------------------------------------------------------------------

Version: 3.60 Tue 25-Oct-94        Richard Manby                 

Sorry - added new Morris defns to IO.IOMD

---------------------------------------------------------------------------

26-Oct-94  AMcC  Register.NewErrors - removed spurious character

26-Oct-94  RCM   hdr.DevNos - Added IOMD (Morris) devices.

26-Oct-94  AMcC  hdr.DevNos - removed MorrisSupport conditional

29-Oct-94  AMcC  hdr.Sprite - removed definitions for JPEG SWIs (now in Hdr:SprExtend)

31-Oct-94  AMcC  hdr.IO.IOMDL - new file - Morris specific IOMD (defines IOMD_CLINES)
                 Makefile     - updated to export IO.IOMDL
                 hdr.Machine.Morris - IO_Type now defined as IOMDL (was IOMD)
                                    - StorkPowerSave defined

01-Nov-94  AMcC  hdr.Machine.Morris - GET Hdr:IO.IOMDL but leave IO_Type defined as IOMD
                                      (to keep Kernel happy)

---------------------------------------------------------------------------

Version: 3.83 Tue 22-Nov-94        Aideen McConville             

First build for Black audit.

---------------------------------------------------------------------------

28-Nov-94  MJS  Added error NeedMod to Register.NewErrors

30-Nov-94  SMC  hdr.MEMM.ARM600 - Added MMU Control reg flags MMUC_R and MMUC_F.

02-Dec-94  RCM  hdr.IO.IOMDL added register bit defns. for Event1 & Event2
02-Dec-94  RCM  hdr.KEYV added extra reason code KEYV_PortInfo

12-Dec-94  SMC  hdr.CMOS - Added 6 more bytes for unplugging modules.

---------------------------------------------------------------------------

Version: 3.90 Mon 12-Dec-94        Aideen McConville             

These headers used for 3.90 build (except latest hdr.CMOS)

---------------------------------------------------------------------------
19-Dec-94  AMcC Register.ISV-SWIs - CD, CDFS vendor tag now Acorn
19-Dec-94  KPW  NewErrors - Added an error block for DCI4
21-Dec-94  KPW  Services - Service_ProtocolDying renamed to Service_ProtocolStatus
22-Dec-94  SMC  hdr.CMOS - Moved one of the new unplug bytes.
04-Jan-95  AMcC PDumperReg - small correction (wouldn't assemble)

---------------------------------------------------------------------------

Version: 3.95 Tue 10-Jan-95        Aideen McConville             

** 3.95 build **

---------------------------------------------------------------------------
20-Feb-95  SMC  Added new NetPrint error - NetOldServer.

Version: 3.96 Mon 21-Feb-95      

20-Feb-95  RCM  Added new service Service_AccessLockKey

---------------------------------------------------------------------------

Version: 4.14 Thu 02-Mar-95        Aideen McConville             

Black Freeze 1

---------------------------------------------------------------------------

(08-Mar-95) New hdr.IO stuff from RManby

---------------------------------------------------------------------------

Version: 4.20 Tue 14-Mar-95        Aideen McConville             

Black Freeze 2 (RISC OS 3.60)

11-Apr-95  SMC  hdr.CMOS - Added bit to PSITCMOS and added PrinterIDCMOS for OM.
28-Apr-95  SMC  hdr.CMOS - Allocated bit 7 of StartCMOS for OM "standby mode".
15-May-95  SMC  hdr.CMOS - Allocated bit 1 of VduCMOS as monitor not configured bit.


***************************************************************************
                      Black - RISC OS 3.60 (4.28) build
***************************************************************************


---------------------------------------------------------------------------

.....................................
Changes since previous release follow
.....................................


===============================================================================

========================================
NFS::riscos_bl.$.Sources.Import.Aquarius
========================================


===============================================================================

===================================
NFS::riscos_bl.$.Sources.Import.DDT
===================================


===============================================================================

==================================
NFS::riscos_bl.$.Sources.Lib.OSLib
==================================

Version: 4.50 Wed 11-Jan-95        JCoxhead                      

 * Added SWI's MessageTrans_Dictionary, Joystick_ReadHalfWord,
Joystick_CalibrateTopLeft, Joystick_CalibrateBottomRight, PDriver_JPEGSWI.

 * Added modules JPEG, CompressJPEG, Portable.

 * Corrected WimpTextOp flags.

 * Added type OSFile_InfoWords, useful for converting load and exec
addresses into date and time.

 * Corrected NetFS_DoFSOpToGivenFS.

 * Added Wimp_GivenWindowAndIcon for Wimp_GetMenuState.

 * Added ColourPicker_DialogueIgnoreKeyPressed and
ColourPicker_UpdateIgnoreKeyPressed.

---------------------------------------------------------------------------

Version: 4.60 Tue 28-Feb-95        JCoxhead                      

 * Add |const| qualifiers in places where they are valid, i e, where the
function takes a pointer to an object which it does not use to modify
the object.

 * Made |filecore_disc_record| 4 bytes longer, since filecore_describe_-
disc() fills in 64 bytes.

 * Changed int to char [4] in NetFS to avoid alignment problems.

 * Added OS_ChangedBoxState constants.

 * Moved most of the macros in "types.h" into a new "macros.h."

 * Added mode flags bits.

 * Corrected name of ColourTrans_ReadPalette's output argument: |spare|
not |used|.

 * At this point, the RISC O S interface provided by OSLib consists of

       2122 symbolic constants
        461 error numbers
         16 event functions
         78 message numbers
        103 service call functions
        983 swi functions (each in x and non-x form)
        355 types
         25 upcall functions
         36 vector functions

in 68 header files.

 * Changed workspace from |byte *| to |void *| (for consistency) in
ColourPicker and CompressJPEG. (|Buffer| should never be |const|;
|workspace| should always be |void *|; |handle| should always be |int|.)

 * PaletteV_{Read,Write}Entries argument changed to |os_colour_number *|
from |int *|.

---------------------------------------------------------------------------

Version: 4.61 Wed 01-Mar-95        JCoxhead                      

 * Added DrawFile and JPEG to Makefile.

AMcConville (04-Apr-95): No new version

 * Makefile - export rule divided into two phases: export_hdrs, export_libs

***************************************************************************
                      Black - RISC OS 3.60 (4.28) build
***************************************************************************


---------------------------------------------------------------------------

.....................................
Changes since previous release follow
.....................................


===============================================================================

=======================================
NFS::riscos_bl.$.Sources.Lib.RISC_OSLib
=======================================

Version: 4.59 Fri 19-Aug-94        Alan Glover                   

Fix bug MED-03572 (c.txtedit) Quitting edit from the task window whilst
there's a modified file causes the whole desktop to shut down when the
file is discarded

---------------------------------------------------------------------------

Version: 4.60 Tue 30-Aug-94        Alan Glover                   

Fix bug MED-03067 (c.txtedit, again). Was framing an error block and
not bothering to fill in an error number. Result was that spurious
fatal program errors sometimes occurred.

(AMcC) (30-Sep-94) also small change to c.txtfile (error reporting)
---------------------------------------------------------------------------

Version: 4.61 Tue 06-Sep-94        Aideen McConville             

* Makefile: added rom_link rule (needed for final stage of ROM Image build).

* s.version: updated to 4.61

---------------------------------------------------------------------------

Version: 4.62 Mon 26-Sep-94        Steve Cormie                  

* Fixed MED-03708:
  s.initmodule:                 Messages "Stub data size = " and
                                "Library data size = " now looked up in
                                Messages file.
  clib.Resources.UK.Messages:   Above messages added as C67, C68.
  kernel.s.k_body:              Sorted out _kernel_getmessage (could return
                                error pointer with no V set, also works for
                                :DEF:DEFAULT_TEXT now).
                                "registers at:" message only required for
                                :DEF:DEFAULT_TEXT.
  clib.s.cl_body:               "Postmortem" message only required for
                                :DEF:DEFAULT_TEXT.
  rlib.c.txtar:                 Debugging error removed.
  Makefile:                     Now builds lib.Clib (SharedCLibrary RAM module)
                                correctly.

---------------------------------------------------------------------------

Version: 4.63 Fri 28-Oct-94        Aideen McConville             

* Updated generation of swis.h (for Aquarius)
  hdr.SharedCLib: (new) contains SWI definitions (now included in swis.h)
  s.makeswis:     Generates SWI name defs for all SWIs listed in 3.50 PRM
                  Generates swis.h suitable for Aquarius

* s.modulewrap:   Looks for ResFiles in directory 's'.

* Makefile:       Exports hdr.SharedCLib (SWI defs)
                  Exports some files from rlib.h.EditIntern (needed by !Edit)
                  Generates o.c_abssym (c symbols only) as well as o.abssym -
                  some RISC_OSLib symbols clashed with symbols used by modules
                  that don't normally link with RISC_OSLib (e.g. RemPrnSpt).


---------------------------------------------------------------------------

Version: 4.64 Fri 28-Oct-94        Aideen McConville             

* Reinstated the following in the ROM library (needed by !Paint)

  - rlib.c.colourtran (colourtran_return_colourformode)
  - rlib.c.sprite     (sprite_get_given_rp)
  - rlib.c.wimp       (wimp_ploticon, wimp_which_icon)
  - rlib.c.win        (win_read_eventhandler)
  - rlib.s.rl_entries (reinstated above symbols)

---------------------------------------------------------------------------

Version: 4.65 Mon 31-Oct-94        Steve Cormie                  

* s.modulewrap: Make Filer_Action look up help/syntax in its own message file.
* Messages:     Added directed comments for message tokenisation.

---------------------------------------------------------------------------

Version: 4.66 Fri 25-Nov-94        Steve Cormie                  

* s.modulewrap: Other apps using modulewrap need to look up help and syntax
  for *Desktop_<AppName>.

---------------------------------------------------------------------------

Version: 4.67 Fri 25-Nov-94        Aideen McConville             

* Compatibility changes for 500 Series compiler:
    __rt_ symbols defined and exported as needed

  Changed files:
      clib.s.cl_body
      clib.s.cl_data
      clib.s.cl_entries
      kernel.s.k_body
      kernel.s.k_entries
      s.h_modmacro
      s.h_stubs

---------------------------------------------------------------------------

Version: 4.68 Fri 25-Nov-94        Aideen McConville             

* Create a 'special' Entries file (syms.A_Entries) that doesn't include
  swi and swix entries. This is necessary for ROM components that define
  their own versions of swi and swix (e.g. ShareFS)

  Changed files:
      syms.A_Entries (new)
      Makefile

---------------------------------------------------------------------------

Version: 4.69 Wed 30-Nov-94        Aideen McConville             

* Updated some CLib.h files in line with Aquarius versions:
      clib.h.ctype
      clib.h.kernel
      clib.h.math
      clib.h.stdio

* s.makeswis: Added Hdr:DragAnObj

* Makefile: Now exports ansilib
            Fixed typo: (o.rl.swi: --> o_rl.swi) to ensure that the correct
            definitions are copied to asmdefs before assembling swi

---------------------------------------------------------------------------

Version: 4.70 Mon 05-Dec-94        Steve Cormie                  

* Fixed MED-03597: s.modulewrap used ANDNV instructions as NOPs.

---------------------------------------------------------------------------

Version: 4.71 Fri 09-Dec-94        Steve Cormie                  

* Fixed MED-03777: s.initmodule and kernel.s.k_body used banked registers
  after a processor mode change.

---------------------------------------------------------------------------

Version: 4.72 Tue 03-Jan-95        Aideen McConville             

* s.makeswis: Added CDROM and SCSI SWIs (as requested by SPalmer)

---------------------------------------------------------------------------

Version: 4.73 Mon 09-Jan-95        Aideen McConville             

* s.makeswis: Added #defines for INR(..) and OUTR(..) and Usage comment
              (for Aquarius)

---------------------------------------------------------------------------

Version: 4.74 Wed 11-Jan-95        Steve Cormie                  

* s.initmodule, kernel.s.k_body: Fixed fixes made in version 4.71.
* clib.s.cl_body: Fixed MED-04254, pow(0,0) should have returned 1.
* c.stdio: Fixed MED-04294, setvbuf followed by getc failed to allocate a
  system buffer and hence crashed the machine.

---------------------------------------------------------------------------

Version: 4.75 Wed 18-Jan-95        Aideen McConville             

* MED-03784 - part of Fix (for !Edit) - look up Version/Date in Messages
  file and use to fill in ProgInfo template. Change in rlib.c.txtedit - part of
  RISC_OSLib but used only by !Edit (IJ).

* Moved rlib.h.EditIntern.editv to !Edit (not required by RISC_OSLib)

* Makefile: uptodate list of dynamic dependencies
            no longer exports rlib.h.EditIntern.editv

---------------------------------------------------------------------------

Version: 4.76 Wed 15-Feb-95        Steve Cormie                  

* h.hostsys, s.h_workspc, kernel.s.k_body, c.stdio - Fixed MED-04611:
  Function tmpnam() now uses byte in zero page as a counter and checks
  that the file name generated is not that of an existing file.

-----

Same version: Fri 17-Feb-95 AMcC - s.makeswis - changed Hdr:CDROMFS to Hdr:CDFS

---------------------------------------------------------------------------

Version: 4.77 Mon 27-Feb-95        Steve Cormie                  

* kernel.s.k_body - Fix made in version 4.76 prevented ansilib from being built.

---------------------------------------------------------------------------

Version: 4.78 Tue 28-Feb-95        JCoxhead                      

 * Fixed typo in dbox.c. (MED-04747)

AMcC: 29-Feb-95: Updated s.Version

---------------------------------------------------------------------------

Version: 4.79 Wed 01-Mar-95        Aideen McConville             

* Reinstated the following in the ROM library (needed by !Draw)

  - rlib.c.bbc        (bbc_gwindow)
  - rlib.s.rl_entries (reinstated above symbol)
  - s.Version

AMcConville (04-Apr-95): No new version

 * Makefile - export rule divided into two phases: export_hdrs, export_libs
              swis.h is created during the second phase (export_libs)
              This ensures that all components have exported their hdr files
              before any attempt is made to create swis.h

***************************************************************************
                      Black - RISC OS 3.60 (4.28) build
***************************************************************************


===============================================================================

====================================
NFS::riscos_bl.$.Sources.Lib.Support
====================================

Version: 0.01 Thu 01-Sep-94        JCoxhead                      

 * Internationalised riscos_format_fixed() and riscos_scan_fixed(), added
riscos_territory() to allow the territory-specific information to be
initialised.

---------------------------------------------------------------------------

Version: 0.02 Fri 11-Nov-94        JCoxhead                      

 * Export task handle from application().
 * Use new recommendations (in OSLib's ChangeLog) for calling
wimp_initialise().
 * No need to set |unclaimed| to true in callback functions. (Used in
steppables.)
 * New icon_set_text().
 * Lookup tables can be non-powers of 2, use memset() to clear to avoid
beta-release compiler bug.
 * m_ can supply guard bytes before the allocated blocks as well as after.
 * riscos_strcpy() teminates the copy with 0, even if it was terminated with
another control character.
 * Allow the message-thread-following code (in task_) to accept a null
function pointer for the action on replies or bounces.
 * New window_open() suitable for registering as a wimp_OPEN_WINDOW_REQUEST
handler.

---------------------------------------------------------------------------

Version: 0.03 Wed 30-Nov-94        JCoxhead                      

 * Recoded riscos_scan_fixed() [reads a decimal number into an integer using
a scaling, factor, without using floating arithmetic]. After trying to use
sacanf() in a variety of ways, it now does it itself, and finally works
properly.
 * Default trace destination is now V D U: this means you can tell instantly
if tracing has been left enabled in a module.
 * Added 2 service calls to DrawFile.def.

---------------------------------------------------------------------------

Version: 0.04 Mon 09-Jan-95        JCoxhead                      

 * Added icon_get_slider() to read the value of a slider.
 * riscos_territory() doesn't return an error if no territory is loaded;
it just uses '.' instead.
 * steppable_set_value() does not call its value_changed function if the
value has has not properly changed. Fixes MED-3768 and lots more.
 * Added trace_vdu().

---------------------------------------------------------------------------

Version: 0.05 Wed 11-Jan-95        JCoxhead                      

 * Fixed steppable_set_slider() so that it always makes its callback; was
breaking (e g) colour picker's attempts to keep the colour patch up to date
without updating it too often.

---------------------------------------------------------------------------

Version: 0.06 Mon 27-Feb-95        JCoxhead                      

 * Use strcmp() if territory_collate fails.
 * Bound the value used in a stappable to its range.
 * Reduce the size of an |x_exception| by a few words.
 * New Socket.def.

---------------------------------------------------------------------------

Version: 0.07 Thu 02-Mar-95        JCoxhead                      

 * New steppable_get_value().

---------------------------------------------------------------------------

Version: 0.08 Fri 10-Mar-95        JCoxhead                      

 * Use strcmp() if territory_collate fails, and do it right this time :-(.

---------------------------------------------------------------------------

Version: 0.09 Fri 10-Mar-95        Aideen McConville             

 * Removed def.drawfile and def.jpeg (now in OSLib)

---------------------------------------------------------------------------

Version: 0.10 Thu 16-Mar-95        JCoxhead                      

 * Do not skip leading linefeeds (10) in riscos_scan_fixed(). Fixed MED-04986.

---------------------------------------------------------------------------

Version: 0.11 Tue 21-Mar-95        JCoxhead                      

 * New function riscos_strcmp().

***************************************************************************
                      Black - RISC OS 3.60 (4.28) build
***************************************************************************


---------------------------------------------------------------------------

.....................................
Changes since previous release follow
.....................................


===============================================================================

======================================================
NFS::riscos_bl.$.Sources.NetWorking.AUN.Access.EconetA
======================================================

Version: 2.00 Wed 11-Jan-95        Aideen McConville             

From Kevin Welton.

***************************************************************************
                      Black - RISC OS 3.60 (4.28) build
***************************************************************************


===============================================================================

======================================================
NFS::riscos_bl.$.Sources.NetWorking.AUN.Access.Freeway
======================================================

Version: 0.15 Wed 11-Jan-95        Aideen McConville             

From Kevin Welton.

---------------------------------------------------------------------------

Version: 0.16 Mon 13-Feb-95        Aideen McConville             

From Paul Wain.

---------------------------------------------------------------------------

Version: 0.18 Mon 06-Mar-95        Aideen McConville (from Networking group)

Built under RISC OS (included in Build 4.15 - Freeze 1)

---------------------------------------------------------------------------

Version: 0.19 Mon 06-Mar-95        Aideen McConville (from Networking group)          

* Tidied up scope and declarations and variables; now compiles
  cleanly with -ffah

Changed files:
  cmhg.FwHdr
  inetfn.c
  module.c
  objects.c
  module.h

---------------------------------------------------------------------------

Version: 0.21 Tue 14-Mar-95        Aideen McConville   (From Kevin Welton)

* Found and plugged a significant number of memory leaks (MED-04938)
* added range checking on SWI numbers.

Changed files:
  Makefile
  cmhg.FwHdr
  h.module
  c.module

---------------------------------------------------------------------------

Version: 0.22 Mon 20-Mar-95        Aideen McConville   (from KWelton)

* Added two new service calls: 
        0x5e (MessageFileClosed)
    and 0xb0 (InternetStatus).

Changed files:
  cmhg.FwHdr
  h.module
  c.module

Faults fixed: MED-04730, MED-04870, MED-04871

---------------------------------------------------------------------------

Version: 0.23 Fri 24-Mar-95        Aideen McConville   (from KWelton)

(from module.c)
* read_ifs() was not ignoring unwanted interfaces (e.g. Slip) when
  looking for an interface to set an address on.  This has been
  fixed by a fairly hefty rewrite of read_device_name().

Changed files:
  cmhg.FwHdr
  h.module
  c.module

Faults fixed: MED-04962, MED-04963, MED-05021

---------------------------------------------------------------------------

Version: 0.24 Fri 31-Mar-95        Aideen McConville   (from PWain)

 * $Log:	module.c,v $
 * Revision 1.20  95/03/31  11:04:15  kwelton
 * Two main changes:
 * 
 * 1)  When Paul fixed my inappropriate use of splimp() and splx(), he used
 *     ensure_irqs_on() to replace splimp(); it should have been
 *     ensure_irqs_off().
 * 
 * 2)  All pending callbacks are removed during module finalisation.
 * 
 * Revision 1.19  95/03/30  16:22:50  pwain
 * Changed some splimp() and splx() calls tp
 * ensure_irqs_on and restore_irqs
 * 
 * Revision 1.18  95/03/30  16:14:12  kwelton
 * Three significant changes:
 * 
 * 1)  Error token FWONex should be FWONEx (tokens are case significant)
 * 
 * 2)  Socket descriptors in struct fw should be initialised to -1, this
 *     stops them being erroneously closed in fw_final().
 * 
 * 3)  Internet Event enables are counted - this is some perfectly healthy
 *     paranoia to prevent disabling events that haven't been enabled.
 * 
 * Revision 1.17  95/03/30  15:25:26  pwain
 * Added stacks of debug (more meaningful) for
 * Black Rom problem solving.
 * 
 * Revision 1.16  95/03/30  09:30:38  kwelton
 * fw_final() resets socket descriptors to an invalid number after calling
 * socketclose().
 * 


Changed files:
  cmhg.FwHdr
  h.module
  c.module
  c.objects
  c.svcprint (added, only needed when building debugging version)

***************************************************************************
                      Black - RISC OS 3.60 (4.28) build
***************************************************************************


===============================================================================

======================================================
NFS::riscos_bl.$.Sources.NetWorking.AUN.Access.ShareFS
======================================================

Version: 2.28 Mon 06-Mar-95        Aideen McConville (from Networking group)

Built under RISC OS (included in Build 4.15 - Freeze 1)

---------------------------------------------------------------------------

Version: 2.29 Mon 06-Mar-95        Aideen McConville (from Networking group)

 * Altered defintion of FORHANDLES() macro to check that the handle has been
   initialised.

Changed files:
  Makefile: (CFLAGS) removed -Fn flag (don't embed function names)
  cmhg.mshare
  c.daemon

---------------------------------------------------------------------------

Version: 2.32 Tue 14-Mar-95        Aideen McConville   (From Paul Wain)

 ShareFS 2.x now uses the CD share icon if a
 disc is exported -cdrom. ShareFS 3.x version
 updated to keep both versions in line.

Changed files:
  fslib.c._Free
  ShareFS.c.internet
  ShareFS.cmhg.mshare
  ShareFS.cmhg.msharep

---------------------------------------------------------------------------

Version: 2.34 Mon 20-Mar-95        Aideen McConville  (from PWain)

* sharefswindow command added.

Changed files:
  ShareFS.cmhg.mshare
  ShareFS.cmhg.msharep
  ShareFS.h.modface
  ShareFS.c.filer
  ShareFS.c.internet
  ShareFS.c.share
  ShareFS.c.sharep


AMcConville: (04-Apr-95): (No new version)

 ShareFS.Makefile: added rules for building fslib and rmalib

***************************************************************************
                      Black - RISC OS 3.60 (4.28) build
***************************************************************************


===============================================================================

===============================================
NFS::riscos_bl.$.Sources.NetWorking.AUN.AUNMsgs
===============================================

Version: 0.01 Tue 28-Feb-95        Aideen McConville             

Created. Fixes MED-04670

---------------------------------------------------------------------------

Version: 0.02 Mon 06-Mar-95        Aideen McConville             

* New Messages file for Internet (from KWelton)
  - Extra help messages (InetInfo, InetGateway)

Note: forgot to update version number of Module in Makefile
Included (as version 0.01) in Build 4.15

---------------------------------------------------------------------------

Version: 0.03 Fri 10-Mar-95        Aideen McConville  (from KWelton)

* BootNet.Messages  - removed comments lines (previously used for tokenisation)
* Freeway.Messages  - MED-04883 - improved error message
* Internet.Messages - on and off removed
* ShareFS.!Boot     - only iconsprites ShareFS:!Sprites on pre-3.60 machines

---------------------------------------------------------------------------

Version: 0.04 Fri 10-Mar-95        Aideen McConville  (from KWelton)

* Freeway.Messages  - FwStatusMsg and FWInvalSWI added
* Internet.Messages - HInCksum added, HInInfoSyn, HInGateSyn removed?

---------------------------------------------------------------------------

Version: 0.05 Fri 10-Mar-95        Aideen McConville             

* MED-04964 - Net.Messages - removed directed comments.

---------------------------------------------------------------------------

Version: 0.06 Mon 13-Mar-95        Aideen McConville             

* ShareFS.!Boot no longer rmreinets Internet (as advised by KWelton).

***************************************************************************
                      Black - RISC OS 3.60 (4.28) build
***************************************************************************


===============================================================================

===============================================
NFS::riscos_bl.$.Sources.NetWorking.AUN.BootNet
===============================================

Version: 0.85 Thu 01-Sep-94        Steve Cormie                  

* Added Messages file.
* Command help/syntax now looked up in BootNet.Messages.
* Help for *Configure BootNet now looked up in BootNet.Messages.

---------------------------------------------------------------------------

Version: 0.86 Mon 31-Oct-94        Steve Cormie                  

* Added directed comments to Messages file for message tokenisation.

---------------------------------------------------------------------------

Version: 0.87 Fri 10-Mar-95        Steve Cormie                  

* Fixed lookup of syntax message when *Configure BootNet is invalid.

---------------------------------------------------------------------------

Version: 0.88 Fri 10-Mar-95        Aideen McConville             

* Removed Resources.UK.Messages (now in AUNMsgs).
  Updated Makefile

***************************************************************************
                      Black - RISC OS 3.60 (4.28) build
***************************************************************************


===============================================================================

===============================================
NFS::riscos_bl.$.Sources.NetWorking.AUN.include
===============================================

Version: 0.01 Mon 06-Mar-95        Aideen McConville             

As used in Builds 4.15, 4.20

---------------------------------------------------------------------------

Version: 0.02 Mon 20-Mar-95        Aideen McConville  (from Kevin Welton)

* sys/h/dcistructs: Added details of new InternetStatus service call
                    DCI VERSION 4.02

***************************************************************************
                      Black - RISC OS 3.60 (4.28) build
***************************************************************************

.....................................
Changes since previous release follow
.....................................


===============================================================================

================================================
NFS::riscos_bl.$.Sources.NetWorking.AUN.Internet
================================================

Version: 3.55 Mon 06-Mar-95        Aideen McConville  (from KWelton)

First DCI4 version to be built on RISC OS

cmhg has been fixed, allowing the addition of extra *-commands: first
candidate is InetGateway.  Module version is now 3.55.

---------------------------------------------------------------------------

Version: 4.01 Tue 14-Mar-95        Aideen McConville  (from KWelton)

* InetChecksum command added.

Changed files:
  build.Makefile (removed -Fn (embedded fn names) from CFLAGS
  build.cmhg.InetHdr
  netinet.c.ip_input
  netinet.c.udp_usrreq
  riscos.c.module
  sys.c.socket

---------------------------------------------------------------------------

Version: 4.02 Mon 20-Mar-95        Aideen McConville   (from KWelton)

 * added InternetStatus service call
 * hacked the problem with panics in sleep()

Changed files:
  build.cmhg.InetHdr
  lib.c.unixenv
  netinet.c.in
  riscos.c.module

---------------------------------------------------------------------------

Version: 4.03 Fri 31-Mar-95        Aideen McConville   (from KWelton)

 * Callbacks are now handled slightly differently in a new scheme which allows
 * pending callbacks to be cancelled during module finalisation.
 * 
 * Debugging control is now initialised by reading some user bytes from
 * CMOS RAM.
 *
 * Module will now panic when a duplicate IP address is detected in
 * in_arpinput().

Changed files:
  build.c.svcprint
  build.cmhg.InetHdr
  build.h.debug
  build.h.module
  lib.c.unixenv
  net.c.if_module
  netinet.c.if_ether
  netinet.c.ip_input
  netinet.c.udp_usrreq
  riscos.c.globdata
  riscos.c.module
  riscos.c.setsoft
  sys.c.socket1

***************************************************************************
                      Black - RISC OS 3.60 (4.28) build
***************************************************************************


===============================================================================

================================================
NFS::riscos_bl.$.Sources.NetWorking.AUN.MManager
================================================

Version: 0.10 Mon 23-Jan-95        Aideen McConville             

From Kevin Welton.

---------------------------------------------------------------------------

Version: 0.11 Mon 06-Feb-95        Aideen McConville             

From Kevin Welton.

---------------------------------------------------------------------------

Version: 0.12 Mon 06-Mar-95        Aideen McConville             

From Kevin Welton (from Borris)

---------------------------------------------------------------------------

Version: 0.13 Tue 14-Mar-95        Aideen McConville             

From Kevin Welton - fixed bug (data being stored in code area?)

***************************************************************************
                      Black - RISC OS 3.60 (4.28) build
***************************************************************************


===============================================================================

===========================================
NFS::riscos_bl.$.Sources.NetWorking.AUN.Net
===========================================

Version: 6.03 Thu 08-Sep-94        Steve Cormie                  

Fixed MED-03709: command help and syntax now looked up in Net.Messages file.

---------------------------------------------------------------------------

Version: 6.04 Thu 08-Sep-94        Steve Cormie                  

Forgot to look up "AUN not configured" message.

---------------------------------------------------------------------------

Version: 6.05 Thu 13-Oct-94        Aideen McConville             

* Makefile: small ammendment to rom_link rule

---------------------------------------------------------------------------

Version: 6.06 Tue 18-Oct-94        Steve Cormie                  

* Fixed bug introduced in version 6.04 (initialisation sequence broken).

---------------------------------------------------------------------------

Version: 6.07 Mon 31-Oct-94        Steve Cormie                  

* Added directed comments to Messages file for message tokenisation.

---------------------------------------------------------------------------

Version: 6.08 Fri 06-Jan-95        Aideen McConville

* Updated sources from Jem Davies (CSD)   

Modified: #includes to be ANSI-compliant, other constructs to remove
compiler warnings, code to cope with DCI-4 and new mbuf structure. Added
changes from KRuttle's 6.03 version (different to RISC OS SrcFiler 6.03
version!). Begin changes to allow order of module initialisation to be less
restrictive. Changed to use new definitions from dcistructs.h.

---------------------------------------------------------------------------

Version: 6.09 Mon 13-Feb-95        Jem Davies                    

Allow compilation with stricter rules (-fah) and with -ff and -zps1 options
to reduce code size. Allow greater freedom of initialisation order including
reinitialisation of DCI driver and RMKilling of Econet. Fix bug in *Networks
when !Gateway present. Issue Service_ReAllocatePorts on reinitialisation on
callback. Added passing on of Econet_NetworkParameters SWI. Tightened
checking of BootNet$File on startup to see if Net module should start.

---------------------------------------------------------------------------

Version: 6.10 Tue 14-Feb-95        Jem Davies                    

Added special pleading to force reinitialisation when Internet starting
service call is received after Internet was thought to be present. Change
initialisation of Econet detection so that when NetFS is started by the
BootNet module before Callbacks have gone off, allowing the Net module to be
properly initialised, the NetFS initialisation does not fail. Tighten lock
checking in setting of callbacks. Add removal of any callbacks set on
finalisation. Tightened checking of Internet present to include check that
it has a device driver. 

---------------------------------------------------------------------------

Version: 6.11 Tue 28-Feb-95        Jem Davies                    

* Added back in, KRuttle's 6.03 change of wild card semantics which had fallen
  out as it was not in the RISC OS SrcFiler 6.03 version. Should fix fault
  reports MED-02789 and MED-04403.

* Removed OldCode.

* Tidied makefile.

* Changed !BootNet.!Run to RMEnsure AUNMsgs not NetMsgs.

* Pass out-of-range SWIs on to Econet module, if present, to maximise chance
  of a change to Econet module not requiring change to Net module.

* Corrected error in SWI despatch allowing a slightly out-of-range SWI to
  cause a branch through zero exception.

* Corrected error message produced for other out-of-range SWIs.

* Added returning of different values for peek machine type depending on what
  machine we are running on (fixes MED-03245).

AMcC:

* Removed Resources dir (now in AUNMsgs). Amended Makefile accordingly.

---------------------------------------------------------------------------

Version: 6.12 Fri 10-Mar-95        Jem Davies                    

Fixed error in syntax message in cmhg header file for non-Black version of
module. All module version numbers incremented accordingly (incl. h.module).

***************************************************************************
                      Black - RISC OS 3.60 (4.28) build
***************************************************************************

.....................................
Changes since previous release follow
.....................................


===============================================================================

=============================================
NFS::riscos_bl.$.Sources.NetWorking.BBCEconet
=============================================

Version: 0.16 Tue 28-Jun-94        Aideen McConville             

s.Module - no longer uses deprecated Hdr EcoMacros.

Identical to 0.15 except for version & date.

***************************************************************************
                      Black - RISC OS 3.60 (4.28) build
***************************************************************************


===============================================================================

=============================================
NFS::riscos_bl.$.Sources.NetWorking.Broadcast
=============================================


===============================================================================

==========================================
NFS::riscos_bl.$.Sources.NetWorking.Econet
==========================================


===============================================================================

=============================================
NFS::riscos_bl.$.Sources.NetWorking.NetStatus
=============================================


===============================================================================

=============================================
NFS::riscos_bl.$.Sources.NetWorking.NetUtils2
=============================================


===============================================================================

=========================================
NFS::riscos_bl.$.Sources.OS_Core.BootCmds
=========================================

Version: 1.02 Tue 15-Nov-94        JCoxhead                      

 * Various commands that should be in other places.

---------------------------------------------------------------------------

Version: 1.03 Wed 16-Nov-94        JCoxhead                      

 * Change to Makefile to build non-standalone version.

---------------------------------------------------------------------------

Version: 1.04 Wed 07-Dec-94        Aideen McConville             

 * Change to Makefile - copy Messages file to ...Resources2 for build
 * Updated cmhg header file so that version is up to date

---------------------------------------------------------------------------

Version: 1.05 Wed 07-Dec-94        Aideen McConville             

 * Makefile - changes for ROM-specific build

---------------------------------------------------------------------------

Version: 1.06 Mon 12-Dec-94        Aideen McConville             

 * asm.files: Updated MACRO ResourceFile to make compatible with
              latest ResGen

---------------------------------------------------------------------------

Version: 1.07 Wed 21-Dec-94        JCoxhead                      

 * Treat errors in IfThere a little differently: treat an OS_File error as
meaning "not there;" catch syntax errors from OS_CLI and convert them to
IfThere syntax errors.
 * Check with the file server before assuming that SafeLogon doesn't need to
do anything.
 * Reinstate international help.

---------------------------------------------------------------------------

Version: 1.09 Fri 27-Jan-95        JCoxhead                      

 * AddApp now canonicalises its argument, and expands wildcards in the leaf
name.

---------------------------------------------------------------------------

Version: 1.10 Fri 27-Jan-95        JCoxhead                      

 * Fixed bug in above (canonicalisation resolves wild cards, it seems, so
must be done "inside the loop").

---------------------------------------------------------------------------

Version: 1.11 Fri 17-Feb-95        JCoxhead                      

 * Change help message for Repeat (MED-04509)
 * Do Logon, not Net:Logon, if the user is not logged on to a file server. (MED-04491)
 * Fixed bug in Repeat: use of uninitialised variable. (MED-04245)
 * Check osargs_read_temporary_fs() == osfscontrol_FS_NUMBER_NETFS in
SafeLogon. (MED-04658)

---------------------------------------------------------------------------

Version: 1.12 Mon 27-Feb-95        JCoxhead                      

 * Strip trailing spaces in IfThere.

---------------------------------------------------------------------------

Version: 1.13 Thu 02-Mar-95        JCoxhead                      

 * Fixed typo in space-stripping code.

---------------------------------------------------------------------------

Version: 1.14 Thu 09-Mar-95        JCoxhead                      

 * Changed max_args for SafeLogon from 3 to 255, else NFS:Logon can give rise
to syntax errors.

***************************************************************************
                      Black - RISC OS 3.60 (4.28) build
***************************************************************************


===============================================================================

================================================
NFS::riscos_bl.$.Sources.OS_Core.Desktop.Desktop
================================================

Version: 2.47 Fri 28-Oct-94        Steve Cormie                  

* Added directed comments to Messages file for message tokenisation.
* Moved command help/syntax from Global.Messages to Messages file.

---------------------------------------------------------------------------

Version: 2.48 Thu 03-Nov-94        Steve Cormie                  

* Desktop start up now handles system variable Boot$Error.

---------------------------------------------------------------------------

Version: 2.49 Mon 05-Dec-94        Steve Cormie                  

* Fixed MED-03995: Path name for international command help/syntax file must
  be word aligned.
* Fix for MED-03865: "Initialising . . ." in Messages file changed to
  "Initialising...".

---------------------------------------------------------------------------

Version: 2.50 Tue 07-Feb-95        Aideen McConville             

* Fixed MED-04428: Welcome screen now 1995 (Messages)

***************************************************************************
                      Black - RISC OS 3.60 (4.28) build
***************************************************************************


===============================================================================

===================================================
NFS::riscos_bl.$.Sources.OS_Core.Desktop.DragASprit
===================================================

Version: 0.11 Mon 26-Sep-94        Alan Glover                   

Fix bug MED-02966. Force incoming drag boxes to be exact multiples of
the current osunits per pixel factor. Prevents effects such as the
trail when dragging !Style's sprite in 1280 x 480 screen modes.

***************************************************************************
                      Black - RISC OS 3.60 (4.28) build
***************************************************************************


===============================================================================

==================================================
NFS::riscos_bl.$.Sources.OS_Core.Desktop.DragAnObj
==================================================

Version: 0.02 Mon 28-Nov-94        Aideen McConville             

* Added Makefile (Black build compatible)
* Added hdr.DragAnObj (defines SWIs in standard format)

***************************************************************************
                      Black - RISC OS 3.60 (4.28) build
***************************************************************************


===============================================================================

==============================================
NFS::riscos_bl.$.Sources.OS_Core.Desktop.Filer
==============================================

Version: 1.79 Fri 09-Sep-94        Steve Cormie                  

* Fixed MED-03703: various strings now looked up in messages file.

---------------------------------------------------------------------------

Version: 1.80 Thu 29-Sep-94        Steve Cormie                  

* Fixed MED-03712: CPM code was using ms_writeable_dirname as temporary
  workspace, setting it to a null string when finished. This caused the
  new directory writable icon to be cleared if being typed into when the
  directory viewer was updated.

---------------------------------------------------------------------------

Version: 1.81 Tue 11-Oct-94        Aideen McConville             

* Moved Version file to top level for easy access (and consistency with other
  components).

---------------------------------------------------------------------------

Version: 1.82 Fri 28-Oct-94        Steve Cormie                  

* Added directed comments to Messages file for message tokenisation.
* Moved command help/syntax from Global.Messages to Messages file.

---------------------------------------------------------------------------

Version: 1.83 Mon 07-Nov-94        Alan Glover                   

* Incorporate a bugfix from NK. Fixes problems with wrong directory viewer
  being closed. s.delviews & s.modstuff.
  
---------------------------------------------------------------------------

Version: 1.84 Tue 22-Nov-94        Steve Cormie                  

* Fixed MED-00060: now uses Territory Manager lower case table rather than
  one built in. Also look up error box title text for errors returned by the
  Window manager.

---------------------------------------------------------------------------

Version: 1.85 Thu 15-Dec-94        Steve Cormie                  

* Fixed the fix in version 1.84: allow terrory manager SWI to fail during
  module initialisation (Service_TerritoryStarted puts things straight).

***************************************************************************
                      Black - RISC OS 3.60 (4.28) build
***************************************************************************


===============================================================================

=================================================
NFS::riscos_bl.$.Sources.OS_Core.Desktop.FilerAct
=================================================

Version: 0.33 Mon 25-Jul-94        Aideen McConville             

* c.actionwind now includes swis.h rather than arthur.h !!
* Makefile updates

  No functional change.

---------------------------------------------------------------------------

Version: 0.34 Fri 19-Aug-94        Alan Glover                   

* c.actionwind: fix bug MED-03572 - quitting filer action from the Task
  Manager would shut down the whole desktop
  
  
---------------------------------------------------------------------------

Version: 0.35 Tue 23-Aug-94        Steve Cormie                  

* Now looks up command help/syntax in Global.Messages file.
* Now looks up text for "<many>" and "<nothing>" in Messages file.

---------------------------------------------------------------------------

Version: 0.36 Tue 30-Aug-94        Aideen McConville             

* Makefile - added rom_link rule.

---------------------------------------------------------------------------

Version: 0.37 Tue 04-Oct-94        Steve Cormie                  

* Fixed MED-03795: Restart button was badly broken if no memory left when
  operation was restarted.

---------------------------------------------------------------------------

Version: 0.38 Tue 11-Oct-94        Aideen McConville             

* Slight modifications to Makefile for final ROM linking.

---------------------------------------------------------------------------

Version: 0.39 Mon 31-Oct-94        Steve Cormie                  

* Added directed comments to Messages file for message tokenisation.
* Moved command help/syntax from Global.Messages to Messages file.

***************************************************************************
                      Black - RISC OS 3.60 (4.28) build
***************************************************************************


===============================================================================

==================================================
NFS::riscos_bl.$.Sources.OS_Core.Desktop.FilerSWIs
==================================================


===============================================================================

===============================================
NFS::riscos_bl.$.Sources.OS_Core.Desktop.Filter
===============================================

Version: 0.10 Fri 09-Sep-94        Steve Cormie                  

* Fixed MED-03707: now fully internationalised.

---------------------------------------------------------------------------

Version: 0.11 Fri 28-Oct-94        Steve Cormie                  

* Added directed comments to Messages file for message tokenisation.
* Moved command help/syntax from Global.Messages to Messages file.

***************************************************************************
                      Black - RISC OS 3.60 (4.28) build
***************************************************************************


===============================================================================

=============================================
NFS::riscos_bl.$.Sources.OS_Core.Desktop.Free
=============================================

Version: 0.26 Fri 28-Oct-94        Steve Cormie                  

* Added directed comments to Messages file for message tokenisation.
* Moved command help/syntax from Global.Messages to Messages file.

---------------------------------------------------------------------------

Version: 0.27 Thu 10-Nov-94        Alan Glover                   

* Add support for filing systems that support sector addressing, and code
  it for ADFS and SCSI (both fall back if the FS isn't capable).
* Add rounding, applied when all three figures are in the same units,
  and the error is 1 unit.
* Prevent any bar exceeding the length of the bar icon.
  
---------------------------------------------------------------------------

Version: 0.28 Thu 17-Nov-94        Alan Glover                   

* Fix poor SCSIFS coding - it doesn't return SWI not known for SCSIFS_
  FreeSpace64, which was upsetting the autosensing here. It now checks
  registers before and after the call as well.
  
---------------------------------------------------------------------------

Version: 0.29 Mon 05-Dec-94        Alan Glover                   

* Fix register corruption around the _FreeSpace64 calls in s.adfs and
  s.scsi
  
---------------------------------------------------------------------------

Version: 0.30 Thu 26-Jan-95        Alan Glover                   

* Fix MED-04392 & MED-04338:
  SCSIFS free now works
  Behaviour when _FreeSpace64 returns an error changed - now tries FreeSpace

***************************************************************************
                      Black - RISC OS 3.60 (4.28) build
***************************************************************************


---------------------------------------------------------------------------

.....................................
Changes since previous release follow
.....................................


===============================================================================

=================================================
NFS::riscos_bl.$.Sources.OS_Core.Desktop.Pinboard
=================================================

Version: 0.62 Tue 30-Aug-94        Steve Cormie                  

* Fixed MED-03680: saving pinboard to locked file/disc left file open.
* Also fixed bug where dragging save file to another application eg. !Edit
  resulted in a file of type Data rather than Obey.
* Added small section of code to provide support for iconised windows to be
  picked up as soon as they are iconised (so they don't get lost under lots of
  windows). Currently conditioned out by drag_on_iconise.

---------------------------------------------------------------------------

Version: 0.63 Tue 06-Sep-94        Steve Cormie                  

* Thought I might as well add my changes to allow iconisation to the iconbar
  (currently conditioned out by iconise_to_iconbar so no real changes to
  module built).

---------------------------------------------------------------------------

Version: 0.64 Mon 12-Sep-94        Steve Cormie                  

* Having stated above that iconise_to_iconbar was set to false I actually left
  it set to true. Now set to false + forgot to update version in template too.

---------------------------------------------------------------------------

Version: 0.65 Fri 28-Oct-94        Steve Cormie                  

* Fixed MED-02255: strange behaviour on pinboard save.
* Added directed comments to Messages file for message tokenisation.
* Moved command help/syntax from Global.Messages to Messages file.

---------------------------------------------------------------------------

Version: 0.66 Mon 09-Jan-95        Alan Glover                   

* Fixed MED-04197: use wide translation tables to render 256grey sprites
  correctly in 16/32bpp.
  
***************************************************************************
                      Black - RISC OS 3.60 (4.28) build
***************************************************************************


===============================================================================

=================================================
NFS::riscos_bl.$.Sources.OS_Core.Desktop.ShellCLI
=================================================

Version: 0.27 Thu 13-Oct-94        Aideen McConville             

* hdr.Shell - Created - lists SWIs (used to generate swis.h)
  Makefile  - Updated to export the above.

---------------------------------------------------------------------------

Version: 0.28 Fri 28-Oct-94        Steve Cormie                  

* Added directed comments to Messages file for message tokenisation.
* Moved command help/syntax from Global.Messages to Messages file.

***************************************************************************
                      Black - RISC OS 3.60 (4.28) build
***************************************************************************


===============================================================================

=================================================
NFS::riscos_bl.$.Sources.OS_Core.Desktop.Switcher
=================================================

Version: 0.89 Thu 21-Jul-94        Alan Glover

* fix bug MED-03056: avoid infinity if a task dies whilst dragging a bar

---------------------------------------------------------------------------

Version: 0.90 Tue 23-Aug-94        Steve Cormie                  

* Fix for MED-00079: now looks up command help/syntax in messages file.

---------------------------------------------------------------------------

Version: 0.91 Tue 18-Oct-94        Aideen McConville             

* Fixed MED-03689: now looks for Templates in 'Templates'.
                   (s.Switcher, Makefile)

---------------------------------------------------------------------------

Version: 0.92 Fri 28-Oct-94        Steve Cormie                  

* Added directed comments to Messages file for message tokenisation.
* Moved command help/syntax from Global.Messages to Messages file.

---------------------------------------------------------------------------

Version: 0.93 Mon 05-Dec-94        Steve Cormie                  

* Fixed MED-03815: Clicking on "Desktop boot" menu item no longer saves a
  desktop boot file. This must now be done from the saveas dialogue box.
* Fix for MED-03865: "Dynamic Areas:" in tasks window changed to "Dynamic
  areas:".

---------------------------------------------------------------------------

Version: 0.94 Wed 11-Jan-95        Steve Cormie                  

* Fixed MED-04317: Added space at the start of "Dynamic areas:" and aligned
  the start of section heading icons.

---------------------------------------------------------------------------

Version: 0.95 Tue 07-Feb-95        Aideen McConville             

* Fixed MED-04428: 'About the Operating System' info box now (C) 1995

***************************************************************************
                      Black - RISC OS 3.60 (4.28) build
***************************************************************************


---------------------------------------------------------------------------

.....................................
Changes since previous release follow
.....................................


===============================================================================

===================================================
NFS::riscos_bl.$.Sources.OS_Core.Desktop.TaskWindow
===================================================

Version: 0.50 Thu 23-Jun-94        Alan Glover

Fix bug MED-03127 - closing a task window caused file handle 229 to be
closed.

---------------------------------------------------------------------------

Version: 0.51 Tue 02-Aug-94        Aideen McConville             

GET correct workspace values from Hdr:PublicWS (in s.Redirect)

---------------------------------------------------------------------------

Version: 0.52 Fri 09-Sep-94        Steve Cormie                  

Fixed MED-03706: now looks up 2 more errors (but the should never occur).

---------------------------------------------------------------------------

Version: 0.53 Fri 28-Oct-94        Steve Cormie                  

* Added directed comments to Messages file for message tokenisation.
* Moved command help/syntax from Global.Messages to Messages file.

***************************************************************************
                      Black - RISC OS 3.60 (4.28) build
***************************************************************************


===============================================================================

=============================================
NFS::riscos_bl.$.Sources.OS_Core.Desktop.Wimp
=============================================

Version: 3.51 Thu 21-Apr-94        Richard Manby

* added power saving code for Stork

---------------------------------------------------------------------------

Version: 3.52 Tue 02-Aug-94        Aideen McConville             

* Updated hdr.Wimp (from Neil Kelleher)
  Contains new reason codes.

---------------------------------------------------------------------------

Version: 3.53 Thu 18-Aug-94        Steve Cormie                  

* Fixed MED-03541: BadParameters token (which did not appear in any Messages
  file) replaced with BadParm.
* Fixed MED-03390: button texts Quit, Continue and OK (for error dialogue)
  were not looked up in Messages file.

---------------------------------------------------------------------------

Version: 3.54 Tue 13-Sep-94        Steve Cormie                  

* Fixed MED-03700: various messages now looked up.

---------------------------------------------------------------------------

Version: 3.55 Tue 27-Sep-94        Steve Cormie                  

* Fixed MED-03711 and MED-01949: long error messages were being copied over
  workspace causing data aborts.
* Fixed MED-03346: convert ROM patch to source fix, prevent Wimp accessing
  info on taskhandle 0.
* Fixed MED-03135: convert WimpUtils module patch into source fix, workspace
  pointer corrupted before attempting to read from workspace.

---------------------------------------------------------------------------

Version: 3.56 Wed 28-Sep-94        Alan Glover                   

* Fixed MED-03674: could make windows disappear because they were being
  opened behind an iconised window. (s.wimp03)
* Fixed MED-03233: change name of information sprite (should be information
  was info1) (sprites)
* Fixed MED-03145: key names were getting right justified if they appeared
  in writable menu icons. (s.wimp05)
* Fixed MED-03087: finally, really, at last fix nager:sprites22 - change the
  buffer in which the command to load wimp sprites from away from the error
  buffer! (s.wimp01)
    
---------------------------------------------------------------------------

Version: 3.57 Tue 18-Oct-94        Aideen McConville             

* Fixed MED-03691: Wimp 3.57 onwards will expect its Templates to be in
                   'Templates' (s.Iconbar, s.Wimp08, Makefile)

* Also corrected Makefile which was copying 2D tools to Resources.

---------------------------------------------------------------------------

Version: 3.58 Thu 20-Oct-94        Alan Glover                   

* Fixed MED-03800: Avoid an interaction whereby the wimp would obtain a
                   translation table from ColourTrans, and then discard
                   it before it got around to using it. (Affected 16/32bpp
                   sprites in filer windows in 256 (and less) colour modes)
                   (s.wimp01, s.wimp04)

---------------------------------------------------------------------------

Version: 3.59 Sat 29-Oct-94        Aideen McConville             

* Added sprites from !Draw (DXF) and !Printers to Wimp Sprites.
  Also updated Sprites22 and Sprites23 with !Printer sprites.

* Moved Sprites, Sprites22, Sprites23, Tools and Tools3d to UK directory.
  (updated Makefile and s.wimp08 accordingly).

---------------------------------------------------------------------------

Version: 3.60 Mon 31-Oct-94        Steve Cormie                  

* Added directed comments to Messages file for message tokenisation.
* Moved command help/syntax from Global.Messages to Messages file.

---------------------------------------------------------------------------

Version: 3.61 Wed 21-Dec-94        Steve Cormie                  

* Fixed MED-03323: Don't fill 0 sized icons.
* Fixed MED-03865: Changed "Wimp Sprite Pool" to "Wimp sprite pool".

---------------------------------------------------------------------------

Version: 3.62 Mon 16-Jan-95        Aideen McConville             

* Fixed MED-04107: Added JPEG filetype sprite (c85) to Resources.UK.Sprites[22]
                   Also added Resource filetype (fae).

---------------------------------------------------------------------------

Version: 3.63 Wed 18-Jan-95        Steve Cormie                  

* Implemented correct fix for MED-03674 (also fixes MED-04376 which resulted
  from the fix in version 3.56).

---------------------------------------------------------------------------

Version: 3.64 Thu 16-Feb-95        Alan Glover                   

* Looks like 28 Sep '94 was a **bad** day for coding. Fix bug MED-04476,
  which arose from the previous fix for MED-03145. Symptom was Edit>Create>Text
  gave a window without input focus. This was because the caret had got stuck
  in the menu structure!
  
  
---------------------------------------------------------------------------

Version: 3.65 Fri 24-Feb-95        Steve Cormie                  

* Fix for MED-04690: Added sprites file_be8, small_be8 and file_ff0 (were in
  CDFSFiler sprite files).

---------------------------------------------------------------------------

Version: 3.66 Mon 06-Mar-95        Aideen McConville             

* Fixed MED-04771: Shared disc sprites included in Wimp.Sprites[22]
                   AUNMsgs also updated (0.03)

***************************************************************************
                      Black - RISC OS 3.60 (4.28) build
***************************************************************************


===============================================================================

==================================================
NFS::riscos_bl.$.Sources.OS_Core.Desktop.WimpUtils
==================================================


===============================================================================

=======================================
NFS::riscos_bl.$.Sources.OS_Core.FSLock
=======================================

Version: 1.13 Tue 23-Aug-94        Steve Cormie                  

* Fix for MED-00079: now looks up command help/syntax in Global.Messages file.

---------------------------------------------------------------------------

Version: 1.14 Wed 12-Oct-94        Aideen McConville             

* Created hdr.FSLock: lists SWIs (needed for swis.h generation)
  Updated Makefile to export the above.

---------------------------------------------------------------------------

Version: 1.15 Fri 28-Oct-94        Steve Cormie                  

* Added directed comments to Messages file for message tokenisation.
* Moved command help/syntax from Global.Messages to Messages file.

---------------------------------------------------------------------------

Version: 1.16 Fri 02-Dec-94        Bruce Cockburn                

* Included the names of all three SWIs, they were commented out by
  an IF develope% construct.
  Noted by Keven Cook on comp.sys.acorn.tech 29-Nov-94.

---------------------------------------------------------------------------

Version: 1.17 Tue 06-Dec-94        Aideen McConville             

* Updated Version (in FSLockSrc)

***************************************************************************
                      Black - RISC OS 3.60 (4.28) build
***************************************************************************


===============================================================================

==================================================
NFS::riscos_bl.$.Sources.OS_Core.FileSys.ADFS.ADFS
==================================================

Version: 2.92 Tue 09-Aug-94        Richard Manby                 

The drive state machine was missing two FlpFDCcontrol calls (1 for power up,
1 for power down), shown by use of ADFS with Stork Portable module. A4 portable
doesn't actually do ANY floppy power saving, despite what the comments say
in the A4 portable module sources!.

---------------------------------------------------------------------------

Version: 2.93 Sat 13-Aug-94        Aideen McConville             

Added Ver.Morris (same as Ver.Jordan).

---------------------------------------------------------------------------

Version: 2.94 Thu 25-Aug-94        sproven  (Simon Proven)       

Added support for IDE LBA (Logical Block Address) mode with WinIDESetPhysAddr.
If the appropriate flag is set in the hardware dependant field in the disc
record, LBA is used.  WinIDESetPhysAddrCHS will force CHS mode - some
commands *must* use CHS.


---------------------------------------------------------------------------

Version: 2.95 Mon 05-Sep-94        sproven                       

Fixed problem with Conner CFA drives - ADFS disabled IRQ from drive
during a transfer using -IEN on the IDE Digital Output Register (DOR).
This is incorrect as it tri-states the IRQ line, causing some drives
to generate spurious IRQs during transfer (hanging machine).  ADFS now 
uses correct method (disables IRQ using IOMD mask register B).  Tested 
on CFA540 and CFS210, no problems noticed.


---------------------------------------------------------------------------

Version: 2.96 Wed 12-Oct-94        Aideen McConville             

* hdr.ADFS: Added missing SWI name - ECCSAndRetries

---------------------------------------------------------------------------

Version: 2.97 Sat 29-Oct-94        sproven                       

Added IDE lock SWI - ADFS_LockIDE.  Fixed problem with LBA support
with BigDisc turned on.


---------------------------------------------------------------------------

Version: 2.98 Tue 01-Nov-94        sproven                       

Checked back in to allow other changes to be made.  No new changes.

---------------------------------------------------------------------------

Version: 2.99 Tue 01-Nov-94        Steve Cormie                  

* Added directed comments to Messages file for message tokenisation.
* Moved command help/syntax from Global.Messages to Messages file.

---------------------------------------------------------------------------

Version: 3.00 Thu 01-Dec-94        sproven                       

Fixed problem with ADFSBuffers caused by earlier change to ADFS.

---------------------------------------------------------------------------

Version: 3.01 Thu 01-Dec-94        sproven                       

Restored ADFS_SectorDiscOp and ADFS_FreeSpace64 which didn't
get checked in.

---------------------------------------------------------------------------

Version: 3.02 Thu 01-Dec-94        sproven                       

Fixed missing FreeSpace64 SWI table entry.

---------------------------------------------------------------------------

Version: 3.03 Fri 02-Dec-94        sproven                       

ADFSbuffers bug now hopefully fully sorted - tried various drives.

---------------------------------------------------------------------------

Version: 3.04 Fri 02-Dec-94        sproven                       

Fixed version numbering

---------------------------------------------------------------------------

Version: 3.05 Tue 06-Dec-94        sproven                       

Converted doc.ide.lba from Impression Style document to
text file for people who don't have Impression Style or
Publisher.

---------------------------------------------------------------------------

Version: 3.06 Thu 08-Dec-94        sproven                       

Fixed LBA support.  Modified IRQHandler to correctly update InIRQ
flag.  Removed some spurious branches around short sections of
code.  Removed spurious WinIDEStartTransferInIRQ routine.  Added
assertion in ADFS11 to prevent ST506 driver being assembled with
BigDisc ON.  Corrected debug output in ADFS12 to show init flag
instead of incorrectly showing LBA flag.

---------------------------------------------------------------------------

Version: 3.07 Fri 09-Dec-94        sproven                       

Changed ADFS13 - WinIDEAdjustStatus supports extended
process error blocks.

---------------------------------------------------------------------------

Version: 3.08 Fri 09-Dec-94        sproven                       

Checked in StaticsIDE which was not updated in 3.07

---------------------------------------------------------------------------

Version: 3.09 Mon 16-Jan-95        sproven                       

* s.adfs14, s.adfs00, s.mformat, s.staticside, adfs15, s.adfs13 -
DiscSize2 support added so discs >4G bytes should work with adfs

---------------------------------------------------------------------------

Version: 3.10 Sun 12-Mar-95        sproven                       

* Removed coloured debug macro usage (non-standard macros).

* Fixed data abort, sometimes on locked ide bus.  (was loading
  previous discop reason code instead of using current, in
  WinLowLevelIDE if controller lock failed).

Changed files: s.ADFS20, s.ADFS14, s.ADFS13, s.ADFS12

---------------------------------------------------------------------------

Version: 3.11 Tue 14-Mar-95        sproven                       

Added support for MiscOp 7, for ATAPI problem.

---------------------------------------------------------------------------

Version: 3.12 Wed 15-Mar-95        sproven                       

Changed bit used for BigDiscSupport

---------------------------------------------------------------------------

Version: 3.13 Fri 24-Mar-95        sproven                       

Prevented unlocking of controller if lock failed in
first place. (MED-05030)

Changed files: s.Adfs13
               s.Adfs13

***************************************************************************
                      Black - RISC OS 3.60 (4.28) build
***************************************************************************

.....................................
Changes since previous release follow
.....................................


===============================================================================

=======================================================
NFS::riscos_bl.$.Sources.OS_Core.FileSys.ADFS.ADFSFiler
=======================================================

Version: 0.71 Fri 19-Aug-94        Steve Cormie                  

* Fix for MED-00079: now looks up command help/syntax messages.

---------------------------------------------------------------------------

Version: 0.72 Wed 31-Aug-94        Steve Cormie                  

* Fixed MED-01314: can no longer back up to discs with known defects.

---------------------------------------------------------------------------

Version: 0.73 Fri 28-Oct-94        Steve Cormie                  

* Added directed comments to Messages file for message tokenisation.
* Moved command help/syntax from Global.Messages to Messages file.

---------------------------------------------------------------------------

Version: 0.74 Thu 10-Nov-94        Alan Glover                   

* Change verify to understand and cope with sector addressing, and all that
  entails (two word defect entries etc).

---------------------------------------------------------------------------

Version: 0.75 Mon 12-Dec-94        Alan Glover                   

* s.format. Add error detection on the read defect list call - the assumption
  that the defect list couldn't be larger than the space to hold it is
  erroneous - on E format discs a 'defect list' is made by parsing the map
  and can exceed the space available
  
---------------------------------------------------------------------------

Version: 0.76 Tue 10-Jan-95        sproven                       

Fixed ADFSfiler (s.ADFSFiler, GetMediaName) so that two
hard discs of same name did not result in killing
wimp.  (MED-4218)

---------------------------------------------------------------------------

Version: 0.77 Wed 11-Jan-95        Alan Glover                   

* s.format. Fix MED-04326. Defects reported when ADFS_SectorDiscOp was being
used were one sector early - caused by a mistake in the defect address
determination routine.

---------------------------------------------------------------------------

Version: 0.78 Fri 13-Jan-95        sproven                       

s.ADFSFiler.  Attempt to warn user of problems caused by having discs
of same name.  Error reported if Ambiguous disc name error occurs
when attempting to find the name of a disc for the icon bar icon.
(new function GetMediaName_warn provided for this purpose).

---------------------------------------------------------------------------

Version: 0.79 Mon 30-Jan-95        Alan Glover                   

* s.format bug fixing session.

  MED-04395. Errors from the OS_FScontrol to read the defect list now
  prevent the progress window from appearing.
  
  MED-04381. Differing (and silly in my case) addresses reported for defects.
  (note, also requires fixes incorporated in Filecore 2.80)
  
  MED-04352. Couldn't verify DOSFS discs (DOSFS doesn't support
  sector addressing). ADFSFiler now detects DOSFS discs and
  uses byte addressing.
   
---------------------------------------------------------------------------

Version: 0.80 Tue 28-Feb-95        Alan Glover                   

s.ADFSFiler. Fix MED-04731. If the menus were rebuilt in response to a 
service call at an inopportune moment the drive number changed from
:4 (say) to :n.

---------------------------------------------------------------------------

Version: 0.81 Tue 28-Feb-95        sproven                       

Removed spurious . from end of message for two hard discs
of same name.

Files changed: resources.uk.messages, version

---------------------------------------------------------------------------

Version: 0.82 Fri 03-Mar-95        Steve Cormie                  

* Fixed MED-04795 and MED-04806: Bugs in Format/Verify template.

---------------------------------------------------------------------------

Version: 0.83 Thu 09-Mar-95        sproven                       

Istalled for AGlover: 

Fix MED-04772 - make interactive help on Share menu items more
accurate and better worded.

And also removed spurious store of drive number
from GetMediaName_warn.


***************************************************************************
                      Black - RISC OS 3.60 (4.28) build
***************************************************************************


===============================================================================

==================================================
NFS::riscos_bl.$.Sources.OS_Core.FileSys.CDFS.CDFS
==================================================

Version: 2.21 Wed 16-Nov-94        Aideen McConville             

Sources from the Drawing Office.

---------------------------------------------------------------------------

Version: 2.22 Mon 28-Nov-94        Steve Cormie                  

* Fixed MED-03890: Removed redundant messages and look up those which weren't.

---------------------------------------------------------------------------

Version: 2.23 Tue 13-Dec-94        Steve Cormie                  

* Improved debugging only.

---------------------------------------------------------------------------

Version: 2.24 Mon 19-Dec-94        Steve Cormie                  

* Fixed MED-03912: No longer initialises is configured drives = 0.
* Look up "Cannot get enough space" error in Messages file.

---------------------------------------------------------------------------

Version: 2.25 Tue 03-Jan-95        Aideen McConville             

* Created hdr.CDROMFS (standard SWI definition file) and updated Makefile
  to export it.

---------------------------------------------------------------------------

Version: 2.26 Fri 27-Jan-95        Steve Cormie                  

* Fixed MED-04449: Forgot to mask out buffer size bits when checking for
  configured CD ROM drives.

---------------------------------------------------------------------------

Version: 2.27 Wed 01-Feb-95        Steve Cormie                  

* Fixed MED-04478: Now handles Service_FSRedeclare so that CDFS is
  re-registered when FileSwitch is re-initialised.
* Fixed MED-04487: *Play 1 n, where n >= the number of drives fitted now
  returns an error rather than using the current drive.

---------------------------------------------------------------------------

.....................................
Changes since previous release follow
.....................................

Version: 2.28 Tue 28-Feb-95        Steve Cormie                  

* Regressed version made from version 2.27 with changes from version 2.32
  onwards ie. all Eesox changes from version 2.30 removed.

***************************************************************************
                      Black - RISC OS 3.60 (4.28) build
***************************************************************************


===============================================================================

=======================================================
NFS::riscos_bl.$.Sources.OS_Core.FileSys.CDFS.CDFSFiler
=======================================================

Version: 2.20 Wed 16-Nov-94        Aideen McConville             

Sources from the Drawing Office.

---------------------------------------------------------------------------

Version: 2.21 Mon 28-Nov-94        Steve Cormie                  

* Fixed MED-03891: Command help and syntax now looked up in CDFSFiler
  messages file. Added message tokenisation directives to messages file.

---------------------------------------------------------------------------

Version: 2.22 Mon 12-Dec-94        Steve Cormie                  

* Fixed MED-03996: Service call handler was not handling Service_StartedFiler.

---------------------------------------------------------------------------

Version: 2.23 Tue 13-Dec-94        Steve Cormie                  

* Fixed MED-04127: Wrong error being reported if drive not found.

---------------------------------------------------------------------------

Version: 2.24 Mon 19-Dec-94        Steve Cormie                  

* Fixed MED-03912: No longer starts up as a task if CDFS not present or
  configured drives = 0.

---------------------------------------------------------------------------

Version: 2.25 Mon 19-Dec-94        Steve Cormie                  

* Try to kick CDFSDriver and CDFS into life if not there on
  Service_StartFiler.

---------------------------------------------------------------------------

Version: 2.26 Tue 10-Jan-95        Steve Cormie                  

* Fix register corruption in Service_StartFiler handler.

---------------------------------------------------------------------------

Version: 2.27 Thu 19-Jan-95        Aideen McConville   (sent to Mark Watson)          

* Merged in changes from Starling project (Fabio Balloni)
  - Allows disc sharing.

* Use standard hdrs CDROM and CDROMFS for SWI definitions
  - removed local hdrs: hdr.CDFS and hdr.CDFSDrv

Changed files:
    Makefile (install Templates file in Resources)
    Resources.UK.Messages
    Resources.UK.Templates (new file)
    s.CDFSFiler

---------------------------------------------------------------------------

Version: 2.28 Tue 07-Feb-95        Steve Cormie                  

* Merged in sources from EESOX.
  (Version id was 2.31 29-Jan-1995, based on version 2.20 above)

                      ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
----------------------------------------------------------------------------------------
2.30 13-Jul-94  MEW  - Added detection for CD-I discs and hourglass when icon clicked on
----------------------------------------------------------------------------------------
2.31 25-Jan-95  MEW  - Added volume control stuff
----------------------------------------------------------------------------------------

                      ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
Changed files:
    hdr.Icons (new file)
    Resources.UK.Messages
    Resources.UK.Template
    s.CDFSFiler

---------------------------------------------------------------------------

Version: 2.32 Tue 07-Feb-95        Aideen McConville             

* Updated Version number to avoid clashes with released Eesox versions.

---------------------------------------------------------------------------

Version: 2.33 Wed 08-Feb-95        Steve Cormie                  

* Reorganised icon bar menu to match User Guide.

---------------------------------------------------------------------------

Version: 2.34 Fri 10-Feb-95        Aideen McConville             

* Uses Hdr:CDFS (renamed from Hdr:CDROMFS)

---------------------------------------------------------------------------

Version: 2.35 Mon 13-Feb-95        Steve Cormie                  

* Fixed MED-04506: Now reports error messages correctly (broken in 2.23).
* Fixed MED-04594: Volume window now style guide compliant (I think).
* Fixed MED-04602: Code for showing share window reported spurious file handle
  error when no hardware present and filled in the boxes with rubbish when the
  drive was empty.

---------------------------------------------------------------------------

Version: 2.36 Fri 24-Feb-95        Steve Cormie                  

* Fixed MED-04687: Share window template made style guide compliant.
                   Share window gains caret when opened.
                   Key_Pressed event handled for Share window.
* Fixed MED-04686: Configure buffers menu items left aligned.
* Fixed MED-04690: PhotoCD sprites moved into Wimp sprite files.
* Fixed bug in GetMediaName_nochecks which returned ":0" as the disc name
  instead of the assumed "CDFS::0" when the drive was empty.
* Preserve drive number in menu title when menus are recreated because of
  Service_MessageFileClosed (eliminates errors caused by ShareFS).
* No longer tries to initialise CDFSDriver and CDFS if CDFS SWI fails when
  trying to start up as a task.

---------------------------------------------------------------------------

Mon 27-Feb-95 AMcConville: Makefile updated to copy Resources to CDFSRes

---------------------------------------------------------------------------

Version: 2.37 Tue 28-Feb-95        Steve Cormie                  

* Conditioned out the CD-I support code (icon changing).

---------------------------------------------------------------------------

Version: 2.38 Fri 10-Mar-95        Steve Cormie                  

* Stop Wimp_Poll handler dropping into KeyPressed event when any unknown
  event is returned.

---------------------------------------------------------------------------

Version: 2.39 Wed 22-Mar-95        Steve Cormie                  

* Fixed MED-04687: Caret being set off the end of the writable icon in
  share box.

---------------------------------------------------------------------------

.....................................
Changes since previous release follow
.....................................

Version: 2.40 Wed 12-Apr-95        Steve Cormie                  

* Fixed MED-05271: Code which fills in writable icon was not bound by icon
  length and was not terminated when the text overflowed into validation
  data.

***************************************************************************
                      Black - RISC OS 3.60 (4.28) build
***************************************************************************


===============================================================================

=====================================================
NFS::riscos_bl.$.Sources.OS_Core.FileSys.CDFS.CDFSRes
=====================================================

Version: 2.32 Tue 28-Feb-95        Aideen McConville             

Created. Fixes MED-04717

---------------------------------------------------------------------------

Version: 2.33 Mon 06-Mar-95        Steve Cormie                  

* Fixed MED-04380: CDFSFiler volume window had Set/Cancel buttons numbered
  the wrong way round.

---------------------------------------------------------------------------

Version: 2.34 Fri 10-Mar-95        Steve Cormie                  

* Fixed MED-04936: Share box title bar now goes cream on gaining input focus.
* Fixed MED-04687: Sorted out icon validation strings.

AMcC (12-Mar-95): Small correction to Makefile - module was being created
                  with name 'CDFSRes' rather than 'CDFSResources'.

No new version.

***************************************************************************
                      Black - RISC OS 3.60 (4.28) build
***************************************************************************


===============================================================================

=================================================
NFS::riscos_bl.$.Sources.OS_Core.FileSys.FileCore
=================================================

Version: 2.52 Tue 06-Sep-94        Steve Cormie                  

* Fixed MED-00009, previous fix was buggy in that it copied the terminating
  character of the disc name for Service_CloseFile which subsequently failed.
* Fixed MED-03702, embedded text "Unset" was not used.

---------------------------------------------------------------------------

Version: 2.53 Mon 24-Oct-94        sproven                       

* Various changes to break FileCore 512M byte disc limit, partially
  complete - DON'T use this version for ROM builds, unless BigDisc
  is set FALSE.
  

---------------------------------------------------------------------------

Version: 2.54 Thu 27-Oct-94        sproven                       

* Fixed problem with register corruption on IdentifyFileCorHardDisc,
  now works with DOSFS.

---------------------------------------------------------------------------

Version: 2.55 Tue 01-Nov-94        sproven                       

Fixed formatting of 1.6M floppies (s.FormSWIs).  Added DiscSize2
to Disc Record structure (s.FileCore15 s.GenSWIs s.FileCore60
s.FileCore00 s.Commands s.FileCore20 s.Identify).

---------------------------------------------------------------------------

Version: 2.56 Tue 01-Nov-94        Steve Cormie                  

* Added directed comments to Messages file for message tokenisation.
* Moved command help/syntax from Global.Messages to Messages file.

---------------------------------------------------------------------------

Version: 2.57 Mon 07-Nov-94        sproven (Simon Proven)       

Various changes to FileCore80 to allow ADFSBuffers to work on big
discs.


---------------------------------------------------------------------------

Version: 2.58 Thu 10-Nov-94        sproven (Simon Proven)        

Added FileCore_MiscOp 6, OS_FSControl 55, 56, 57 support, FileCore_FreeSpace64,
some extensions to defect list handling code.  Added extended process error
reporting - now disc errors are correctly reported on BigDiscs.  Fixed data
abort on mounting unrecognised floppy.

---------------------------------------------------------------------------

Version: 2.59 Thu 17-Nov-94        sproven                       

Implemented and tested DoCompMoves optimised version.


---------------------------------------------------------------------------

Version: 2.60 Thu 17-Nov-94        sproven                       

Added 64 bit numbering in *Defect

---------------------------------------------------------------------------

Version: 2.61 Fri 18-Nov-94        sproven                       

Fixed bug in floppy format - DoSwiDiscOp & DoSwiSectorDiscOp broken.
Fixed bug in floppy mount - SanityCheckLFormat was setting DiscSize to 0

---------------------------------------------------------------------------

Version: 2.62 Fri 18-Nov-94        Steve Cormie                  

Messages file changed so that menu entries are not tokenised.

---------------------------------------------------------------------------

Version: 2.63 Mon 21-Nov-94        sproven                       

Fixed 64 bit number reading for *Defect - ReadHex64 was
returning after reading first digit, so causing
"Parameters not recognised" error.

---------------------------------------------------------------------------

Version: 2.64 Tue 22-Nov-94        sproven                       

Fix DoDefect and MarkObjectMappedIn so that *BackUp works correctly.


---------------------------------------------------------------------------

Version: 2.65 Thu 01-Dec-94        sproven                       

Fixed hard disc *defect.

---------------------------------------------------------------------------

Version: 2.66 Mon 05-Dec-94        sproven                       

Fixed DoSwiFreeSpace64 to use OS_FSControlReadFreeSpace64.

---------------------------------------------------------------------------

Version: 2.67 Tue 06-Dec-94        sproven                       

Fixed ADFSbuffers so that DiscAdjust is not incorrectly used
to find disc drive number.  In one place (BackGroundFileCacheOp)
had to use test of bit 28 of DiscAdjust which effectively
limits max disc size to 2^28 sectors - not a problem when
max recommended disc size is 4G though.  Files affected:
FileCore80

---------------------------------------------------------------------------

Version: 2.68 Thu 08-Dec-94        sproven                       

Fixed FreeSpace64 - was missing test for this SWI call in the
SWI handler so wasn't handling private word correctly.


---------------------------------------------------------------------------

Version: 2.69 Fri 09-Dec-94        sproven                       

Changed FileCore30 - FindErrBlock now works with extended process
error blocks.

---------------------------------------------------------------------------

Version: 2.70 Fri 09-Dec-94        sproven                       

Added check for Disc address overflow when calling small filing
systems (FileCore15, RetryDriveOp).

---------------------------------------------------------------------------

Version: 2.71 Mon 12-Dec-94        sproven                       

Fixed DoOsFunDefectList64 in FileCore60 (wasn't returning number
of pairs placed into buffer, and was confused over presence of
second defect list).

---------------------------------------------------------------------------

Version: 2.72 Thu 15-Dec-94        sproven                       

Fixed DismountDisc (was incorrectly checking disc size and
generating invalid disc address).  Fixed DoDefect to check
disc address correctly.  Slight optimisations to DoBackup
(removed unecessary - paranoid, even - push/pull pairs).

---------------------------------------------------------------------------

Version: 2.73 Fri 16-Dec-94        sproven                       

Fixed DoMap to work on >4G discs (s.Commands).  Removed
excess push/pull pair in DoVerify (s.Commands).  Fixed
ADFSBuffers problem with D or L format and non-FileCore
discs (eg DOS discs) where DiscAdjust was being calculated
incorrectly (was shifting entire address by sector size,
so shifting disc bits into address bits).  (s.FileCore80)
Removed spurious warning message about BigDisc being
turned on (s.FileCore).

---------------------------------------------------------------------------

Version: 2.74 Mon 19-Dec-94        sproven                       

Fixed IdentifyFormat bug (was returning 'ADF' for all
non-F format discs).  Was register corruption in
IdentifyFileCoreFloppyDisc (s.Identify changed).

---------------------------------------------------------------------------

Version: 2.75 Mon 19-Dec-94        sproven                       

Altered DoSwiDiscOp and DoSwiSectorDiscOp so that
on write operations they check the FSLock status
and if the filing system is locked do not allow
the operation.  The two operations checked are
WriteTrk and WriteSecs. (s.GenSWIs, s.Errors)

Fixed *defect - new, improved (NOT) test for disc
address out of range was corrupting disc address
in the process. (s.Commands)

---------------------------------------------------------------------------

Version: 2.76 Tue 10-Jan-95        sproven                       

Fix for MED-04217, checks Escape in OSFunBootUp (s.FileCore60)

---------------------------------------------------------------------------

Version: 2.77 Thu 12-Jan-95        sproven                       

Fix for MED-04242, LayoutFreeSpaceMap fixed to use correct
disc size. (s.FormSWIs)

---------------------------------------------------------------------------

Version: 2.78 Mon 16-Jan-95        sproven                       

Fix for MED-4345 in s.FormSWIs - changed LayoutFreeSpacMap to
shift disc address for call to MapOutADefect.  Note that
this routine cannot handle defects >512M

Fixed DoMap to work on discs >4G bytes (not yet tested), for
MED-0436.  (s.Commands)

---------------------------------------------------------------------------

Version: 2.79 Thu 26-Jan-95        sproven                       

* Fixed disc mount code to work with ShareSize<>0 (copy ShareSize to disc
  Record correctly and generate root directory disc address correctly).
  (s.Idenitfy)

* Fixed DoSwiDescribeDisc to place DiscSize2 and ShareSize fields in returned
  disc record (s.GenSWIs)

* Fixed GetBytes entry to collect sector properly.  Was using DiscAdjust incorrectly
  to get drive number, now using FcbIndirectDiscAddr.  This should properly fix
  the ADFSBuffers problem which was thought to be fixed by version 2.73. (s.FileCore80)

* Fixed MyCloseFile to attach correct length when converting to a shared object. (s.FileCore70)

* Fixed FindFileFragment, MeasureFileAllocSize and MeasureFileAllocSize_GotMap to support 
  BigShare and added RoundUpShare routine (s.FileCore33)

* Fixed NewClaimFree to support BigShare. (s.FileCore31)

* Added ShareSize to disc record. (s.FileCore00)

---------------------------------------------------------------------------

Version: 2.80 Wed 01-Feb-95        sproven                       

Fixed AddDefect64 not to corrupt R3 on entry.  (s.FileCore60)

---------------------------------------------------------------------------

Version: 2.81 Mon 13-Feb-95        sproven                       

Fixed DoVerify and BeforeAlterFsMap to not call UnLockMap
on Dos Discs.  Modified some Debug6 code to use DLINE
and DREG.

Files changed: Version, s.Commands, s.FileCore40, s.FileCore35

---------------------------------------------------------------------------

Version: 2.82 Wed 15-Feb-95        sproven                       

* Fixed WriteZeroes to not overflow scratch space on large discs - old
  code assumed smaller allocation unit.

* Fixed DoMap to work on >4G discs, was broken in a number of ways.

Files changed: Version, s.Commands, s.FileCore70

---------------------------------------------------------------------------

Version: 2.83 Fri 17-Feb-95        sproven                       

Implemented fix for MED-04138, checks if disc too large for
filing system on mount and if so then refuses to mount.

Changed: s.Identify, s.FileCore00, Version

---------------------------------------------------------------------------

Version: 2.84 Thu 23-Feb-95        sproven                       

Fixed *free to work on discs >4G bytes.

Files changed: s.Commands, Resources.UK.Messages, Version

---------------------------------------------------------------------------

Version: 2.85 Fri 03-Mar-95        sproven                       

Fixed SizeLessDefects64 to work on old map discs with no
defect list (was leaving r0 non-0 on exit).

Fixed *free to work in cases where FS (eg DOSFS) does not
support FSControl 55.

---------------------------------------------------------------------------

Version: 2.86 Sun 12-Mar-95        sproven                       

* Made defect list handling test for >512M disc using BigFlag
  rather than DiscSize and DiscSize2.

* Robustified UnlockMap so that if called incorrectly then does
  not attempt to UnlockDrive on Drive &FF (causes directory
  cache corruption and sometimes crashes machine).

* Changed sector size assumption on unrecognised boot block
  from 1024 bytes to 512 bytes to get Mac discs to work.

* Added debug code to DrvRecPtr and DiscRecPtr to catch cases
  where illegal pointers were generated.

* Finally fixed *Verify properly.  Original fix was attempt to
  stop UnlockMap call for DOS floppies.  But fix was broken,
  because:
  
  * It caused the new code to call UnlockMap TWICE for D, E and
    F discs (bad move).
  
  * The original code was incorrectly calling UnlockMap for D.
  
  Now the code correctly only calls UnlockMap if the disc is
  a FileCore disc.

Changed: s.FileCore60, s.FileCore35, s.FileCore20, s.FileCore00,
         s.DebugOpts, s.Commands

---------------------------------------------------------------------------

Version: 2.87 Tue 14-Mar-95        sproven                       

Implemented fix for ATAPI data lost problem, in RestartCheck

---------------------------------------------------------------------------

Version: 2.88 Wed 15-Mar-95        sproven                       

Changed BigDiscSupport bit to bit 9 as bit 2 turns out
to mean something under RISC OS 2.

---------------------------------------------------------------------------

Version: 2.89 Wed 15-Mar-95        sproven                       

Fixed the new MiscOp SWI entry not to call Parent_Misc
if operation not supported by low-level filing system.

---------------------------------------------------------------------------

Version: 2.90 Thu 30-Mar-95        sproven                       

MED-05198: Fixed 2G files so that files of &7FFFFFFF can't be
extended to &80000000.  Option is controlled
by the TwoGigFix label.

Changes: s.FileCore70, s.DebugOpts

---------------------------------------------------------------------------

Version: 2.91 Tue 04-Apr-95        Aideen McConville             

Changes: s.Errors, Resources.UK.Messages

Part of change meant for 2.90 above.

***************************************************************************
                      Black - RISC OS 3.60 (4.28) build
***************************************************************************

.....................................
Changes since previous release follow
.....................................


===============================================================================

===================================================
NFS::riscos_bl.$.Sources.OS_Core.FileSys.FileSwitch
===================================================

Version: 2.18 Fri 19-Aug-94        Steve Cormie                  

* Fix for MED-00079: command help/syntax now looked up in messages file.

---------------------------------------------------------------------------

Version: 2.19 Thu 08-Sep-94        Steve Cormie                  

* Fixed MED-03698: now looks up "Unset" for directory catalogue and
  "<Untitled FS>" if no start up banner for FS is given.

---------------------------------------------------------------------------

Version: 2.20 Fri 28-Oct-94        Steve Cormie                  

* Added directed comments to Messages file for message tokenisation.
* Moved command help/syntax from Global.Messages to Messages file.

---------------------------------------------------------------------------

Version: 2.21 Thu 03-Nov-94        Alan Glover                   

* Implement OS_FSControl 55/FSEntry_Func 35 ReadFreeSpace64. 

---------------------------------------------------------------------------

Version: 2.22 Wed 09-Nov-94        Alan Glover                   

* Implement OS_FSControl 56/FSEntry_Func 36 DefectList64.
* Implement OS_FSControl 57/FSEntry_Func 37 AddDefect64.

---------------------------------------------------------------------------

Version: 2.23 Wed 01-Feb-95        sproven                       

Fixed AddDefect64Entry to preserve r3 (was corrupting it
before passing to filing system).

MED-04480

---------------------------------------------------------------------------

Version: 2.24 Tue 07-Feb-95        Steve Cormie                  

* Part of fix for MED-03569: FileSwitch was being too strict in preventing
  recursion in certain OS_Args calls where recursion was impossible.

  Changed: s.OSArgs

---------------------------------------------------------------------------

Version: 2.25 Mon 27-Feb-95        Aideen McConville             

* Fixed MED-04715: defined File$Type_FAE (Resource)

  Changed: s.FileSwBody

---------------------------------------------------------------------------

Version: 2.26 Thu 02-Mar-95        sproven                       

* Fixed MED-04784: made ReadBootOptionGiven correctly return
                   error ptr.

Changed: s.FSControl

---------------------------------------------------------------------------

Version: 2.27 Mon 06-Mar-95        sproven                       

* Fixed MED-04445: SetDirFromObject was corrupting error ptr
                   and calling routine was atempting to look
                   up returned error string.

Changed: s.DirStore

***************************************************************************
                      Black - RISC OS 3.60 (4.28) build
***************************************************************************


===============================================================================

======================================================
NFS::riscos_bl.$.Sources.OS_Core.FileSys.ImageFS.DOSFS
======================================================

Version: 0.49 Fri 27-May-94        Steve Cormie                  

* Added support for >32Mb partitions.
* Allow DOSFS to work with DOS PCMCIA cards.

---------------------------------------------------------------------------

Version: 0.50 Thu 23-Jun-94        WTurner                       

* Allow DOSFS to format DOS PCMCIA cards. Note that the 
  SWI interface hs had to be changed to support this!

---------------------------------------------------------------------------

Version: 0.51 Thu 30-Jun-94        WTurner                       

* SWI interface changed again as a result of a Berlin FS review

---------------------------------------------------------------------------

Version: 0.52 Mon 25-Jul-94        Aideen McConville             

* Makefile updates.

---------------------------------------------------------------------------

Version: 0.53 Wed 03-Aug-94        Steve Cormie                  

* Added support for all partitions >32Mb (removed test for specific system
  identifier bytes in partition table and added test to validate partition by
  ensuring that the maximum sector number in the partition table is the same
  as that in the boot block).

---------------------------------------------------------------------------

Version: 0.54 Wed 03-Aug-94        Steve Cormie                  

* Fixed MED-03595: assembly and compilation problems.

---------------------------------------------------------------------------

Version: 0.55 Tue 16-Aug-94        Aideen McConville             

* Cmhg header file now internationalised (from Steve Cormie)
* Makefile amended to use standard cmhg (MUST use cmhg 4.3 or later).
* Removed Changes file, since log file is now more accessible.

---------------------------------------------------------------------------

Version: 0.56 Tue 30-Aug-94        Aideen McConville             

* Makefile - added rom_link rule.

---------------------------------------------------------------------------

Version: 0.57 Fri 02-Sep-94        Steve Cormie                  

* Internationalised DOSMap and CopyBoot commands.

---------------------------------------------------------------------------

Version: 0.58 Thu 13-Oct-94        Aideen McConville             

* hdr.DOSFS - Created - list SWIs (used to generate swis.h)
  Makefile  - Updated to export the above.

---------------------------------------------------------------------------

Version: 0.59 Fri 28-Oct-94        Steve Cormie                  

* Added directed comments to Messages file for message tokenisation.
* Moved command help/syntax from Global.Messages to Messages file.

---------------------------------------------------------------------------

Version: 0.60 Fri 02-Dec-94        Aideen McConville             

* Makefile
  - Assemble s.DOSFSctl with '-apcs none' - necessary when using Objasm 3.00
    to avoid conflicts with predefined register names.

---------------------------------------------------------------------------

Version: 0.61 Wed 01-Feb-95        Steve Cormie                  

* Fixed MED-04463: RISC OS file names of the form aa/bb/cc should have
  generated an error but didn't (multiple extension separators were not
  trapped).

---------------------------------------------------------------------------

Version: 0.62 Thu 23-Feb-95        Steve Cormie                  

* Fixed MED-04719: Fixed memory leak in write zeroes code.

***************************************************************************
                      Black - RISC OS 3.60 (4.28) build
***************************************************************************


===============================================================================

====================================================
NFS::riscos_bl.$.Sources.OS_Core.FileSys.NetFS.NetFS
====================================================

Version: 5.84 Wed 06-Apr-94        Bruce Cockburn                

  *  Changed Warning messages so that new format errors are more syntacticly
     correct as inclusions.

  *  Changed length of broadcast for names to only be the required seven
     bytes rather than the buffer size of eight.  Problem noted by Richard
     Crook of SJ Research.

  *  Fixed bug in AnotherTx routines that caused the port to go wrong. 
     Bug reported by Richard Crook of SJ Research.

  *  Fixed a bug that caused *ListFS -force to ask for the wrong starting
     point in an enumeration if an enumeration had happened before.  The
     state associated with an enumeration was hanging around for too long. 
     This was fixed by flushing the AnotherTx list whenever the broadcast
     for names happens.  Bug reported by Richard Crook of SJ Research.

  *  Fixed a bug in open that caused the FCB list to loop (because a block
     was deallocated but not removed from the data structure) if errors are
     returned from the subsequent operation after an open but before control
     is returned to FileSwitch.  Bug reported by Richard Crook of SJ
     Research.

  *  Added an extra issuing of the service call NetFS just before doing the
     Logon boot action in case the OSCLI doesn't return (because it is an
     application).  This means that the NetFiler will get the file server
     name right.  Found by Carl Sellers and Jonathan Roach.

AMcC: 24-Jun-94:

Needs version 3.52 of HdrSrc (includes updated Macros).

---------------------------------------------------------------------------

Version: 5.85 Thu 08-Sep-94        Steve Cormie                  

* Fixed MED-03705: "Unset" now comes from Global.Messages file.

---------------------------------------------------------------------------

Version: 5.86 Mon 31-Oct-94        Steve Cormie                  

* Added directed comments to Messages file for message tokenisation.

---------------------------------------------------------------------------

Version: 5.87 Thu 19-Jan-95        Steve Cormie                  

* Fixed MED-04369: Prevented token 0 substitution for *configure output help
  messages.

---------------------------------------------------------------------------

Version: 5.88 Tue 07-Feb-95        Steve Cormie                  

* Fixed MED-03569: Now handles FSEntry_Args 8 (write zeroes) but only if the
  block of zeroes is at the end of the file (set extent is used to force the
  file server to write zeroes).

  Changed files: s.Random

---------------------------------------------------------------------------

Version: 5.89 Tue 28-Feb-95        Christopher Partington

Fixed MED-04780: reverse one of the changes made for 5.84. Always broadcast
for disc names with an eight-byte broadcast packet, even though only seven
bytes of content is significant. This is because old machines, e.g. Level
III fileservers, only accept exactly 8 byte broadcasts.

Files changed: s.Commands
               Time+Date

---------------------------------------------------------------------------

Version: 5.90 Tue 07-Mar-95        Alan Glover                   

Fixed MED-01949: Increase buffer size to quote with long path names. Then
adjust various sources to change ADRs to ADRLs...

***************************************************************************
                      Black - RISC OS 3.60 (4.28) build
***************************************************************************


===============================================================================

=======================================================
NFS::riscos_bl.$.Sources.OS_Core.FileSys.NetFS.NetFiler
=======================================================

Version: 0.74 Fri 28-Oct-94        Steve Cormie                  

* Added directed comments to Messages file for message tokenisation.
* Moved command help/syntax from Global.Messages to Messages file.

***************************************************************************
                      Black - RISC OS 3.60 (4.28) build
***************************************************************************


===============================================================================

=================================================
NFS::riscos_bl.$.Sources.OS_Core.FileSys.NetPrint
=================================================

Version: 5.45 Fri 24-Jun-94        Aideen McConville             

  *  No longer Gets EcoMacros.

  *  Needs HdrSrc - 3.52 or later.

---------------------------------------------------------------------------

Version: 5.46 Thu 01-Sep-94        Steve Cormie                  

  *  Command help/syntax now looked up in Global.Messages file.
  *  Help for *Configure PS now looked up in NetPrint.Messages file.

---------------------------------------------------------------------------

Version: 5.47 Fri 28-Oct-94        Steve Cormie                  

  *  Added directed comments to Messages file for message tokenisation.
  *  Moved command help/syntax from Global.Messages to Messages file.

---------------------------------------------------------------------------

Version: 5.48 Fri 02-Dec-94        Bruce Cockburn                

  *  Replaced call to uppercase macro by explicit code.

  *  Removed R7 from Push in function LookupName.

  *  Folded in changes made by Owen Smith of SJ Research for their new
     extensions to the printing protocols.  The version number in brackets
     at the begining of each change shows the SJ version of NetPrint inwhich
     the changes were made.

  *  (5.45) Modified connect protocol to negotiate a features byte and use
     reply port &D0 if possible. This is necessary to allow an Archimedes
     to run a backgrounded printer server (eg. the SJ Research servers)
     and print to another (or the same) printer server. This was not
     possible previously because the data and the reply packets were
     both sent on port &D1 and so got confused.

  *  (5.45) Changed WaitForReception to check for Escape key.

  *  (5.46) Changed to send a partial packet if it is more than a minute
     since we got the acknowledge for the previous packet from the server.
     This is to alleviate problems with servers timing out if the dot
     matrix printer drivers spend a long time trickling half a page of
     carriage returns into our buffer.

  *  (5.47) Bug fix - set the X bit on Econet_PacketSize. The absence of
     this caused a serious problem on RISC OS 2 hardware Econet where the
     SWI does not exist, so the application's error handler was called
     while the printer drivers were active. Bug believed to have been
     introduced in version 5.41.

---------------------------------------------------------------------------

Version: 5.53 Mon 20-Feb-95        Steve Cormie                  

Changes from Owen Smith (SJ-Research):

  * Fixed bug with *Configure PS reporting a syntax error on RISC OS 3.1
    version. It was doing a MessageTrans_Lookup of an explicit string.
    Fix implemented in HelpTexts file.

  * Integrated SJ changes since 5.47 back into Acorn 5.48 source tree.
    SJ code since 5.47 has been based on the SJ 5.47 source tree, which
    was itself based on the RISC OS 3.1 NetPrint 5.44 Acorn source tree.
    NetPrint 5.52 represents the first point at which SJ code is based on
    a RISC OS Black style source tree and thus the Acorn and SJ sources
    are identical. The version number in brackets at the begining of each
    change shows the SJ version of NetPrint in which the changes were made.

  * (5.49) Bug fix - added claiming of port &D0 since NetPrint listens on
    it.

  * (5.49) Bug fix - ignore jobstart reply packets with the wrong mode bits
    on new reply port. This stops print jobs starting using 76 byte packets
    due to picking up a duplicate acknowledge from a previous job on the
    jobstart rxcb. This is not done for the old reply port (as used by
    !Spooler, MDFS etc.) to gaurantee backwards compatibility.

  * (5.49) Enhancement - use a dynamic port for sending the print data if
    the server gives one. This prevents mis-delivery of packets at the
    server end due to gross over-use of port &D1.

  * (5.50) Bug fix for 5.49 - do machine type peek on opening connection
    and don't try for features byte to old hardware (eg. SJ Research MDFS).

  * (5.50) Bug fix - since 5.45 all the new connection negotiation code has
    had error handling which didn't remove the record from the list of
    handles etc. This is now fixed although the errors never happen in
    practice.

  * (5.50) Enhancement - if the new reply port is in use then ignore
    duplicate acknowledge packets and repost. This gets duplicates out of
    the system sooner (which is more efficient) and stops the jobstart
    duplicate code from having to throw away twenty to thirty duplicate
    acks. This is not done for the old reply port (as used by !Spooler,
    MDFS etc.) to gaurantee backwards compatibility.

  * (5.51) Bug fix for 5.50 - don't do machine type peek to local machine
    since hardware Econet does not support local loopback for immediate
    operations.

  * (5.51) Removed InstanceTxBuffer from job record since it is now unused.

  * (5.51) Changed name sorting to regard accents as significant as
    specified in the protocol document.

My changes:

  * Allocated an error number for ErrorNetOldServer (in Hdr:NewErrors) and
    changed code to use it.

---------------------------------------------------------------------------

***************************************************************************
                      Black - RISC OS 3.60 (4.28) build
***************************************************************************


===============================================================================

==========================================================
NFS::riscos_bl.$.Sources.OS_Core.FileSys.PCCardFS.PCCFiler
==========================================================


===============================================================================

==========================================================
NFS::riscos_bl.$.Sources.OS_Core.FileSys.PCCardFS.PCCardFS
==========================================================


===============================================================================

===============================================
NFS::riscos_bl.$.Sources.OS_Core.FileSys.PipeFS
===============================================

Version: 0.15 Fri 28-Oct-94        Steve Cormie                  

* Added directed comments to Messages file for message tokenisation.
* Moved command help/syntax from Global.Messages to Messages file.

***************************************************************************
                      Black - RISC OS 3.60 (4.28) build
***************************************************************************


===============================================================================

====================================================
NFS::riscos_bl.$.Sources.OS_Core.FileSys.RAMFS.RAMFS
====================================================

Version: 2.11 Fri 28-Oct-94        Steve Cormie                  

* Added directed comments to Messages file for message tokenisation.
* Moved command help/syntax from Global.Messages to Messages file.

***************************************************************************
                      Black - RISC OS 3.60 (4.28) build
***************************************************************************


===============================================================================

=========================================================
NFS::riscos_bl.$.Sources.OS_Core.FileSys.RAMFS.RAMFSFiler
=========================================================

Version: 0.32 Fri 28-Oct-94        Steve Cormie                  

* Added directed comments to Messages file for message tokenisation.
* Moved command help/syntax from Global.Messages to Messages file.

***************************************************************************
                      Black - RISC OS 3.60 (4.28) build
***************************************************************************


===============================================================================

============================================================
NFS::riscos_bl.$.Sources.OS_Core.FileSys.ResourceFS.ResFiler
============================================================

Version: 0.14 Fri 28-Oct-94        Steve Cormie                  

* Added directed comments to Messages file for message tokenisation.
* Moved command help/syntax from Global.Messages to Messages file.

***************************************************************************
                      Black - RISC OS 3.60 (4.28) build
***************************************************************************


===============================================================================

==============================================================
NFS::riscos_bl.$.Sources.OS_Core.FileSys.ResourceFS.ResourceFS
==============================================================

Version: 0.15 Fri 28-Oct-94        Steve Cormie                  

* Added directed comments to Messages file for message tokenisation.
* Moved command help/syntax from Global.Messages to Messages file.

***************************************************************************
                      Black - RISC OS 3.60 (4.28) build
***************************************************************************


===============================================================================

======================================================
NFS::riscos_bl.$.Sources.OS_Core.FileSys.SCSIFS.SCSIFS
======================================================

.....................................
Changes since previous release follow
.....................................

Version: 1.09 Tue 24-Jan-95        Alan Glover                   

Corrected new swi entires in header file. No code change. Version number
incremented to 0.25.

***************************************************************************
                      Black - RISC OS 3.60 (4.28) build
***************************************************************************


===============================================================================

=========================================================
NFS::riscos_bl.$.Sources.OS_Core.FileSys.SCSIFS.SCSIFiler
=========================================================

Version: 1.12 Wed 25-Jan-95        Aideen McConville             

[Version 1.11 (14 Feb 1994)]
The module is timestamped 01 Jun 1994

Fabio Balloni's SCSIFiler - with Sharing capability

Contains the module but *no* updated sources.
Based on Jonathan's version (1.11) above.

---------------------------------------------------------------------------

Version: 1.13 Wed 25-Jan-95        Aideen McConville             

Fabio's copy of s.SCSIFiler (incomplete) - internationalised.

This version does not assemble.

***************************************************************************
                      Black - RISC OS 3.60 (4.28) build
***************************************************************************


===============================================================================

===========================================
NFS::riscos_bl.$.Sources.OS_Core.GameModes2
===========================================


===============================================================================

==============================================
NFS::riscos_bl.$.Sources.OS_Core.HWSupport.ARM
==============================================

Version: 0.08 Fri 28-Oct-94        Steve Cormie                  

* Added directed comments to Messages file for message tokenisation.
* Moved command help/syntax from Global.Messages to Messages file.

---------------------------------------------------------------------------

Version: 0.09 Fri 28-Oct-94        Richard Manby                 

Switched off processor ID checking partly because it
rejected Morris and partly because RISC OS black will
never be fitted to non-cached machines.
---------------------------------------------------------------------------

Version: 0.10 Fri 28-Oct-94        Aideen McConville             

Made Module and SrcFiler Version numbers the same.

***************************************************************************
                      Black - RISC OS 3.60 (4.28) build
***************************************************************************


===============================================================================

===============================================
NFS::riscos_bl.$.Sources.OS_Core.HWSupport.ARM3
===============================================


===============================================================================

=================================================
NFS::riscos_bl.$.Sources.OS_Core.HWSupport.BatMgr
=================================================

Version: 0.12 Fri 14-Oct-94        Richard Manby                 

Initial implementation of battery cycling for Stork.

---------------------------------------------------------------------------

Version: 0.13 Thu 03-Nov-94        Richard Manby                 

Check for presence of Portable module on startup.

---------------------------------------------------------------------------

Version: 0.14 Thu 03-Nov-94        Aideen McConville             

* Makefile: updated to export Resources correctly

---------------------------------------------------------------------------

Version: 0.15 Thu 03-Nov-94        Richard Manby                 

PartialResources flag put in, to allow BatMgr start up app to appear only
on Stork.
---------------------------------------------------------------------------

Version: 0.16 Thu 24-Nov-94        Steve Cormie                  

* Fixed MED-03878: Removed copyright message, internationalised command
  help and syntax, added message tokenisation directives to Messages file.

---------------------------------------------------------------------------

Version: 0.17 Wed 08-Feb-95        Richard Manby                 

Change to new BMU variable and command numbers for Stork (flag OnStork TRUE).
Cut out code for Estimated charge level (flag EstimateSetting FALSE).

***************************************************************************
                      Black - RISC OS 3.60 (4.28) build
***************************************************************************


---------------------------------------------------------------------------

.....................................
Changes since previous release follow
.....................................


===============================================================================

==================================================
NFS::riscos_bl.$.Sources.OS_Core.HWSupport.Buffers
==================================================

Version: 0.24 Mon 31-Oct-94        Steve Cormie                  

* Added directed comments to Messages file for message tokenisation.

***************************************************************************
                      Black - RISC OS 3.60 (4.28) build
***************************************************************************


===============================================================================

===================================================
NFS::riscos_bl.$.Sources.OS_Core.HWSupport.CD.ATAPI
===================================================

Version: 1.01 Tue 13-Dec-94        Aideen McConville             

Created from sources provided by Mark Watson (Eesox)


 ATAPI driver changes:

------------------------------------------------------------------------------------------------
 0.02    27-Sep-94         First version given to Acorn (Martin Neville-Smith)
------------------------------------------------------------------------------------------------
 0.03    12-Oct-94         Added:   AudioPause.
                                    Checks on startup for ATAPI, CD-ROM and removable.
                                    Takes into account slow devices that need a pause after
                                      sending a command, before checking INTRQ or DRQ.
                                    Writing 16 bit value now writes 2 copies (high and low)
                                      for RISC PC.
                           Removed: Module_CheckForATAPIDrive instead does identify drive.
                           Fixed:   On initialisation accidently stored at location 0  !!!
------------------------------------------------------------------------------------------------
 0.04    23-Oct-94         Fixed:   EnquireDataMode for Sony CDU55E.
                           Fixed:   Read data for Sony CDU55E.
                           Fixed:   Now works with PhotoCD and mode 2 form 1, not m1 form 2
------------------------------------------------------------------------------------------------
 0.05    09-Nov-94         Added:   On initialisation if there are no drives found then module
                                    errors and dies with 'No CD-ROM drive present'.
------------------------------------------------------------------------------------------------
 0.06    10-Nov-94         Added:   Locking and unlocking of IDE registers
------------------------------------------------------------------------------------------------
 1.00    10-Nov-94        NO CHANGES - Version number brought up to release
------------------------------------------------------------------------------------------------
 1.01    05-Dec-94         Added:   SWI to find out number of ATAPI drives found.
                           Changed: Method of dying if no drives found changed from using
                                    OS_GenerateError to AddCallBack then *RMKill.  Nice huh.
                                     There must be a better way than this ?
                           Removed: CompareStrings routine as it wasn't used

---------------------------------------------------------------------------

Version: 1.02 Tue 20-Dec-94        Steve Cormie                  

* Driver now internationalised.
* Fixed MED-03912: Start up but with no workspace if registration fails (or if no
  ATAPI drives connected).

---------------------------------------------------------------------------

Version: 1.03 Tue 03-Jan-95        Aideen McConville             

* Created hdr.ATAPI (standard SWI definition file) and updated Makefile
  to export it.

---------------------------------------------------------------------------

Version: 1.04 Wed 11-Jan-95        Steve Cormie                  

* Fixed SWI ATAPI_GetDrives so that it actually returns a value again.

---------------------------------------------------------------------------

Version: 1.05 Thu 02-Feb-95        Aideen McConville             

* Merged in changes from Mark Watson (Eesox, Tel/Fax: 01223 264242)
  (Version id was: 1.02  18 Dec 94, based on version 1.01 above)

   (MEW) Added:   Implemented ReadUserData
                  GetAudioParms (volume level)
                  SetAudioParms (volume level)

Changed files:
    hdr.hashes
    hdr.IDEdefs
    hdr.Macros
    s.ATAPIStuff
    s.DriverCode
    s.Module

    Doc.!Changes
    Test: MPEG      (new)
    Test: RandRead  (new)

---------------------------------------------------------------------------

Version: 1.06 Tue 28-Feb-95        Timothy Roddis                

Checked in MEW (Eesox) changes. These confine themselves to DriverCode and
ATAPIStuff with a new definition of XOS_Word in the headers.
   The bulk of it is lines 624 of DriverCode onwards and deals more
robustly with the mode sense command.

Changed files: hdr.hashes
               hdr.Macros
               s.ATAPIStuff
               s.DriverCode
               s.Module
               s.OnError
               s.Variables

AMcC: Updated Version file to 1.06
      Removed Resources dir (resources now in FileSys.CDFS.CDFSRes)
      Updated Makefile      (no longer exports resources)

---------------------------------------------------------------------------

  AMcC (13-Mar-95): These changes never made it to the SrcFiler
                    Version 1.06 (above) believed to correspond to Mark's
                    Version 1.09 (below).

  >>| ---------------------------------------------------------------------------
  >>|  Version: 1.06 Wed 15-Feb-95       Mark Watson

  >>| * Moved all debugging options to 'hdr.hashes'
  >>| * Changed method of locking/unlocking IDE registers

  >>| ---------------------------------------------------------------------------

  >>|  Version: 1.07 Wed 24-Feb-95       Mark Watson

  >>| * This version is only for Simon Proven to try out on the new hardware.
  >>|   The method of reading from IDE and writing data to memory has been
  >>|   simplified to see if it reduces problems.

  >>| ---------------------------------------------------------------------------


  >>|  Version: 1.08 Wed 26-Feb-95       Mark Watson

  >>| * removed left over debugging from ReadData.  Discovered cause of IDE busy
  >>|   lights being on - ReadCD &BE command.
  >>| * improved GP_FindModePage to make sure that don't run over end of buffer
  >>| * changed GP_CurrentModeSense - buffer length was lo/hi should be hi/lo
  >>| * reduced functionality of GetParameters

  >>| ---------------------------------------------------------------------------

  >>|  Version: 1.09 Tue 28-Feb-95       Mark Watson

  >>| * fixed ReadData so that it uses to different Read opcodes (Sony bug)

  >>| ---------------------------------------------------------------------------

  >>|  Version: 1.10 Wed 01-Mar-95       Mark Watson

  >>| * Put very small delays in ATAPI_Control in 'ATAPIStuff'
  >>| * Put GetParameters back to state it was in v 1.07

  >>| ---------------------------------------------------------------------------

  >>|  Version: 1.11 Wed 01-Mar-95       Mark Watson

  >>| * Put small delay after selecting drive number in ATAPI_Control in 'ATAPIStuff'

  >>| ---------------------------------------------------------------------------

  >>|  Version: 1.12 Wed 02-Mar-95       Mark Watson

  >>| * Increased the delay when polling INTRQ
  >>| * Moved test for not caring about data to be lower down so that the status
  >>|   register is read.

  >>| ---------------------------------------------------------------------------

  >>|  Version: 1.13 Wed 03-Mar-95       Mark Watson

  >>| * Do retries on any error
  >>| * Changed first 2 tests for BUSY status to use the alternative status register.

  >>| ---------------------------------------------------------------------------

  >>|  Version: 1.14 Mon 13-Mar-95       Christopher Partington

  >>| * Rewrite of IDE access code as old code violated specification in several
  >>|   places. This was the cause of data corruption and countless "Compact disc
  >>|   is faulty" errors. Special code to handle Panasonic CR571B 1.0e strange
  >>|   behaviour after IRQ.
  >>| * Added special pleading for Sony CDU50E 0.3n in IDENTIFY phase - bytes of
  >>|   capabilities word are in wrong order.
  >>| * Conditionalled out code to send page D in MODE SELECT as Sony CDU50E 0.3n
  >>|   aborts if this page is sent.
  >>| * General tidyup and commenting of bits of code touched during this work.

  >>| This still has many known faults, particularly when discs are changed.


---------------------------------------------------------------------------

Version: 1.20 Mon 13-Mar-95        Christopher Partington        

Chris' 1.14 with the Version incremented to 1.20

---------------------------------------------------------------------------

Version: 1.21 Wed 22-Mar-95        Christopher Partington        

* Recognise "interrupt DRQ" (Panasonic 571) and "accelerated DRQ" (Sony
  50/55) drive types on startup and drive them differently for packet
  (i.e. most) commands. Fixes many problems with Panasonic CR571B 1.0e.
* Treat drive not ready as disc changed - otherwise CDFS doesn't notice
  when drive door is open and some disc changes are missed.
* Rewrite data transfer code to be faster and not read the drive more times
  than it should.
* Reset drive when it fails to respond before timeout expires.
* Fix multisession Photo CDs by correcting code to find PVD.
* Change ReadData to avoid using READ(10)/(12) commands as these sometimes
  seem to return bad blocks on Panasonic CR571B 1.0e. This necessitates
  issuing multiple reads when ILLEGAL REQUEST is returned to avoid problems
  when swapping between currently mounted discs with different modes.
* Change EnquireDataMode to return mode 0 if READ HEADER fails with ILLEGAL
  REQUEST. Fixes "faulty" errors when trying to catalogue audio discs.
* General tidy. Remove OS_GenerateError calls and other debug MEW added
  between 1.06 and 1.13 and did not mean to leave in.

Tested with mode 0, 1, 2/1 discs only.

---------------------------------------------------------------------------

Version: 1.22 Fri 24-Mar-95        Christopher Partington        

* Change read of mode 2 form 2 discs to pass "ANY" as sector type as that
  seems to be what CDFS wants. Makes 2/2 discs work with CDFS 2.33 (except
  for some 2/2 discs on Panasonic CR571B 1.0e) and gives better error with
  CDFS 2.28 in Black ROM.
* Trap reads of mode 0 discs (audio) and treat as mode 1 as that is,
  effectively, what SCSI drivers do by accident. Improves behaviour when
  swapping between audio and data discs.
* Reenable code to send page D (inactivity stuff) to drive in MODE SELECT
  but now ignore any error (returned by Sony CDU50E 0.3n).
* Change IDE lock code to return error returned by lock SWI (rather than "CD
  is faulty") if unable to get lock before timeout.

Changed files: hdr.hashes
               s.ATAPIstuff
               s.DriverCode
               Version

---------------------------------------------------------------------------

Version: 1.23 Fri 31-Mar-95        Christopher Partington        

* Add code suggested by dodgy fax from Panasonic to try to work around
  their cache problem on the CR571B 1.0e.
* Disable retries when IDENTIFY fails, to make booting with no drive
  present faster.
* Disable checks for specific lengths of mode sense data as drives can
  return any length.
* Add 1us delay after IRQ for future-proofing.

Changed files: hdr.hashes
               s.ATAPIstuff
               s.DriverCode
               Version

***************************************************************************
                      Black - RISC OS 3.60 (4.28) build
***************************************************************************


===============================================================================

========================================================
NFS::riscos_bl.$.Sources.OS_Core.HWSupport.CD.CDFSDriver
========================================================

Version: 2.20 Tue 22-Nov-94        Aideen McConville             

Sources from the Drawing Office.

---------------------------------------------------------------------------

Version: 2.21 Tue 29-Nov-94        Steve Cormie                  

* Fixed MED-03884: Module now internationalised.

---------------------------------------------------------------------------

Version: 2.22 Tue 13-Dec-94        Steve Cormie                  

* Improved debugging only.

---------------------------------------------------------------------------

Version: 2.23 Mon 19-Dec-94        Steve Cormie                  

* Fixed MED-03912: No longer initialises if configured drives = 0.

---------------------------------------------------------------------------

Version: 2.24 Tue 20-Dec-94        Aideen McConville             

* Created CDROM assembler header file containing CDROM SWI values
* Now uses Global hdr files: Macros, SWIs and System

Changed files:
    hdr.CDROM    (new file)
    hdr.CDMacros (was hdr.Macros)
    hdr.hashes   (removed definitions already in global hdrs)
    s.Main       (GETs Global & Interface Hdrs)
    Makefile     (Exports hdr.CDROM)
    Version

Apart from Version and date, binary identical to 2.23

---------------------------------------------------------------------------

Version: 2.25 Wed 04-Jan-95        Aideen McConville             

* Marked some SWIs in hdr.CDROM as Private
* Added some Doc files from the Developer's kit (from SPalmer)

---------------------------------------------------------------------------

Version: 2.26 Fri 27-Jan-95        Steve Cormie                  

* Fixed MED-04449: Forgot to mask out buffer size bits when checking number
  of CD ROM drives configured.

---------------------------------------------------------------------------

Version: 2.27 Wed 01-Feb-95        Steve Cormie                  

* Fixed MED-04486: Error handler was broken such that substituted errors
  were not looked up before being reported.

---------------------------------------------------------------------------

Same version Thu 02-Feb-95 Timothy Roddis

* Corrected Docs error - UG_Text in DevKit said, "AND 8," for mask. It
should have (and now does) say, "AND 7."

---------------------------------------------------------------------------

Version: 2.32 Fri 03-Feb-95        Aideen McConville             

* Merged in changes from Mark Watson (Eesox, Tel/Fax: 01223 264242)
  (Version id was: 2.31  25 Jan 95, based on version 2.20 above)

;-----------------------------------------------------------------------------------------------
2.21   05-Jul-94   MEW Eesox   CD_ReadAudio added
;-----------------------------------------------------------------------------------------------
2.30   19-Jul-94   MEW Eesox   CD_ReadUserData added.  'buffer' extended from 256 to 2340 bytes
;-----------------------------------------------------------------------------------------------
2.30a  19-Sep-94   MEW Eesox   Bug fix - removed check to see if soft-load driver can support
                               the SWI.
;-----------------------------------------------------------------------------------------------
2.31   25-Jan-95   MEW Eesox   Added support for CD_GetAudioParms and CD_SetAudioParms
;-----------------------------------------------------------------------------------------------

Changed files:

    hdr.CDMacros
    hdr.CDROM    (new SWIs: ReadAudio, ReadUserData, SeekUserData, GetAudioParms, SetAudioParms)
    hdr.hashes
    s.ByteCopy
    s.CD_Routs
    s.Main
    s.Strings
    s.Tables
    s.variables

---------------------------------------------------------------------------

Version: 2.33 Fri 03-Feb-95        Steve Cormie                  

* Corrected branch to error_handler in merged code which should have been
  branch to error_handler_lookup.

---------------------------------------------------------------------------

Mon 27-Feb-95 AMcConville: Makefile updated to copy Resources to CDFSRes
Tue 04-Apr-95 AMcConville: Makefile updated - Resources now checked-in to CDFSRes

***************************************************************************
                      Black - RISC OS 3.60 (4.28) build
***************************************************************************


===============================================================================

====================================================
NFS::riscos_bl.$.Sources.OS_Core.HWSupport.CD.Chinon
====================================================

Version: 1.00 Tue 22-Nov-94        Aideen McConville             

Sources from the Drawing Office.

---------------------------------------------------------------------------

Version: 1.01 Mon 28-Nov-94        Steve Cormie                  

* Fixed MED-03885: Driver now internationalised.

---------------------------------------------------------------------------

Version: 1.02 Mon 19-Dec-94        Steve Cormie                  

* Fixed MED-03912: Start up but with no workspace if registration fails.

---------------------------------------------------------------------------

Mon 27-Feb-95 AMcConville: Makefile updated to copy Resources to CDFSRes
Tue 04-Apr-95 AMcConville: Makefile updated - Resources now checked-in to CDFSRes

***************************************************************************
                      Black - RISC OS 3.60 (4.28) build
***************************************************************************


===============================================================================

=====================================================
NFS::riscos_bl.$.Sources.OS_Core.HWSupport.CD.Hitachi
=====================================================

Version: 1.00 Tue 22-Nov-94        Aideen McConville             

Sources from the Drawing Office.

---------------------------------------------------------------------------

Version: 1.01 Mon 28-Nov-94        Steve Cormie                  

* Fixed MED-03886: Driver now internationalised.

---------------------------------------------------------------------------

Version: 1.02 Mon 19-Dec-94        Steve Cormie                  

* Fixed MED-03912: Start up but with no workspace if registration fails.

---------------------------------------------------------------------------

Mon 27-Feb-95 AMcConville: Makefile updated to copy Resources to CDFSRes
Tue 04-Apr-95 AMcConville: Makefile updated - Resources now checked-in to CDFSRes

***************************************************************************
                      Black - RISC OS 3.60 (4.28) build
***************************************************************************


===============================================================================

=====================================================
NFS::riscos_bl.$.Sources.OS_Core.HWSupport.CD.Philips
=====================================================

Version: 1.01 Tue 22-Nov-94        Aideen McConville             

Sources from the Drawing Office.

---------------------------------------------------------------------------

Version: 1.02 Mon 28-Nov-94        Steve Cormie                  

* Fixed MED-03887: Driver now internationalised.

---------------------------------------------------------------------------

Version: 1.03 Mon 19-Dec-94        Steve Cormie                  

* Fixed MED-03912: Start up but with no workspace if registration fails.

---------------------------------------------------------------------------

Mon 27-Feb-95 AMcConville: Makefile updated to copy Resources to CDFSRes
Tue 04-Apr-95 AMcConville: Makefile updated - Resources now checked-in to CDFSRes

***************************************************************************
                      Black - RISC OS 3.60 (4.28) build
***************************************************************************


===============================================================================

==================================================
NFS::riscos_bl.$.Sources.OS_Core.HWSupport.CD.Sony
==================================================

Version: 1.05 Tue 22-Nov-94        Aideen McConville             

Sources from the Drawing Office.

---------------------------------------------------------------------------

Version: 1.06 Mon 28-Nov-94        Steve Cormie                  

* Fixed MED-03888: Driver now internationalised.

---------------------------------------------------------------------------

Version: 1.07 Tue 13-Dec-94        Steve Cormie                  

* Improved debugging only.

---------------------------------------------------------------------------

Version: 1.08 Mon 19-Dec-94        Steve Cormie                  

* Fixed MED-03912: Start up but with no workspace if registration fails.

---------------------------------------------------------------------------

Version: 1.09 Fri 03-Feb-95        Aideen McConville             

* Merged in changes from Mark Watson (Eesox, Tel/Fax: 01223 264242)
  (Version id was: 1.06  05 Jul 1994, based on version 1.05 above)

(MEW)  1.06    05-Jul-94 - CD_ReadAudio added

Changed files:
    hdr.hashes
    hdr.Macros
    s.DriverCode
    Test: (dir) added.

---------------------------------------------------------------------------

Mon 27-Feb-95 AMcConville: Makefile updated to copy Resources to CDFSRes
Tue 04-Apr-95 AMcConville: Makefile updated - Resources now checked-in to CDFSRes

***************************************************************************
                      Black - RISC OS 3.60 (4.28) build
***************************************************************************


===============================================================================

=====================================================
NFS::riscos_bl.$.Sources.OS_Core.HWSupport.CD.Toshiba
=====================================================

Version: 1.01 Tue 22-Nov-94        Aideen McConville             

Sources from the Drawing Office.

---------------------------------------------------------------------------

Version: 1.02 Mon 28-Nov-94        Steve Cormie                  

* Fixed MED-03889: Driver now internationalised.

---------------------------------------------------------------------------

Version: 1.03 Mon 19-Dec-94        Steve Cormie                  

* Fixed MED-03912: Start up but with no workspace if registration fails.

---------------------------------------------------------------------------

Mon 27-Feb-95 AMcConville: Makefile updated to copy Resources to CDFSRes
Tue 04-Apr-95 AMcConville: Makefile updated - Resources now checked-in to CDFSRes

***************************************************************************
                      Black - RISC OS 3.60 (4.28) build
***************************************************************************


===============================================================================

==============================================
NFS::riscos_bl.$.Sources.OS_Core.HWSupport.DMA
==============================================

Version: 0.06 Thu 05-May-94        Steve Cormie                  

* Fixed bugs in claim/release of sound DMA channels.

---------------------------------------------------------------------------

Version: 0.07 Wed 12-Oct-94        Aideen McConville             

* Added hdr.DMA - lists SWI names (needed for swis.h)
  Updated Makefile to export the above.

---------------------------------------------------------------------------

Version: 0.08 Mon 31-Oct-94        Steve Cormie                  

* Added directed comments to Messages file for message tokenisation.

---------------------------------------------------------------------------

Version: 0.09 Mon 21-Nov-94        Steve Cormie                  

* Prevent initialisation if hardware does not support IO DMA.

---------------------------------------------------------------------------

Version: 0.10 Tue 28-Feb-95        Steve Cormie                  

* Fixed interrupt disable imbalance in DMAGetRequestBlock.

---------------------------------------------------------------------------

Version: 0.11 Fri 03-Mar-95        Steve Cormie                  

* Fixed SWI DMA_TerminateTransfer when called with no supplied error. DMA
  manager was looking up its own but failing to clear V before calling
  DMATerminate and so left a terminated transfer blocking the queue.

* Now keeps interrupts disabled at the end of the final interrupt for a
  transfer when the transfer is removed from the queue etc.

* Added NOPs to macros which could change processor mode.

***************************************************************************
                      Black - RISC OS 3.60 (4.28) build
***************************************************************************


===============================================================================

===================================================
NFS::riscos_bl.$.Sources.OS_Core.HWSupport.DeviceFS
===================================================

Version: 0.30 Mon 31-Oct-94        Steve Cormie                  

* Added directed comments to Messages file for message tokenisation.

***************************************************************************
                      Black - RISC OS 3.60 (4.28) build
***************************************************************************


===============================================================================

================================================
NFS::riscos_bl.$.Sources.OS_Core.HWSupport.FPASC
================================================

Version: 4.05 Mon 31-Oct-94        Steve Cormie                  

* Added directed comments to Messages file for message tokenisation.

***************************************************************************
                      Black - RISC OS 3.60 (4.28) build
***************************************************************************


===============================================================================

==============================================
NFS::riscos_bl.$.Sources.OS_Core.HWSupport.IIC
==============================================

Version: 0.14 Mon 26-Sep-94        Steve Cormie                  

* Source level fix for ROM patch: put data low before clock high on stop.

***************************************************************************
                      Black - RISC OS 3.60 (4.28) build
***************************************************************************


===============================================================================

===================================================
NFS::riscos_bl.$.Sources.OS_Core.HWSupport.Joystick
===================================================

Version: 0.12 Wed 09-Nov-94        WTurner                       

Now also supports ADVAL and OS_Byte interfaces, and also provides
SWIs for calibration of analogue joysticks.

---------------------------------------------------------------------------

Version: 0.13 Wed 16-Nov-94        WTurner                       

Correction made to the joystick presence detection code
---------------------------------------------------------------------------

Version: 0.14 Thu 17-Nov-94        WTurner                       

Further alteration made to the presence detection code, due to the
weird read-sensitive addressing present on the network slot.
---------------------------------------------------------------------------

Version: 0.15 Thu 17-Nov-94        Aideen McConville             

* 'resources' rule added to Makefile

---------------------------------------------------------------------------

Version: 0.16 Thu 17-Nov-94        WTurner                       

Oh dear, the alteration in v0.14 didn't quite work. Fixed it.
---------------------------------------------------------------------------

Version: 0.17 Fri 18-Nov-94        Aideen McConville             

Updated Version file.

---------------------------------------------------------------------------

Version: 0.18 Fri 18-Nov-94        Aideen McConville             

* s.Front - added GET hdr:Podule (need defn of SWI Podule_ReadInfo)

---------------------------------------------------------------------------

Version: 0.19 Fri 18-Nov-94        WTurner                       

Logged the hdr file back in, exporting the two new SWIs

---------------------------------------------------------------------------

Version: 0.20 Tue 31-Jan-95        WTurner                       

MED-04454:
ADVAL & OS_Byte 128 methods of reading analogue joysticks didn't
work in version 0.19 - they do now.

---------------------------------------------------------------------------

Version: 0.21 Tue 14-Feb-95        WTurner                       

Various faults fixed: MED-04607, MED-04592, MED-04456.
---------------------------------------------------------------------------

Version: 0.22 Tue 07-Mar-95        WTurner                       

One of the above fixes (to do with calibration not working) didn't work.
Now, it does.
***************************************************************************
                      Black - RISC OS 3.60 (4.28) build
***************************************************************************


===============================================================================

===================================================
NFS::riscos_bl.$.Sources.OS_Core.HWSupport.Keyboard
===================================================


===============================================================================

================================================
NFS::riscos_bl.$.Sources.OS_Core.HWSupport.Mouse
================================================

Version: 0.05 Thu 23-Jun-94        Aideen McConville             

Set standalone flag to be false (don't want Resources built in).

---------------------------------------------------------------------------

Version: 0.06 Fri 16-Sep-94        Steve Cormie                  

Internationalised device name record building code properly (no longer assumes
the length of the name string is <= 30 characters).

---------------------------------------------------------------------------

Version: 0.07 Thu 03-Nov-94        Richard Manby                 

Check machine type - stay dormant on Morris based machines.

---------------------------------------------------------------------------

Version: 0.08 Thu 08-Dec-94        Richard Manby                 

Changed module to kill itself rather than staying dormant if run on Morris
based machines.


***************************************************************************
                      Black - RISC OS 3.60 (4.28) build
***************************************************************************


===============================================================================

========================================================
NFS::riscos_bl.$.Sources.OS_Core.HWSupport.PCMCIA.Driver
========================================================


===============================================================================

=========================================================
NFS::riscos_bl.$.Sources.OS_Core.HWSupport.PCMCIA.Manager
=========================================================


===============================================================================

====================================================
NFS::riscos_bl.$.Sources.OS_Core.HWSupport.PS2Driver
====================================================

Version: 0.01 Mon 04-Jul-94        Richard Manby 

Created          

---------------------------------------------------------------------------

Version: 0.02 Wed 24-Aug-94        Richard Manby                 

Switched off debugging output.
Added delay to ensure reliable mouse verses keyboard detection.

---------------------------------------------------------------------------

Version: 0.03 Wed 24-Aug-94        Richard Manby                 

Put 0.02 back because source filer got its knickers in a twist and
kept an out of date version of s.PS2driver
---------------------------------------------------------------------------

Version: 0.04 Fri 16-Sep-94        Steve Cormie                  

* Internationalised mouse type record building code properly (no longer
  assumes name string is <= 30 chars).
* Also set international flag to true and open PS2Driver.Messages rather
  than SerMouse.Messages.

---------------------------------------------------------------------------

Version: 0.05 Fri 14-Oct-94        Richard Manby                 

Add Stork keyboard hooks.

---------------------------------------------------------------------------

Version: 0.06 Fri 14-Oct-94        Richard Manby                 

Flag change to assemble for Morris - SecondPort set TRUE.

---------------------------------------------------------------------------

Version: 0.07 Thu 27-Oct-94        Aideen McConville   (created new version)

Changed files:

     s.GetAll    - gets Hdr:DevNos
     s.ModHead   - TML card uses podule slot 0
     s.PS2Driver - uses IOMD_MouseTxEmpty_DevNo (from Hdr:DevNos)
                        IOMD_MouseRxFull_DevNo


---------------------------------------------------------------------------

Version: 0.08 Wed 02-Nov-94        Richard Manby                 

Remove debugging hotkey (ie stop AltGr reseting driver).

---------------------------------------------------------------------------

Version: 0.09 Thu 03-Nov-94        Richard Manby                 

Tidied up a few comments.

---------------------------------------------------------------------------

Version: 0.10 Fri 02-Dec-94        Richard Manby                 

Add KEYV code to allow interrogation of device type.

---------------------------------------------------------------------------

Version: 0.11 Fri 16-Dec-94        Richard Manby                 

Altered device identification method to prevent flushing
of devices internal buffer. Allows poweron-* to work again.

---------------------------------------------------------------------------

Version: 0.12 Fri 13-Jan-95        Richard Manby                 

Programmed the mouse resolution, as 400dpi mouse appears
to default to 200dpi. Fixes MED-04334.

---------------------------------------------------------------------------

Version: 0.13 Mon 30-Jan-95        Richard Manby                 

Fix slow changing of LEDS problem, ie MED-04488. Caused by failure to clear
"state_WANTBAT" flag when BAT code was received.

---------------------------------------------------------------------------

Version: 0.14 Fri 24-Mar-95        Richard Manby                 

Fix control key jammed down problem, ie MED-04434.
Also fixs spurious dots problem, ie MED-04838.

***************************************************************************
                      Black - RISC OS 3.60 (4.28) build
***************************************************************************


---------------------------------------------------------------------------

.....................................
Changes since previous release follow
.....................................


===============================================================================

===================================================
NFS::riscos_bl.$.Sources.OS_Core.HWSupport.PS2Mouse
===================================================


===============================================================================

===================================================
NFS::riscos_bl.$.Sources.OS_Core.HWSupport.Parallel
===================================================

Version: 0.41 Wed 20-Jul-94        Richard Manby             

* Added power saving calls for Stork portable, see StorkPower flag.

---------------------------------------------------------------------------

Version: 0.42 Tue 26-Jul-94        Richard Manby                 

* Added conditional assembly flags OldHardware & NewHardware.
* Set OldHardware to false to save ROM space for RO Black.

---------------------------------------------------------------------------

Version: 0.43 Sat 13-Aug-94        Aideen McConville             

* Updated Version file to correspond to SrcFiler version.

***************************************************************************
                      Black - RISC OS 3.60 (4.28) build
***************************************************************************


===============================================================================

=================================================
NFS::riscos_bl.$.Sources.OS_Core.HWSupport.Podule
=================================================

Version: 1.37 Mon 01-Aug-94        Bruce Cockburn

  * Added debugging code.

  * Changed register allocations in GetModuleInfo.
             
---------------------------------------------------------------------------

Version: 1.38 Fri 19-Aug-94        Steve Cormie                  

* Fix for MED-00079: command help/syntax now looked up.

---------------------------------------------------------------------------

Version: 1.39 Tue 30-Aug-94        Aideen McConville             

* Added resources: target to Makefile.

---------------------------------------------------------------------------

Version: 1.40 Fri 28-Oct-94        Steve Cormie                  

* Added message tokenisation directives to Messages file.
* Moved command help/syntax to Messages file from Global.Messages.
* Made release version.

---------------------------------------------------------------------------

Version: 1.41 Mon 30-Jan-95        Richard Manby                 

* s.Interface - added a CLRV to suppress errors from the dummy read
                routine in the podule enumeration code.
                Fixes MED-04273.

***************************************************************************
                      Black - RISC OS 3.60 (4.28) build
***************************************************************************


===============================================================================

===================================================
NFS::riscos_bl.$.Sources.OS_Core.HWSupport.Portable
===================================================

Version: 0.40 Thu 29-Sep-94        Richard Manby                 


---------------------------------------------------------------------------

Version: 0.41 Tue 29-Nov-94        Richard Manby                 


---------------------------------------------------------------------------

Version: 0.42 Thu 05-Jan-95        Richard Manby                 


---------------------------------------------------------------------------

Version: 0.43 Wed 11-Jan-95        Richard Manby                 

---------------------------------------------------------------------------

No new Version: AMcC 11-Jan-95: Added Resources rule to Makefile

---------------------------------------------------------------------------

Version: 0.44 Mon 23-Jan-95        Richard Manby                 


---------------------------------------------------------------------------

Version: 0.45 Wed 08-Feb-95        Richard Manby                 


---------------------------------------------------------------------------

Version: 0.46 Wed 01-Mar-95        Richard Manby                 

Changes to Hdr.Portable made for ROM build.

---------------------------------------------------------------------------

.....................................
Changes since previous release follow
.....................................


===============================================================================

=====================================================
NFS::riscos_bl.$.Sources.OS_Core.HWSupport.PortableA4
=====================================================


===============================================================================

====================================================
NFS::riscos_bl.$.Sources.OS_Core.HWSupport.RTCAdjust
====================================================


===============================================================================

==========================================================
NFS::riscos_bl.$.Sources.OS_Core.HWSupport.SCSI.SCSIDriver
==========================================================


===============================================================================

===================================================
NFS::riscos_bl.$.Sources.OS_Core.HWSupport.SerMouse
===================================================

Version: 0.04 Fri 16-Sep-94        Steve Cormie                  

* Internationalised type record building code properly (no longer assumes
  name string has <= 30 characters).

---------------------------------------------------------------------------

Version: 0.05 Fri 16-Dec-94        Steve Cormie                  

* Fixed MED-04193: Module was doing an OS_File,0,0 (close all open files)
  if RMKilled when not active mouse type.

***************************************************************************
                      Black - RISC OS 3.60 (4.28) build
***************************************************************************


===============================================================================

=================================================
NFS::riscos_bl.$.Sources.OS_Core.HWSupport.Serial
=================================================

Version: 0.32 Thu 05-May-94        Steve Cormie                  

* Write 2 bytes to FIFO at rates <19200 baud instead of 1 (get round 665
  timing screw up).

  Changed files: Version, s.Serial, s.Serial710, Test.TimeTest

---------------------------------------------------------------------------

Version: 0.33 Fri 22-Jul-94        Richard Manby             

* Call SetPower_Off from close710 (see flag FixPowerSave).
* Set OldHardware to false to save ROM space for RO Black.

---------------------------------------------------------------------------

Version: 0.34 Mon 31-Oct-94        Steve Cormie                  

* Added directed comments to Messages file for message tokenisation.

***************************************************************************
                      Black - RISC OS 3.60 (4.28) build
***************************************************************************


===============================================================================

====================================================
NFS::riscos_bl.$.Sources.OS_Core.HWSupport.SerialSpt
====================================================

Version: 0.21 Fri 17-Feb-95        Steve Cormie                  

* Fixed MED-04639: OS_Byte 242 value now set correctly for baud rates > 19200.

***************************************************************************
                      Black - RISC OS 3.60 (4.28) build
***************************************************************************


===============================================================================

=======================================================
NFS::riscos_bl.$.Sources.OS_Core.HWSupport.Sound.Sound0
=======================================================

Version: 1.38 Wed 12-Oct-94        Aideen McConville             

Mark Taunton's 16-Bit Stereo Sound Support.
See Doc.DOCN16.

Changed files: s.Sound0
               hdr.Sound (includes new SWIs)

---------------------------------------------------------------------------

Version: 1.39 Wed 12-Oct-94        Aideen McConville             

* hdr.Sound: Corrected some Sound2 SWI names (needed for swis.h)


---------------------------------------------------------------------------

Version: 1.40 Tue 18-Oct-94        Richard Manby                 

Add power saving calls for Stork.

---------------------------------------------------------------------------

Version: 1.41 Tue 25-Oct-94        Steve Cormie                  

* Fixed bug in level0 fill where code could ask for more than would
  be played.
* Fixed MIN-00087 - Sound_Configure code allowed buffer size to be set
  too large for 16bit sound. Also WorkOutVIDCParams called process_oversample
  which used the OLD buffer size to determine whether to oversample rather than
  the new one given in the SWI call.
* Fixed MIN-00022 - Added *Configure SoundSystem for 8bit/16bit sound.
* Fixed level 0 overrun code to handle 16-bit sound.

---------------------------------------------------------------------------

Version: 1.42 Fri 28-Oct-94        Steve Cormie                  

* Added directed comments to Messages file for message tokenisation.
* Moved command help/syntax from Global.Messages to Messages file.

---------------------------------------------------------------------------

Version: 1.43 Wed 16-Nov-94        Steve Cormie                  

* Enable interrupts during conversion from 8bit to 16bit sound to improve
  interrupt latency.

---------------------------------------------------------------------------

Version: 1.45 Wed 23-Nov-94        Steve Cormie                  

* Version 1.44 skipped (fix did not work).
* Interrupts still enabled during conversion to 16bit sound except for
  VSync interrupt (now disabled so that Replay works correctly) and Timer0
  interrupt (disabled because Hourglass module waits for a VSync from a
  routine sitting on TickerV == machine hung if Timer0 IRQ goes off when
  VSync IRQ disabled).

---------------------------------------------------------------------------

Version: 1.46 Wed 15-Feb-95        Steve Cormie                  

* Fixed the fix made for MIN-00087 in version 1.41 (test for maximum number
  of samples when 16-bit sound configured was wrong).

---------------------------------------------------------------------------

Version: 1.47 Wed 15-Feb-95        Steve Cormie                  

* Left DisableFlybackIRQ flag set to False, should have been True.

---------------------------------------------------------------------------

Version: 1.48 Fri 03-Mar-95        Steve Cormie                  

* Fixed MED-04558: Machine no longer hangs when Sound_Configure called with
  no. samples < 16.

***************************************************************************
                      Black - RISC OS 3.60 (4.28) build
***************************************************************************


---------------------------------------------------------------------------

.....................................
Changes since previous release follow
.....................................


===============================================================================

=======================================================
NFS::riscos_bl.$.Sources.OS_Core.HWSupport.Sound.Sound1
=======================================================

Version: 1.29 Fri 28-Oct-94        Steve Cormie                  

* Added directed comments to Messages file for message tokenisation.
* Moved command help/syntax from Global.Messages to Messages file.

***************************************************************************
                      Black - RISC OS 3.60 (4.28) build
***************************************************************************


===============================================================================

=======================================================
NFS::riscos_bl.$.Sources.OS_Core.HWSupport.Sound.Sound2
=======================================================

Version: 1.19 Fri 28-Oct-94        Steve Cormie                  

* Added directed comments to Messages file for message tokenisation.
* Moved command help/syntax from Global.Messages to Messages file.

***************************************************************************
                      Black - RISC OS 3.60 (4.28) build
***************************************************************************


===============================================================================

==================================================================
NFS::riscos_bl.$.Sources.OS_Core.HWSupport.Sound.Voices.Percussion
==================================================================


===============================================================================

=================================================================
NFS::riscos_bl.$.Sources.OS_Core.HWSupport.Sound.Voices.StringLib
=================================================================


===============================================================================

=================================================================
NFS::riscos_bl.$.Sources.OS_Core.HWSupport.Sound.Voices.WaveSynth
=================================================================


===============================================================================

=====================================================
NFS::riscos_bl.$.Sources.OS_Core.HWSupport.SystemDevs
=====================================================


===============================================================================

==========================================
NFS::riscos_bl.$.Sources.OS_Core.IRQUtils2
==========================================


===============================================================================

================================================
NFS::riscos_bl.$.Sources.OS_Core.Internat.IntKey
================================================

Version: 0.36 Tue 23-Aug-94        Aideen McConville             

New keyboard handler (from Opal sources).
Allows key pad to change.

***************************************************************************
                      Black - RISC OS 3.60 (4.28) build
***************************************************************************


===============================================================================

===============================================
NFS::riscos_bl.$.Sources.OS_Core.Internat.Inter
===============================================

Version: 1.26 Fri 28-Oct-94        Steve Cormie                  

* Added directed comments to Messages file for message tokenisation.
* Moved command help/syntax from Global.Messages to Messages file.

***************************************************************************
                      Black - RISC OS 3.60 (4.28) build
***************************************************************************


---------------------------------------------------------------------------

.....................................
Changes since previous release follow
.....................................


===============================================================================

==================================================
NFS::riscos_bl.$.Sources.OS_Core.Internat.Messages
==================================================

Version: 0.62 Tue 23-Aug-94        Steve Cormie                  

* Added more command help/syntax messages to Global.UK.Messages file.

---------------------------------------------------------------------------

Version: 0.63 Fri 02-Sep-94        Aideen McConville             

* Changed Makefile so that the Messages module is System dependent
  rather than Machine dependent - e.g. result would be different for
  2Mb and 4Mb Morris ROMs.

  The intermediate 'Data' file (produced by ScanRes) is deleted whenever
  the Global Messages file is copied into the Resources tree - this
  ensures that the module is rebuilt.

---------------------------------------------------------------------------

Version: 0.64 Thu 08-Sep-94        Steve Cormie                  

* Added messages CSDSU, LDSU and URDSU to Global.Messages file so that
  "Unset" could be looked up to fix MED-03705 and MED-03698.

---------------------------------------------------------------------------

Version: 0.65 Tue 11-Oct-94        Aideen McConville             

* Added a minimal dictionary - Global.UK.Dictionary.

---------------------------------------------------------------------------

Version: 0.66 Tue 11-Oct-94        Aideen McConville             

* Forgot to update the Makefile so that the Dictionary gets included.

---------------------------------------------------------------------------

Version: 0.67 Thu 27-Oct-94        Steve Cormie                  

* Added message tokenisation.

---------------------------------------------------------------------------

Version: 0.68 Thu 27-Oct-94        Steve Cormie                  

* Fixed a bug in Utils.c.MsgExt where no tokenisation at all (empty tag
  file) caused no output file to be generated. An empty file is now
  generated.

---------------------------------------------------------------------------

Version: 0.69 Mon 31-Oct-94        Steve Cormie                  

* Most command help/syntax moved out of Global.Messages file into individual
  component message files.
* Fixed bug in TagExtract where Token0 text could get appended to a tag twice.
* Stop MsgExt2 from being so verbose about what it is doing.

---------------------------------------------------------------------------

Version: 0.70 Mon 31-Oct-94        Steve Cormie                  

* Only command help/syntax left in Global messages file is for ADFS, FileCore
  and ColourPicker. Directives have been added to tokenise this in the Global
  message file until it can be moved out.

---------------------------------------------------------------------------

Version: 0.71 Tue 01-Nov-94        Steve Cormie                  

* Moved ADFS command help/syntax out of Global message file.

---------------------------------------------------------------------------

Version: 0.72 Tue 01-Nov-94        Steve Cormie                  

* Moved FileCore command help/syntax out of Global message file.

---------------------------------------------------------------------------

Version: 0.73 Wed 02-Nov-94        Steve Cormie                  

* Removed ColourPicker command help/syntax from Global message file (already
  handles its own command help/syntax).

---------------------------------------------------------------------------

Version: 0.74 Wed 09-Nov-94        Steve Cormie                  

* Added sources for ScanRes to Utils.
* Modified ScanRes so that any directory named Resources? (where ? is any valid
  filename character) will be reduced to Resources inside ResourceFS. For example,
  everything inside Resources1 will end up inside Resources in ResourceFS. This
  gets round the limit on directory entries in ADFS et al but allows more than
  77 inside Resources:$.Resources.

---------------------------------------------------------------------------

Version: 0.75 Wed 16-Nov-94        Steve Cormie                  

* Fixed bug in MsgExt which caused !Help tokenisation to fail.
* New MsgTok for !Help tokenisation (created from MsgTok2 sources). Old one
  couldn't cope with null bytes in messages.
* Stopped TokGen from outputting '.' characters.
 
---------------------------------------------------------------------------

Version: 0.76 Mon 28-Nov-94        Mike Stephens                 

Add global message 'NeedMod'

---------------------------------------------------------------------------

Version: 0.77 Mon 12-Dec-94        Aideen McConville             

* Adjusted Makefile rules and dependencies so that tokens don't need to be
  regenerated every time.
  Now ensures that Messages are tokenised only once (stamp Data.Tokenised)
  Added rule to add help tokens to Help Messages file.

---------------------------------------------------------------------------

Version: 0.78 Thu 26-Jan-95        Aideen McConville             

* Adjusted Makefile so that the Dictionary isn't removed (and doesn't
  need to be generated) after a 'make clean'.

---------------------------------------------------------------------------

Version: 0.79 Wed 01-Feb-95        Steve Cormie                  

* Fixed MED-04438: Message "NumParm" moved back into the Global.Messages
  file from Kernel.Messages.

***************************************************************************
                      Black - RISC OS 3.60 (4.28) build
***************************************************************************

.....................................
Changes since previous release follow
.....................................


===============================================================================

==================================================
NFS::riscos_bl.$.Sources.OS_Core.Internat.MsgTrans
==================================================

Version: 0.28 Mon 25-Apr-94        Alan Glover                   

(During Medusa Freeze, hence disparity between version date and this date)

Tried to do a MsgTrans for OS 3.10. Positioning of ECN's call to the Dictionary
SWI really slugs performance when the call fails - position moved so that
the dictionary is not established until it is definitely needed. This restores
speed on 3.10 for minimal penalty on later OSs.

---------------------------------------------------------------------------

Version: 0.29 Fri 09-Sep-94        Steve Cormie                  

* Fixed MED-03699: bad SWI error now looked up in Global.Messages file.

---------------------------------------------------------------------------

Version: 0.30 Fri 28-Oct-94        Steve Cormie                  

* Added directed comments to Messages file for message tokenisation.

---------------------------------------------------------------------------

Version: 0.31 Wed 11-Jan-95        Steve Cormie                  

* Fixed MED-04256: Sorted out confusion when default message text contains
  control characters.

***************************************************************************
                      Black - RISC OS 3.60 (4.28) build
***************************************************************************


===============================================================================

===========================================================
NFS::riscos_bl.$.Sources.OS_Core.Internat.Territory.Manager
===========================================================

Version: 0.17 Tue 23-Aug-94        Steve Cormie                  

* Fix for MED-00079: now looks up command help/syntax in messages file.

---------------------------------------------------------------------------

Version: 0.18 Wed 24-Aug-94        Steve Cormie                  

* Fixed MED-03296: now looks for configured territory on floppy (as in PRM).

---------------------------------------------------------------------------

Version: 0.19 Wed 12-Oct-94        Aideen McConville             

* hdr.Territory: Added SWIs TransformString and ConvertTextToString

---------------------------------------------------------------------------

Version: 0.20 Fri 28-Oct-94        Steve Cormie                  

* Added directed comments to Messages file for message tokenisation.
* Moved command help/syntax from Global.Messages to Messages file.

---------------------------------------------------------------------------

Version: 0.21 Tue 10-Jan-95        Steve Cormie                  

* Acknowledge escape from OS_Confirm when floppy prompt being displayed
  (stop escape wreaking havoc later). Also, Return key now confirms floppy
  present.

---------------------------------------------------------------------------

Version: 0.22 Thu 19-Jan-95        Steve Cormie                  

* Fixed MED-04370: Prevent token 0 substitution in configure DST/NODST help
  text in Messages file.

---------------------------------------------------------------------------

Version: 0.23 Wed 15-Feb-95        Steve Cormie                  

* Must have had a brainstorm when doing version 0.21 as I broke the floppy
  prompt confirm code by corrupting lr in a subroutine.

***************************************************************************
                      Black - RISC OS 3.60 (4.28) build
***************************************************************************


===============================================================================

======================================================
NFS::riscos_bl.$.Sources.OS_Core.Internat.Territory.UK
======================================================

Version: 0.22 Mon 31-Oct-94        Steve Cormie                  

* Added directed comments to Messages file for message tokenisation.

***************************************************************************
                      Black - RISC OS 3.60 (4.28) build
***************************************************************************


===============================================================================

=======================================
NFS::riscos_bl.$.Sources.OS_Core.Kernel
=======================================

Version: 3.51 Wed 25-May-94        Alan Glover

  (28-Apr-94) AGlover: source.vdugrafj
        Fix screenloading of 8bpp non-full palette sprites (deferred fix from Medusa
        freeze). MED-03186

  (28-Apr-94) AGlover: source.vdugrafh
        Fix spriteop readpixel for 256 colour full palette modes (deferred fix from
        Medusa freeze). MED-03090

  (28-Apr-94) AGlover: source.vduswis
        Fix readmodevariable returning 63 instead of 255 for a sprite mode word.
        MED-03265

  (25-May-94) AGlover: source.vdugrafg,j,k
        Changes to allow palettes on new format sprites of 8bpp and below. Also
        William Turner's vdugrafh,i.

---------------------------------------------------------------------------

Version: 3.52 Thu 11-Aug-94        Richard Manby

requires Hdr:Machine.Morris (from HdrSrc 3.55)

New files:  s.Morris       Contains 16/32bit ROM startup code
Changes to: s.Kernel       Changed to conditionally Get s.Morris
            s.ARM600       Initialisation of extra Morris registers.
                           New RAM width and sizing code for Morris based machines.
            TestSrc.Begin
            s.PMF.key    } ReadCh modified for Stork's power saving scheme.
            s.PMF.osinit } see StorkPowerSave flag.

---------------------------------------------------------------------------

Version: 3.53 Thu 18-Aug-94        Richard Manby                 

Changes to s.Getall     Made Stork & Morris flags define as false when not
                        required, so that OS's with no Morris support can
                        still be built.

                        Set IncludeTestSrc flag to false so that the Kernel
                        built to test Morris stands more chance of starting up.

---------------------------------------------------------------------------

Version: 3.54 Wed 24-Aug-94        Steve Cormie                  

Changes to s.ChangeDyn  Access privileges for soft cam map changed to make
                        pages unavailable (source level fix for MemFix utility).
           s.NewReset   Access privileges for system heap, level 2 page tables
                        and soft cam map changed to make pages unavailable
                        (source level fix for MemFix utility).

---------------------------------------------------------------------------

Version: 3.55 Thu 22-Sep-94        Alan Glover                   

Change to s.pmf.osbyte  OS_Byte 19 returns immediately if screen is presently
                        blanked by DPMS (ie there are no HSYncs and hence
                        no VSyncs). Source level fix for DPMSUtils.
                        
---------------------------------------------------------------------------

Version: 3.56 Thu 22-Sep-94        Steve Cormie                  

Changes to s.Arthur3    *Configure and *Syntax starting and trailing text now
                        looked up in Messages file.
           s.Utility    Error reported for *RMKill UtilityModule now looked up.
           Resources.UK.Messages        New messages added.

---------------------------------------------------------------------------

Version: 3.57 Mon 26-Sep-94        Steve Cormie                  

Changes to s.NewIRQs            ROM patch converted to source fix; kernel does
                                its VSYNC stuff before issuing VSYNC events.
           s.PMF.i2cutils       ROM patch converted to source fix; put data
                                low before clock high on stop.
           s.vdu.vdudriver      ROM patch converted to source fix; display modes
                                with bits/scan line multiple of 32 but not 64.

---------------------------------------------------------------------------

Version: 3.58 Mon 03-Oct-94        Richard Manby                 

Changes to s.ARM600             Bug fix Morris RAM allocation code.
                                Hardwiring various bits to make simulation easier.

---------------------------------------------------------------------------

Version: 3.59 Wed 12-Oct-94        Alan Glover                   

Changes to s.pmf.osbyte         Repair my DPMSUtils fix - can't use usual workspace
                                pointer register.
                                Bring version file back in step with source filer
                                version.

---------------------------------------------------------------------------

Version: 3.60 Fri 14-Oct-94        Richard Manby                 


---------------------------------------------------------------------------

Version: 3.61 Fri 14-Oct-94        Richard Manby                 

Really the same as 3.60 - Reversed various flags that were set to make
simulation easier.
---------------------------------------------------------------------------

Version: 3.62 Wed 19-Oct-94        Alan Glover                   

Changes to s.ARM600             Introduce use of hdr:ImageSize.<ImageSize>
           s.GetAll             Needed for ROM size and softloading.

---------------------------------------------------------------------------

Version: 3.63 Thu 27-Oct-94        Richard Manby

Changes to s.NewIRQ   - Add extra Device IRQs for Morris PS2 mouse and AtoD.
           s.NewReset - Set clock prescalers to divide by one.

---------------------------------------------------------------------------

Version: 3.64 Thu 27-Oct-94        Richard Manby                 

s.NewIRQ  logged in again because SrcFiler got it wrong (corrupt files)
s.NewReset

---------------------------------------------------------------------------

Version: 3.65 Fri 28-Oct-94        Richard Manby   *** MORRIS ONLY ****

s.vdu.vdudriver } initial stab at getting correct video timing on Morris
s.vdu.vdumodes  } (cos rclk is 32MHz not 24MHz).
                  Gives wrong timing on RISC PC - will fix when I understand
                  enough about it to do it!.

---------------------------------------------------------------------------

Version: 3.66 Fri 28-Oct-94        Richard Manby   *** MORRIS ONLY ****

s.Morris   - Change 16 boot code to work around bugs in 1st Morris silicon.
                        This temporary change means ROMS WON'T work on RISC PCs.

---------------------------------------------------------------------------

Version: 3.67 Mon 31-Oct-94        Richard Manby                 

s.PMF.osinit - change kernel to default to FX 9,0 ie first flash colour
               constantly displayed fixes fault MED-03256

---------------------------------------------------------------------------

Version: 3.68 Mon 31-Oct-94        WTurner                       

s.PMF.osinit - Changes to support monitor id on Morris machines.

Also contains updated hdr.KernelWS (CLine_Softcopy for Morris monitor id)

---------------------------------------------------------------------------

Version: 3.69 Mon 31-Oct-94        Aideen McConville             

* s.PMF.osinit - Corrected some keyslips (LDRBNE -> LDRNEB)
* s.Version    - updated from 3.32 !!!

---------------------------------------------------------------------------

Version: 3.70 Mon 31-Oct-94        Steve Cormie                  

* s.Utility, s.SysComms - Changes to *Help handlers so that the Kernel message
                          file is used in preference to the Global message file.
* Resources.UK.Messages - Moved command help/syntax from Global message file to
                          Kernel message file. Added directives for message
                          tokenisation.

---------------------------------------------------------------------------

Version: 3.71 Tue 01-Nov-94        Richard Manby                 

s.pmf.osinit } Extend ReadSysInfo(2) to indicate VIDC20 and IOMD variants
s.middle     } used in Morris.
---------------------------------------------------------------------------

Version: 3.72 Wed 02-Nov-94        Richard Manby                 

s.vdu.vdudriver } Rework mode change code to cope with different rclk values
s.vdu.vdumodes  } (cos rclk is 32MHz on Morris and 24MHz on RISC PC).

---------------------------------------------------------------------------

Version: 3.73 Thu 03-Nov-94        Steve Cormie                  

* s.NewReset - Set Boot$Error if FSControl_BootupFS returns an error.

---------------------------------------------------------------------------

Version: 3.74 Thu 03-Nov-94        Aideen McConville             

* Export ScreenBlankFlag and ScreenBlankDPMSState so that DPMSUtils can
  still be built (part of RISC OS 3.50 and 3.60)

  Changed files: hdr.KernelWS
                 hdr.PublicWS
---------------------------------------------------------------------------

Version: 3.75 Fri 04-Nov-94        Richard Manby                 

Switch the POST code in to see if it works.

---------------------------------------------------------------------------

Version: 3.76 Mon 07-Nov-94        Richard Manby                 

Switch the POST code off because it doesn't work on Morris.

---------------------------------------------------------------------------

Version: 3.77 Wed 09-Nov-94        Richard Manby                 

ARM600 change to MemSize to merge ram fragments.

---------------------------------------------------------------------------

Version: 3.78 Wed 09-Nov-94        Richard Manby                 

Fix the MemSize changes

---------------------------------------------------------------------------

Version: 3.79 Wed 09-Nov-94        Richard Manby                 

Third time lucky!.

---------------------------------------------------------------------------

Version: 3.80 Thu 10-Nov-94        Richard Manby                 

Fixed a source corruption of s.pmf.osinit that stopped system clock
(ie OS_Word 1 clock) from working.

---------------------------------------------------------------------------

Version: 3.81 Wed 16-Nov-94        Steve Cormie                  

* s.SysComms - Forgot to make the SysComms module header point to the Kernel
               Messages file for command help/syntax.

---------------------------------------------------------------------------

Version: 3.82 Thu 17-Nov-94        Steve Cormie                  

* Resources.UK.Messages - No longer tokenise kernel messages, just help/syntax.

---------------------------------------------------------------------------

Version: 3.83 Mon 21-Nov-94        Richard Manby                 

* s.Morris
* testsrc.Begin     } rework POST code for Morris
* testsrc.Mem1IOMD  }
* testsrc.Ioc       }
* testsrc.Vidc      }
Switch the POST code on because it now works on Morris.

---------------------------------------------------------------------------

Version: 3.84 Mon 21-Nov-94        Richard Manby                 

* s.KbdResPC enable Mouse port interrupts so Kernel sees a Keyboard when
             mouse and keyboard are swapped over.

---------------------------------------------------------------------------

Version: 3.85 Wed 23-Nov-94        Richard Manby                 

s.Arm600 change the ROM speed for Morris to fast burst mode.

---------------------------------------------------------------------------

Version: 3.86 Wed 30-Nov-94        Steve Cormie                  

* s.ARM600 - Fixed MED-03854, enable MMUC_F bit in MMU control register by
  default (actually ARM700 specific so that coprocessors run at FCLK speed,
  has no effect on 6xx processors).

---------------------------------------------------------------------------

Version: 3.87 Thu 01-Dec-94        Richard Manby                 

* TestSrc.Begin - Fixed MED-03956, On Morris, change clock dividers and ROM
  access speed from power-on defaults (ie slow) to sensible values.

* s.PMF.osinit add Stork detection to Kernel.

---------------------------------------------------------------------------

Version: 3.88 Fri 02-Dec-94        Richard Manby                 

* s.MemInfo - Changed OS_Memory 7 and OS_Memory 8 to return new larger
  4MByte ROM size.

---------------------------------------------------------------------------

Version: 3.89 Tue 06-Dec-94        Steve Cormie                  

* s.Utility - Fixed MED-03685: Fixed bugs in OneModuleK where if the total
  length of all commands exceeded the buffer size (512 bytes claimed from
  stack) then the stack was corrupted.
* s.Arthur3 - Fixed MED-04034: New lines required after *Status and *Configure
  title strings.

---------------------------------------------------------------------------

Version: 3.90 Wed 07-Dec-94        Steve Cormie                  

* s.Utility - Oops, fixed the fix in version 3.89.

---------------------------------------------------------------------------

Version: 3.91 Mon 12-Dec-94        Steve Cormie                  

* s.ModHand - Added 6 more bytes for unplugging modules.

---------------------------------------------------------------------------

Version: 3.92 Thu 15-Dec-94        Alan Glover                   

* s.vdu.vdugrafh - this oops lark is contagious. Really do the changes I
  claimed for 3.51 to fix MED-03090. They got lost when I merged three
  sources together.
  
---------------------------------------------------------------------------

Version: 3.93 Mon 19-Dec-94        Richard Manby                 

* s.ChangeDyn - put a fix in code for shrinking doubly mapped dynamic areas.

---------------------------------------------------------------------------

Version: 3.94 Wed 21-Dec-94        Richard Manby                 

* POST code bug fix in SoundIRQ test shown up by version 2 Morris chips.

---------------------------------------------------------------------------

Version: 3.95 Mon 09-Jan-95        Steve Cormie                  

* s.NewReset - CMOS clearing code skipped 2 bytes after YearCMOS now used for
  unplugging ROM modules (used to be MonthCMOS and YearCMOS, only used for
  A500s).

---------------------------------------------------------------------------

Version: 3.96 Thu 12-Jan-95        Graham Simms                  

* s.vdu.vdugrafi - Fixed MED-04130. The SpriteOp 'Flip about x axis' was creating
  New format sprites with LH wastage in both the mask and sprite data when a new
  format sprite with RH wastage was flipped.
  
---------------------------------------------------------------------------

Version: 3.97 Thu 12-Jan-95        Richard Manby                 

* s.NewReset - Fixed MED-04318 year defaults to 1995 onwards

---------------------------------------------------------------------------

Version: 3.98 Thu 19-Jan-95        Steve Cormie                  

* s.Kernel - Fixed MED-04367: R9 was being corrupted by ExtensionSWI handler
  before calling the module SWI handler (PRM says that R0-R9 are passed from
  the SWI caller). This has been broken for a long time (it is also present
  in RISC OS 3.11 and possibly earlier).

---------------------------------------------------------------------------

Version: 3.99 Fri 20-Jan-95        Alan Glover                   

* s.vdu.vdugrafe, s.vdu.vdugrafdec, s.getall, hdr.kernelws - Fix MED-00001:
  Flood fill now attempts to use rma, and use two-word entries in the queue
  allowing it to overcome the old 1024 line limit.
* s.getall, s.morris - add warning messages when switch settings indicate
  a version is being built that can't be tested by soft-loading on a RiscPC
  (guess who fell for it!).
* s.getall, hdr.kernelws - Add Audit trial debugging for MED-00001: this should
  be turned off (med_00001_debug) in s.getall once the fix has been tested
* hdr.riscos - change a character in a comment which objasm was sulking about    

---------------------------------------------------------------------------

Version: 4.00 Fri 27-Jan-95        Richard Manby                 

* Kernel.s.PMF.osbyte changed INKEY-256 value from &A5 to &A6
  MED-04451

---------------------------------------------------------------------------

Version: 4.01 Wed 01-Feb-95        Richard Manby                 

* Kernel.s.NewIRQs changed default IRQ2V handler to cope with unclaimed
  interrupts from IRQ D (new for Morris), ie PS2 mouse port interrupts.

  Fixes MED-04355

---------------------------------------------------------------------------

Version: 4.02 Wed 01-Feb-95        Steve Cormie                  

* Fixed MED-04483: Message "NumParm" should have remained in the
  Global.Messages file.

---------------------------------------------------------------------------

Version: 4.03 Mon 06-Feb-95        Steve Cormie                  

* hdr.KernelWS, hdr.PublicWS, s.ChangeDyn - Fixed MED-04443 (hopefully!),
  SVC stack increased in size to 12K.

---------------------------------------------------------------------------

Version: 4.04 Mon 06-Feb-95        Richard Manby                 

* s.ModHand Fixed MED-04173. *Unplug now checks to see whether a module is
  active before killing it.

---------------------------------------------------------------------------

Version: 4.05 Tue 07-Feb-95        Steve Cormie                  

* hdr.KernelWS, hdr.PublicWS - Removed the change made in version 4.03.
  SVC stack size moved back to 8K as changing it makes other modules
  eg. FileSwitch, no longer work on older operating systems.

---------------------------------------------------------------------------

Version: 4.06 Tue 07-Feb-95        Richard Manby                 

* s.PMF.osinit

Optimisation: New routine Configure37C665 used instead of Configure82C710.
Since all the machines that Black is targetted for use the SMC 665, there is
no point assembling code that can cope the 82C710/82C711 as well.

For Stork: Added code to initialise various PowerControl latches so that
the machine powers up to a sensible state and will function (sort of) if
the portable module is unplugged.

---------------------------------------------------------------------------

Version: 4.07 Wed 08-Feb-95        Steve Cormie                  

* s.Arthur2 - Fixed MED-04528: OS_SetVarVal code was looking up the error
  "String not recognised" (returned from OS_GSRead) when it did not need to.

---------------------------------------------------------------------------

Version: 4.08 Mon 13-Feb-95        Steve Cormie                  

* Fixed MED-03651: Changed default Econet protection mask on CMOS reset.

---------------------------------------------------------------------------

Version: 4.09 Wed 15-Feb-95        Steve Cormie                  

* hdr.KernelWS - Part of fix for MED-04611: Added CLibCounter for use by
  Shared C Library tmpnam function.

---------------------------------------------------------------------------

Version: 4.10 Wed 15-Feb-95        Richard Manby                 

* s.GetAll } Conditionally changed the RISC PC ROM speed setting code
* s.ARM600 } to set burst mode ROM access. See flag RISCPCBurstMode.
             If false, this will generate non-burst mode code as used
             by all earlier versions.

---------------------------------------------------------------------------

Version: 4.11 Thu 16-Feb-95        Richard Manby                 

* s.Kernel Fixed stack inbalance in SWI despatch code - Pull "R9" 
executed prior to entering modules made conditional on actually calling
the code, as if code is not called, we drop into VectorUserSWI code
which also pulls R9. Fixes MED-04655.

---------------------------------------------------------------------------

Version: 4.12 Tue 28-Feb-95        Richard Manby                 

* s.ARM600 Amount of space allowed for screen limited to 16MByte (as
requested by Tim Dobson).

---------------------------------------------------------------------------

Version: 4.13 Wed 01-Mar-95        Richard Manby                 

* s.ARM600 Code added to check processor type before setting burst mode on
a RISC PC. If processor type is ARM710, burst mode cannot be used.
Any other processor, ie ARM610, ARM710A etc uses burst mode.
NB This has no effect on Morris which uses seperate code.

* s.Morris - altered conditional to switch proper Morris start code in as the
default, rather than the code for early damaged Morris'.

---------------------------------------------------------------------------

Version: 4.14 Wed 01-Mar-95        Richard Manby                 

* s.GetAll Flag RISCPCBurstMode set true.


---------------------------------------------------------------------------

Version: 4.15 Thu 02-Mar-95        Aideen McConville             

* s.GetAll Flag RISCPCBurstMode set false.

---------------------------------------------------------------------------

Version: 4.16 Mon 06-Mar-95        Richard Manby                 

* s.ARM600 zeroed VRAMSize for Morris based machines - fixes DForths bug MED-?????
  also, after inspection of RPC code, initialised IOMD_VIDEND.

---------------------------------------------------------------------------

Version: 4.17 Tue 07-Mar-95        Alan Glover                   

* s.GetAll: Turn off the MED-00001 audit trail flag.

---------------------------------------------------------------------------

Version: 4.18 Wed 08-Mar-95        Richard Manby                 

* s.ARM600 In Morris specific IOMD register initialisation code - VIDMUX
  register set for 'Japanese' format sound DAC's, cos Kryten and Stork
  both now have 16 sound.

* s.NewReset CMOS RAM reset code now sets 16bit sound for all Morris based
  machines and RISC PC's that look like Sugar/Rimmer. Normal RISC PCs set
  for 8bit sound.

  Above two changes fix MED-04831 and MED-04646.

* s.os.osinit Fixed Stork detection code.


---------------------------------------------------------------------------

Version: 4.19 Wed 08-Mar-95        Richard Manby                 

* s.NewReset Fix Sugar/Rimmer detector (change some LDRB's to LDR's).

---------------------------------------------------------------------------

Version: 4.20 Fri 10-Mar-95        Steve Cormie                  

* s.Kernel, s.GetAll: Conditioned out fix for R9 corruption in ExtensionSWI
  handler (conditional on FixR9CorruptionInExtensionSWI) because CC's
  !SpellMod and possibly others rely on broken behaviour.
* s.NewReset: Added default CMOS configuration for CDROMFSCMOS.

---------------------------------------------------------------------------

Version: 4.21 Mon 13-Mar-95        Aideen McConville             

* Version set to 3.60 (13-Mar-95) for external release.

---------------------------------------------------------------------------

Version: 4.22 Wed 15-Mar-95        Aideen McConville             

* Version set to 3.60 (15-Mar-95) to differentiate changed release.

  Changed modules:
    Free      (0.30) - new version
    FileCore  (2.89) - new version
    ADFS      (3.12) - new version
    ADFSFiler (0.83) - rebuilt with new Hdr:FileCore
    RAMFS     (2.11) - rebuilt with new Hdr:FileCore

---------------------------------------------------------------------------

Version: 4.23 Mon 20-Mar-95        Aideen McConville             

* Version set to 3.60 (20-Mar-95) to differentiate changed release.

  Changed modules:
    ColourPicker (0.35) - rebuilt with Lib.Support (0.10) - MED-04986
    DrawFile     (1.46) - rebuilt with Lib.Support (0.10) - no functional change
    BootCmds     (1.14) - rebuilt with Lib.Support (0.10) - no functional change
    SpriteExtend (0.98) - MED-05018
    Internet     (4.02)
    Freeway      (0.22)
    ShareFS      (2.34)

---------------------------------------------------------------------------

Version: 4.24 Wed 22-Mar-95        Aideen McConville             

* Version set to 3.60 (22-Mar-95) to differentiate changed release.

  Changed modules:
    ColourPicker (0.36) - MED-04985 (built with Lib.Support 0.11)
    ATAPI        (1.21)
    Freeway      (0.23)

---------------------------------------------------------------------------

Version: 4.25 Fri 24-Mar-95        Aideen McConville             

* Version set to 3.60 (24-Mar-95) to differentiate changed release.

  Changed modules:
    ADFS         (3.13) - MED-05030
    ATAPI        (1.22)
    CDFSFiler    (2.39) - MED-04687
    PS2Driver    (0.14) - MED-04434, MED-04838

---------------------------------------------------------------------------

Version: 4.27 Tue 04-Apr-95        Aideen McConville             

* Version set to 3.60 (31-Mar-95) to differentiate changed release.

  Changed modules:
    ATAPI        (1.23)
    FileCore     (2.91)
    SpriteExtend (0.99)
    !Printers    (1.46)
    Toolbox      (1.36)
    Internet     (4.03)
    Freeway      (0.24)

---------------------------------------------------------------------------

.....................................
Changes since previous release follow
.....................................

Version: 4.28 Thu 13-Apr-95        Aideen McConville             

* Version set to 3.60 (13-Apr-95) to differentiate changed release.

  Changed modules:
    CDFSFiler    (2.40)
    PDModules    (4.35) - PDriverPS, PDriverDP

***************************************************************************
                      Black - RISC OS 3.60 (4.28) build
***************************************************************************


===============================================================================

=======================================
NFS::riscos_bl.$.Sources.OS_Core.Squash
=======================================

Version: 0.22 Thu 05-May-94        Steve Cormie                  

* Fixed bug in fast compression code which could corrupt large files
  with a certain type of data eg. Sprite files.
* Made sources vastly more readable.

---------------------------------------------------------------------------

Version: 0.23 Mon 25-Jul-94        Aideen McConville             

* s.statics - removed BSS from AREA line.
  This allows the code to assemble with objasm 2.21 and later.
  Makes no difference to object produced.

* Makefile - C flag -zm0 replaced by the more usual form -zM.

  No functional change.

---------------------------------------------------------------------------

Version: 0.24 Mon 31-Oct-94        Steve Cormie                  

* Added directed comments to Messages file for message tokenisation.

***************************************************************************
                      Black - RISC OS 3.60 (4.28) build
***************************************************************************


===============================================================================

=====================================================
NFS::riscos_bl.$.Sources.OS_Core.Video.Render.Colours
=====================================================

Version: 1.62 Mon 25-Apr-94        Alan Glover                   

Fix bug MED-03007 - a register corruption introduced in the MED-02882
work. This fix was put together during the Medusa freeze, but not
included in the image, hence the difference between the date above and the
date of the version file.

---------------------------------------------------------------------------

Version: 1.63 Fri 28-Oct-94        Steve Cormie                  

* Added directed comments to Messages file for message tokenisation.
* Moved command help/syntax from Global.Messages to Messages file.

---------------------------------------------------------------------------

Version: 1.64 Fri 10-Mar-95        Graham Simms                  

* Changed the way the ROM tables were built. ColourTrans is now used to
  create the tables which gives better results, especially in 4bpp desktop
  palette modes.

Changed:
  Makefile
  MkTables.dosqueeze
Added:
  MkTables.c.maketables
Removed:
  Old Basic files for creating tables in MkTables directory

***************************************************************************
                      Black - RISC OS 3.60 (4.28) build
***************************************************************************


===============================================================================

==================================================
NFS::riscos_bl.$.Sources.OS_Core.Video.Render.Draw
==================================================

Version: 1.08 Mon 31-Oct-94        Steve Cormie                  

* Added directed comments to Messages file for message tokenisation.

---------------------------------------------------------------------------

Version: 1.09 Tue 15-Nov-94        Aideen McConville             

* COMPONENT renamed 'DrawMod' in Makefile.
  Also Expects to find Resources in Resources:$.Resources.DrawMod.
  Avoids confusion with Draw application.

  Changed files: Makefile
                 s.DrInter

---------------------------------------------------------------------------

No new Version: Tue 03-Jan-95        Aideen McConville             

* Small update to Makefile to export hdr file correctly (name confusion)

***************************************************************************
                      Black - RISC OS 3.60 (4.28) build
***************************************************************************


===============================================================================

======================================================
NFS::riscos_bl.$.Sources.OS_Core.Video.Render.DrawFile
======================================================

Version: 1.31 Thu 06-Oct-94        JCoxhead                      

 * Use error number 0x1E8 for BadSWI.

 * Use error numbers defined by DrawFile.def.

 * Add drawfile_RENDER_GIVEN_FLATNESS and an extra register specified on
entry to DrawFile_Render.

 * Removed use of xosspriteop_plot_mask_trfm() (not supported by printer
drivers).

 * Fix bug in render decoding of DrawFile styles into Draw ones. Speed
up, compact a bit.

 * Add Render *command.

 * Use 'finalisation-code' section in CMHG file.

 * Uses callbacks that can return errors, and use the errors to detect
whether to render a text line using system text.

 * Possible future enhancements: JPEG objects, Service_RenderFile,
special file- rendering mode, which does not read the whole thing into
memory before it starts.

---------------------------------------------------------------------------

Version: 1.32 Mon 28-Nov-94        JCoxhead                      

 * Makefile changes to for Black/Aquarius build.

***************************************************************************
*                                                                         *
*  Project: black                                                         *
*                                                                         *
*  Module:  DrawFile                                                      *
*                                                                         *
*  Created: Mon 28-Nov-94      By: Aideen McConville                      *
*                                                                         *
*  First version: 1.32                                                    *
*                                                                         *
*    Copyright:    (C) 1994, Acorn Computers Ltd., Cambridge, England.    *
*                                                                         *
***************************************************************************

Purpose:
========



***************************************************************************


Change Log:
===========


---------------------------------------------------------------------------

Version: 1.32 Mon 28-Nov-94        Aideen McConville             

Moved to Black Source tree.

---------------------------------------------------------------------------

Version: 1.40 Thu 01-Dec-94        JCoxhead                      

 * Added Service_DrawObjectRender and Service_DrawObjectDeclareFonts.
 * Added support for JPEG objects.

---------------------------------------------------------------------------

Version: 1.41 Mon 12-Dec-94        Aideen McConville             

 * Minor modifications for ROM build

 Changed files:
     Makefile
     c.main    (added extra #ifdef STANDALONE)
     cmhg.header

---------------------------------------------------------------------------

Version: 1.42 Mon 09-Jan-95        JCoxhead                      

 * Added header310.cmhg, message310.resources.

---------------------------------------------------------------------------

Version: 1.43 Wed 11-Jan-95        Aideen McConville             

 * Updated Makefile to allow building of both 3.10 and post 3.10
   versions.
   Created: Mk310
            oSA    (dir)
            rm.310 (dir)

---------------------------------------------------------------------------

Version: 1.44 Mon 27-Feb-95        JCoxhead                      

 * No changes, really.

---------------------------------------------------------------------------

Version: 1.45 Tue 07-Mar-95        JCoxhead                      

 * Fix MED-4786: use the right entries for palettes < 16 entries. Also, get
the "true" Wimp palette.


AMcC: (10-Mar-95): Updated def.DrawFile (from OSLib)

---------------------------------------------------------------------------

Version: 1.46 Fri 10-Mar-95        Aideen McConville             

 * Fixed build problem:

   Removed h.jpeg       (now in OSLib)
   Removed h.drawfile   (now in OSLib)
   Updated Makefile

***************************************************************************
                      Black - RISC OS 3.60 (4.28) build
***************************************************************************


===============================================================================

===========================================================
NFS::riscos_bl.$.Sources.OS_Core.Video.Render.Fonts.Manager
===========================================================

Version: 3.30 Wed 31-Aug-94        Alan Glover                   

Fix bug MED-01803 - font cache will not shrink below 32K unless it can
shrink down to 0K.

---------------------------------------------------------------------------

Version: 3.31 Thu 22-Sep-94        Steve Cormie                  

* Fix MED-03704: text for *status output and *fontlist output now looked up
 in Fonts.Messages file.

---------------------------------------------------------------------------

Version: 3.32 Thu 13-Oct-94        Aideen McConville             

* hdr.Fonts - removed Super SWI defs (now in Hdr:Super)
  s.Fonts   - added GET Hdr:Super

---------------------------------------------------------------------------

Version: 3.33 Fri 28-Oct-94        Steve Cormie                  

* Added directed comments to Messages file for message tokenisation.
* Moved command help/syntax from Global.Messages to Messages file.

***************************************************************************
                      Black - RISC OS 3.60 (4.28) build
***************************************************************************


---------------------------------------------------------------------------

.....................................
Changes since previous release follow
.....................................


===============================================================================

============================================================
NFS::riscos_bl.$.Sources.OS_Core.Video.Render.Fonts.ROMFonts
============================================================


===============================================================================

=======================================================
NFS::riscos_bl.$.Sources.OS_Core.Video.Render.Hourglass
=======================================================

Version: 2.11 Tue 28-Jun-94        Aideen McConville             

* s.Module: No longer uses deprecated Hdr file EcoMacros.

* Makefile updated with some development/release rules (equivalent
  to old Obey files: Asmbl200, Assemble, Make200 etc).

* PercentTst moved to new Test directory.


Functionally equivalent to 2.10.

***************************************************************************
                      Black - RISC OS 3.60 (4.28) build
***************************************************************************


===============================================================================

======================================================
NFS::riscos_bl.$.Sources.OS_Core.Video.Render.ScrBlank
======================================================

Version: 2.17 Fri 28-Oct-94        Steve Cormie                  

* Added directed comments to Messages file for message tokenisation.
* Moved command help/syntax from Global.Messages to Messages file.

***************************************************************************
                      Black - RISC OS 3.60 (4.28) build
***************************************************************************


---------------------------------------------------------------------------

.....................................
Changes since previous release follow
.....................................


===============================================================================

=======================================================
NFS::riscos_bl.$.Sources.OS_Core.Video.Render.SprExtend
=======================================================

Version: 0.62 Thu 26-May-94        Alan Glover                   

Begin Black implementation. Wide Translation tables now supported on
PutSpriteScaled and PlotSpriteTransformed. Direct plot from palette
behaviour removed totally. William Turner's new 1bpp mask routines
incorporated.

---------------------------------------------------------------------------

Version: 0.63 Fri 12-Aug-94        Graham Simms                  

MAJOR CHANGE.
William Stoye's new Sprite Extend 2 code used. This involves a total rewrite
of the putscaled engine, and the support for JPEG images. This code is a
modification of version 0.53 of SpriteExtend with the changes since then ported
to the new code, it needs thorough testing.

4 JPEG SWIs added. JPEG_Info, JPEG_FileInfo, JPEG_PlotScaled 
and JPEG_PlotFileScaled.
---------------------------------------------------------------------------

Version: 0.64 Fri 12-Aug-94        Graham Simms                  

Changed c.rojpeg so that CFSI-jpeg builds correctly.
---------------------------------------------------------------------------

Version: 0.65 Fri 12-Aug-94        Aideen McConville             

 * Makefile - standardised
   Added directory 'data'  (for CFSI-jpeg)
   Added directory 'utils' (for genpalette etc)

 * Sources.SprExtend - set standalone flag false

 * Version - updated to 0.65

---------------------------------------------------------------------------

Version: 0.66 Fri 12-Aug-94        Aideen McConville             

 * Makefile - fixed typo

---------------------------------------------------------------------------

Version: 0.67 Fri 12-Aug-94        Aideen McConville             

 * Ensure that 'ROM' versions use Messages from Resources:
   Changed Files: Sources.SprExtend
                  Sources.MsgCode
                  Sources.LocalMsgs (new)
                  Makefile
                  Version (0.67)

---------------------------------------------------------------------------

Version: 0.68 Tue 30-Aug-94        Graham Simms                  

Fixed bug in plotmaskscaled, which used an ECF pattern in an obscure way and always
assumed that a sprite would have a mask....

Added three new SWIs to SpriteExtend:
  JPEG_PDriverIntercept - Called by PDriver to set up interception of JPEG plot SWIs
  JPEG_PlotTransformed - Skeleton implementation of proposed SWI.
  JPEG_PlotFileTransformed - "          "        "      "     ".
  
Added extra error to Messages file.
---------------------------------------------------------------------------

Version: 0.69 Fri 02-Sep-94        Graham Simms                  

Fixed bug where registers weren't preserved in JPEG_FileInfo.

Changed JPEG_Plot SWIs so that dithering was switchable by using the
relevant flag.
---------------------------------------------------------------------------

Version: 0.70 Thu 15-Sep-94        Graham Simms  
                
Implemented JPEG_PlotTransformed SWI

Added switch to PutSpriteScaled to allow dithering of 16bpp+ sprites

Fixed bug where word aligned JPEGS were not printed with the correct width.

---------------------------------------------------------------------------

Version: 0.71 Mon 19-Sep-94        Graham Simms                  

Added extra bit to JPEG_PDriverIntercept SWI so tranaslation table is always used when printing.

Fixed bug where plotting sprites with 1bpp masks into 16bpp mode sometimes corrupted with 
non-aligned data.

---------------------------------------------------------------------------

Version: 0.72 Thu 22-Sep-94        Graham Simms                  

Changed behaviour of Plotscaled when a NULL scale factors pointer is passed.

Fixed bug in JPEG_PlotTransformed when x or y co-ordinate was -ve.

Added Error handling for C plotscaled engine. 

---------------------------------------------------------------------------

Version: 0.73 Mon 26-Sep-94        Graham Simms                  

Fixed bug where JPEG_PlotScaled junked r0.

Implemented JPEG_PlotFileTrnasformed SWI.

Corrected scaling in JPEG_PlotTransformed, it now correctly converts a OS units to OS units
magnification into a Pixels to Pixels magnification which is required by JPEG_PlotScaled.

---------------------------------------------------------------------------

Version: 0.74 Thu 29-Sep-94        Graham Simms                  

Impletmented Sprite_Reason CheckSpriteArea

Added extra return parameter to JPEG_Info SWIs. They now return the memory required in R6.

***All BLACK Functionality complete****

---------------------------------------------------------------------------

Version: 0.75 Fri 07-Oct-94        Graham Simms                  

Fixed bug when plotting sprites with 1bpp masks, not word aligned.

Made SpriteExtend putScaled plot from palette when R5:b4 is set.

---------------------------------------------------------------------------

Version: 0.76 Thu 20-Oct-94        Graham Simms                  

Added speed-ups to new plotscaled engine when plotting sprites at
large scales. This was because the performance was significantly
worse than the old engine in version 0.62.
---------------------------------------------------------------------------

Version: 0.77 Tue 25-Oct-94        Graham Simms                  

Made operation of 'dither' flag consistent when error-diffusing JPEGS

Added an error when Sprite 'PutSpriteGreyScaled' is called

---------------------------------------------------------------------------

Version: 0.78 Sat 29-Oct-94        Aideen McConville             

* Added hdr.SprExtend: contains SWI definitions; exported by Makefile

* Makefile: now copies data.CFSIjpeg to !ChangeFSI.CFSIjpeg at install time (disc)

---------------------------------------------------------------------------

Version: 0.79 Mon 31-Oct-94        Steve Cormie                  

* Added directed comments to Messages file for message tokenisation.

---------------------------------------------------------------------------

Version: 0.80 Tue 01-Nov-94        Graham Simms                  

* Fixed bug in Sources.SprExtend where SpriteOp 35 (Append Sprite) was
  junking r0 when returning an error.

---------------------------------------------------------------------------

Version: 0.81 Fri 11-Nov-94        Graham Simms                  

* c.rojpeg: Stopped JPEG_FileInfo from grabbing a 1k buffer and not returning it...

* Sources.SprExtend: Stopped error when trying to plot a JPEG without a translation table
                     which means that it works on pre RO3.5 machines.

---------------------------------------------------------------------------

Version: 0.82 Tue 15-Nov-94        Graham Simms                  

* Sources.SprExtend: Fixed Bug where PlotMaskScaled was only allowing for 8 bits of bg colour
			     

* c.PutScaled      : Fixed Bug where plotting with 'plot action' AND was zeroing out all other
		     pixels in a word.

---------------------------------------------------------------------------

Version: 0.83 Mon 21-Nov-94        Graham Simms                  

* c.SpriteOp       : Fixed bug in OS_SpriteOp CheckSpriteArea where it was being slightly too
		     pessimistic.
* c.rojpeg         : Added compiler flags so that CFSIjpeg compiles correctly.

---------------------------------------------------------------------------

Version: 0.84 Thu 24-Nov-94        Graham Simms                  

* Sources.SWIs     : Fixed bug where JPEG_PlotTransformed didn't forbid -ve scale factors. in Sources.SWIs

* Sources.SprExtend:
  Sources.SWIs
  c.rojpeg
  c.PutScaled      :Made SpriteExtend use a dynamic area to hold the JPEG workspace.

* Sources.CSupport :
  c.PutScaled      : Internationalised name of Dynamic Area. 

* Added 'DynName' token to Messages file as the Name of the Dynamic Area.

---------------------------------------------------------------------------

Fri 25-Nov-94 Aideen McConville: Makefile - use cc410, link411 (no new version made)

---------------------------------------------------------------------------

Version: 0.85 Mon 28-Nov-94        Graham Simms                  

* Sources.CSupport
  Sources.PutScaled : Moved create_dynamic_area function from Sources.Csupport so 
                      that CFSIjpeg compiles.

* Sources.SprExtend
  c.PutScaled       : Fixed bug in SpriteOp PaintCharScaled, where both the colour used 
                      for the plot and the plotting action were being junked.

---------------------------------------------------------------------------

Version: 0.86 Thu 01-Dec-94        Graham Simms                  

* c.SpriteOp        : Fixed small semantic bugs in checks performed by OS_SpriteOp CheckSpriteArea

* Sources.SWIs      : Stopped OS_SpriteOp CheckSpriteArea junking r12. 

---------------------------------------------------------------------------

Version: 0.87 Fri 02-Dec-94        Graham Simms                  

* c.PutScaled       : Fixed bug MED-04026. Where plotting Old Format 1bpp Sprites with a mask was failing.

---------------------------------------------------------------------------

Version: 0.88 Wed 07-Dec-94        Graham Simms                  

* c.Putscaled       : Fixed bug where a non-zero plot action was always plotted as plot action 0. 
                      The speed optimised code for scale factors >4 doesn't work, so the code now 
                      reverts to the non-optimised code in this case. This fixes MED-03952 and MED-03968.

---------------------------------------------------------------------------

Version: 0.89 Fri 16-Dec-94        Graham Simms                  

* c.SpriteOp        : Changed functionality of OS_SpriteOp CheckSpriteArea so that a sprite's mask 
                      has to be either 1bpp for new sprites or the same size as the sprite image.
* c.PutScaled       : Fixed bug introduced into version 0.88 for plotting at 5:1+ scale without a mask. Ooops.

---------------------------------------------------------------------------

Version: 0.90 Wed 01-Feb-95        Graham Simms                  

* Sources.SWIs
  c.Putscaled       : Added extra bit to JPEG_Plot(File)Scaled SWIs to allow error-diffused dithering

* Sources.SWIs      : Made JPEG SWIs error when invalid flag bits are set.

* c.putscaled       : made trace code not divide by immediate constant 10. This stops cc505 using the
                      optimised divide routine.
                     
* Makefile          : Updated to use cc5.05 by running the generated assembler through 'Sed' to make it aasm
                      compatible.
                      
---------------------------------------------------------------------------

Version: 0.91 Thu 09-Feb-95        Graham Simms                  

* c.Putscaled       : Fixed MED-04481 where all plot actions except 'Set' were failing for scaling > 1:1 
                      in 16M colour modes

* Sources.SprExtend : Fixed MED-04508 where an invalid spritearea pointer was causing a crash even when 
                      it was not required in the spriteOp.

* Sources.SWIs      : Made JPEG_PlotFileScaled successfully return when invalid flag bits set.

---------------------------------------------------------------------------

Version: 0.92 Mon 13-Feb-95        Graham Simms                  

* c.Putscaled       : Fixed MED-04131 where JPEG files with pixel sizes of ratio 0:0 were causing a divide by
                      zero error. A 0:0 ratio is now interpreted as 1:1, which returns as 90:90 dpi.

* Makefile          : altered so that CFSIjpeg compiles with new C compiler.

---------------------------------------------------------------------------

Version: 0.93 Wed 15-Feb-95        Graham Simms                  

* Sources.SprExtend
  c.PutScaled       : Fixed MED-04158 where the PutScaled blitter was running out of registers when 
                      you plotted a new format sprite <=8bpp, with a mask into a 16bpp mode plotting 
                      directly from the palette (phew!). SpriteExtend now converts the palette to 16bpp
                      and sticks it in the space resevered for the creation of a translation table. 
                      This avoids the need for conversion on the fly which requires 2 temporary registers.

---------------------------------------------------------------------------

Version: 0.94 Fri 24-Feb-95        Graham Simms                  

* h.jinclude
  h.rojpeg
  c.rofpeg
  c.PutScaled
  Sources.SprExtend
  Sources.diffuse   : Made error diffusion work with an arbitary palette held in 'newtranstable' a 
                      pointer to which is stacked before entering the diffusion code. I Investigated which 
                      palettes were unsuitable for error-diffusion and came to the conclusion that the 
                      error-diffused result was always superior to the ordered-dither.
                      This Fixes bug MED-04727.

---------------------------------------------------------------------------

Version: 0.95 Fri 24-Feb-95        Graham Simms                  

* Sources.SprAdjSize : Checked in changes made in December but overlooked (oops!).
                       Fixes MED-04141, MED-03966 and  MED-03967


---------------------------------------------------------------------------

Version: 0.96 Mon 27-Feb-95        Graham Simms                  

* Sources.SprExtend : Fixed bug where optimised code for scales >4:1 failed with obscure values 
                      eg 575:115 which draw supplied! This is fixed by trying to rationalise 
                      the scale factors near the beginning of a sprite plot.

---------------------------------------------------------------------------

Version: 0.97 Tue 28-Feb-95        Graham Simms                  

* c.PutScaled       : Fixed bug when outputting to 32bpp mode with large output scales.

* c.rojpeg
  sources.diffuse   : Removed warnings and error from CFSIjpeg compilation. Fixes MED-04643

---------------------------------------------------------------------------

Version: 0.98 Fri 17-Mar-95        Graham Simms                  

* c.PutScaled       : Fixed bug MED-05018. r_xcount was not being initialised with 16bpp 
                      source and dither bit set.

---------------------------------------------------------------------------

Version: 0.99 Wed 29-Mar-95        Graham Simms                  

* c.PutScaled
  Sources.SprExtend : Fixed bug MED-05084. Redone the plotmask code to use the ECF AND & 
                      EOR mask in the kernel. This has to be done because when doing a 
                      PaintCharScaled of a delete char. the kernel sneakily replaces the 
                      foreground colour with the background one to make it work. 

***************************************************************************
                      Black - RISC OS 3.60 (4.28) build
***************************************************************************


===============================================================================

========================================================
NFS::riscos_bl.$.Sources.OS_Core.Video.Render.SpriteUtil
========================================================

Version: 1.10 Fri 28-Oct-94        Steve Cormie                  

* Added directed comments to Messages file for message tokenisation.
* Moved command help/syntax from Global.Messages to Messages file.

***************************************************************************
                      Black - RISC OS 3.60 (4.28) build
***************************************************************************


===============================================================================

===================================================
NFS::riscos_bl.$.Sources.OS_Core.Video.Render.Super
===================================================

Version: 0.09 Thu 13-Oct-94        Aideen McConville             

Now has its own hdr file listing SWIs (previously in Font Manager's hdr).

***************************************************************************
                      Black - RISC OS 3.60 (4.28) build
***************************************************************************


===============================================================================

======================================================
NFS::riscos_bl.$.Sources.OS_Core.Video.Render.jcompmod
======================================================

Version: 0.03 Wed 23-Nov-94        Graham Simms                  

* First version moved onto Source Filer.
---------------------------------------------------------------------------

Version: 0.04 Fri 25-Nov-94        Aideen McConville             

* Updated Makefile for Black build system.
  Builds non-tracing version by default.

---------------------------------------------------------------------------
AMcC 12-Dec-94: Set correct Access perms in install rule (No new Version)

---------------------------------------------------------------------------

Version: 0.05 Tue 17-Jan-95        Graham Simms                  

* Fixed MED-04333 where when the modules ran out of buffer space to place
  the JPEG in, it crashed returning a random fatal error instead of "Ran out
  of memory".
  
Files Altered:
  c.jcompmod
  cmhg.header
  
***************************************************************************
                      Black - RISC OS 3.60 (4.28) build
***************************************************************************


===============================================================================

====================================================
NFS::riscos_bl.$.Sources.OS_Core.Video.UserI.Display
====================================================

Version: 0.29 Wed 03-Aug-94        Steve Cormie                  

* Fixed MED-03376: menu building broken if last (or only) mode was unnamed.

---------------------------------------------------------------------------

Version: 0.30 Tue 30-Aug-94        Aideen McConville             

* s.Module
  s.ResFiles
  - Resource path changed from ..Resources.Modes
                            to ..Resources.Display

---------------------------------------------------------------------------

Version: 0.31 Fri 28-Oct-94        Steve Cormie                  

* Added directed comments to Messages file for message tokenisation.
* Moved command help/syntax from Global.Messages to Messages file.

---------------------------------------------------------------------------

Version: 0.32 Wed 21-Dec-94        Steve Cormie                  

* Fixed MED-04161: Look up version in Messages file rather than using module
  version string.

---------------------------------------------------------------------------

Version: 0.33 Wed 11-Jan-95        Steve Cormie                  

* Fixed MED-04297: Reworded invalid mode error message.

***************************************************************************
                      Black - RISC OS 3.60 (4.28) build
***************************************************************************


===============================================================================

===================================================
NFS::riscos_bl.$.Sources.OS_Core.Video.UserI.Picker
===================================================

Version: 0.18 Fri 19-Aug-94        JCoxhead                      

 * All Medusa patches incorporated as source fixes.

 * Fix bug for Aquarius: null events were being seen by pickers in the wrong
task.

 * Compile without -zM, add module-is-not-re-entrant to header.CMHG.
This results in 2 - 3 fewer instructions for static variable accesses.

 * Steppable_register() changed to take a pointer to a block, since this
avoids thrashing the stack.

 * Report errors in fewer places (a change to the callback library - every
callback should return an |os_error *| as well as having an argument |bool
&claimed|).

 * Make the models' callback lists per-dialogue, rather than 1 per model.
This means we don't have to check the task handle in |steppable_|'s null
handler, so that fix removed.

---------------------------------------------------------------------------

Version: 0.19 Mon 22-Aug-94        JCoxhead                      

 * Fixed bug: model data is redrawn when ColourPciker_UpdateDialogue changes
   it.

 * Fixed bug: colourpicker_IGNORE_HELP bit works.

---------------------------------------------------------------------------

Version: 0.20 Thu 01-Sep-94        JCoxhead                      

 * Changed '.' to intl variant. As a side-effect, the checking of invalid
input into the colour values slightly less good, but probably not enough for
anyone to notice.

 * Taken out registering of its own resources. Added a compile-time flag
-DSTANDALONE which builds a colourpicker that does register its own
resources, for testing.

 * Added international-help-file: "Resources:$.Resources.Picker.Messages" to
header.cmhg.

 * Use 'international:' help and syntax for ModelList command.

 * Fixed initialisation when no territory is present. (In fact, it does the
same as at present, but also reloads its resources on a
Service_TerritoryStarted.)

---------------------------------------------------------------------------

Version: 0.21 Tue 06-Sep-94        Aideen McConville             

 * Makefile - added a rule to export def.ColourPick to OSLib source dir.
            - Previous 'clean' rule now renamed 'clean_all'

 * !Clean   - does an amu clean_all

---------------------------------------------------------------------------

Wed 12-Oct-94    Aideen McConville

Added hdr.ColourPick (needed to generate swis.h)

No new version created

---------------------------------------------------------------------------

Version: 0.22 Wed 09-Nov-94        Steve Cormie                  

* Fixed reallocation of resources on Service_ResourceFSStarted or
  Service_TerritoryStarted.

---------------------------------------------------------------------------

Version: 0.23 Fri 11-Nov-94        JCoxhead                      

 * Various changes to reduce code size and memory requirements:

      New function helpreply() used by all 3 colour models.

      Model functions may be specified as null pointers.

      New file tables.c called from both R G B and H S V models.

 * Fixed handling of resources over Service_ResourceFSStarted,
Service_TerritoryStarted (completed by Steve Cormie).

---------------------------------------------------------------------------

Version: 0.24 Fri 11-Nov-94        JCoxhead                      

 * Removed a few now-pointless |*unclaimed = TRUE;|s in callbacks.

---------------------------------------------------------------------------

No new Version: Fri 02-Dec-94  AMcConville

 * Reinstated an uptodate Makefile

---------------------------------------------------------------------------

Version: 0.25 Tue 13-Dec-94        JCoxhead                      

 * Uses new (function-generating) ResGen.
 * Models don't tell the main module that the colour has changed when just
the caret moves. Means None is cancelled 
 * Report correct buffer sizes for colour model information.
 * Invent and implement Message_ColourPickerResetColourRequest.
 * Deselect Transparent when removing the None button.
 * Recode events on the slice icons using drags, and bound the pointer to the
icon.

---------------------------------------------------------------------------

No new Version: Tue 20-Dec-94     def.ColourPick added by JCoxhead
---------------------------------------------------------------------------

Version: 0.26 Wed 21-Dec-94        JCoxhead                      

 * Uses error diffusion with an error clamp of 102 in 16-colour modes.
 * Fixed bug: colourpicker_update_dialogue() did not update the dialogue
record bits that indicated the the status of offers_transparent or
transparent.
 * If NEWTABLE is set at compile time (which it is not, for a real build),
the colour picker exports a colourtrans 8-bit lookup table into ResourceFS.
This let me find the magenta = white fault in the colourtrans table builder,
and might be useful in future.
 * Exports colourpicker.def.

---------------------------------------------------------------------------

Version: 0.27 Wed 04-Jan-95        Aideen McConville             

 * Updated Makefile to build 3.10 compatible StandAlone version.
   Added Mk310
   Added cmhg.header310
   Updated version in cmhg.header
   Created new dir: oSA

---------------------------------------------------------------------------

Version: 0.28 Fri 06-Jan-95        Aideen McConville             

* Fix from Jonathan for MED-04279:
    Created a 3.10 compatible Messages file: Message310 (no ModelList tokens)
    Makefile updated.

---------------------------------------------------------------------------

Version: 0.29 Wed 11-Jan-95        JCoxhead                      

 * Slightly different order for update when a slider value changes.
 * Whenever the transient dialogue is closed, a check is made to see whether
it is open; if so, wimp_create_menu (wimp_CLOSE_MENU) is done before the
window is deleted. Fixes an Aquarius problem.
 * In ColourPicker_ReadDialogue, only set R2 to the buffer size if it was 0
on entry.
 * Add plinth to desktop icons in CMYK window.
 * Moved cyan slider 1 pixel in CMYK template.

---------------------------------------------------------------------------

Version: 0.30 Wed 11-Jan-95        JCoxhead                      

 * Added new bits ColourPicker_DialogueIgnoreKeyPressed and
ColourPicker_UpdateIgnoreKeyPressed.

---------------------------------------------------------------------------

Version: 0.31 Mon 16-Jan-95        NKelleher/JCoxhead          

 * bug fix: close_dialogue now checks for valid handle
 * 310 fix: now issues BorderUtils 0.05 service call 44ec5 when deleting 
window
 * reverted colour patch for rgb to use rectangles.
 * def.ColourPick - updated to latest version (from OSLib)

---------------------------------------------------------------------------

Version: 0.32 Tue 28-Feb-95        JCoxhead                      

 * Fixed various bugs that no message was sent if only the last component of
a colour changed.

---------------------------------------------------------------------------

Version: 0.33 Thu 02-Mar-95        JCoxhead                      

 * Only cancel None if the colour actually changed, according to new function
steppable_get_value(). .

---------------------------------------------------------------------------

Version: 0.34 Thu 09-Mar-95        JCoxhead                      

 * Fix bug in tables so that invalid pointers are not freed if ColourTrans
cannot find enough memory for its 32K tables.

---------------------------------------------------------------------------

Version: 0.35 Fri 10-Mar-95        JCoxhead                      

 * Now the patch isn't updated when you click on a desktop colour icon.
Mental note: must write more robust code ...

---------------------------------------------------------------------------

Version: 0.36 Tue 21-Mar-95        JCoxhead                      

 * Fix MED-4985: reads the value from the slider, converts it to a
percentage, and formats it into a string; then compares it with the text in
the icon. If they are different, the icon value is read and converted to a
value suitable for the slider.

***************************************************************************
                      Black - RISC OS 3.60 (4.28) build
***************************************************************************


===============================================================================

=====================================================
NFS::riscos_bl.$.Sources.OS_Core.Video.UserI.ScrModes
=====================================================

Version: 0.10 Tue 23-Aug-94        Steve Cormie                  

* Fix for MED-00079: now looks up command help/syntax in Global.Messages file.

---------------------------------------------------------------------------

Version: 0.11 Thu 13-Oct-94        Aideen McConville             

* Makefile - slight modification to rom_link rule.

---------------------------------------------------------------------------

Version: 0.12 Tue 18-Oct-94        Aideen McConville             

* ScrModes.c - Look for Resources in directory ScreenMode (not ScreenModes,
  which has 11 chars).

---------------------------------------------------------------------------

Version: 0.13 Fri 28-Oct-94        Steve Cormie                  

* Added directed comments to Messages file for message tokenisation.
* Moved command help/syntax from Global.Messages to Messages file.

***************************************************************************
                      Black - RISC OS 3.60 (4.28) build
***************************************************************************

.....................................
Changes since previous release follow
.....................................


===============================================================================

===========================================
NFS::riscos_bl.$.Sources.Printing.FontPrint
===========================================

Version: 1.26 Tue 31-Jan-95        Aideen McConville             

* Fix MED-04386: Makefile - !Sprites23 no longer installed
                 Templates - updated version and dates

AMcC (20-Mar-95): Makefile - install rule: set access for dir
No new version.

***************************************************************************
                      Black - RISC OS 3.60 (4.28) build
***************************************************************************


===============================================================================

===========================================
NFS::riscos_bl.$.Sources.Printing.PrintDefs
===========================================

Version: 0.66 Tue 08-Nov-94        Mike Stephens                 

Added PDF's for several printers.

  Added files:   PrntDefn.Canon.BI.BJC-4000
                 PrntDefn.Epson.BI.Stylus-Cmw
                 PrntDefn.Epson.BI.Stylus-Col
                 PrntDefn.HP.BI.DJ560C

  Changed files: Makefile
                 Version
                 UK.Canon
                 UK.Epson
                 UK.HP

Note that the new Stylus PDF's expect a palette file called "1" to be
in the !Printers system, and this should have a gamma of 0.4 (compared
with 0.6 for old palette file, "0").



---------------------------------------------------------------------------

Version: 0.67 Wed 30-Nov-94        Mike Stephens                 

Fixed omission of Stylus-Cmw in install.

Changed files: Version
               Makefile

---------------------------------------------------------------------------

Version: 0.68 Wed 30-Nov-94        Mike Stephens                 

Added Acorn JP-360 PDF, on the assumption that this printer
will be badged as an Acorn product (not confirmed yet).

Changed files: Version
               Makefile
               UK.Acorn
Added:         PrintDefn.Acorn.JP-360

---------------------------------------------------------------------------

Version: 0.69 Wed 14-Dec-94        Mike Stephens                 

Removed Acorn JP-360, as instructed in MED-03997 - wish this decision had
come a bit earlier!

You've guessed it ...

Changed files: Version
               Makefile
               UK.Acorn
Removed:       PrintDefn.Acorn.JP-360

---------------------------------------------------------------------------

Version: 0.70 Fri 03-Mar-95        Mike Stephens                 

Update Epson Stylus-Cmw and Stylus-Col to use new
special palette '2' at 720 dpi, and to outlaw halftoning at 720 dpi.

This is one of the changes required to fix MED-04517. (Also requires
PDumperSupport 1.18 and !Printers 1.44, to contain '2').



---------------------------------------------------------------------------

Version: 0.71 Thu 09-Mar-95        Mike Stephens                 

Fix the following:
  MED-04669 (additional info for Epson Stylus Color)
  MED-04756 (various Read_Me cock ups)
  MED-04757 (New PDF's for Epson Stylus Color)
  MED-04849 (Olivetti.Read_Me, for JP 360)

Added files: UK.Olivetti

Changed files: Makefile
               Version
               UK.Acorn
               UK.Canon
               UK.Epson
               UK.HP
               UK.Integrex
               UK.Manne-Tall
               UK.Star

---------------------------------------------------------------------------

Version: 0.72 Mon 20-Mar-95        Mike Stephens                 

Fix MED-05005 (HP Read_Me problems)

Changed files: Version
               UK.Read_Me
               UK.HP

---------------------------------------------------------------------------

Version: 0.73 Mon 20-Mar-95        Aideen McConville             

Makefile: install rule updated to explicitly set access permissions for dirs
          as well as files (now uses attr command).

---------------------------------------------------------------------------

Version: 0.74 Thu 23-Mar-95        Aideen McConville             

* Fixed MED-05123 - UK.Qume - updated address and phone number.

***************************************************************************
                      Black - RISC OS 3.60 (4.28) build
***************************************************************************


===============================================================================

===========================================
NFS::riscos_bl.$.Sources.Printing.PrintEdit
===========================================

Version: 0.41 Tue 31-Jan-95        Aideen McConville             

* Fix MED-04386: Makefile - !Sprites23 no longer installed

AMcC (20-Mar-95): Makefile - install rule: set access for dir
No new version.

***************************************************************************
                      Black - RISC OS 3.60 (4.28) build
***************************************************************************


===============================================================================

==================================================
NFS::riscos_bl.$.Sources.Printing.Printers.Manager
==================================================

Version: 1.29 Wed 19-Oct-94        Aideen McConville             

Changed files
=============
    prolog.PSprolog2  (from Mike Stephens)

    UK.!Run           (rmensures Remote Printer modules 1.01)

Needs SpriteExtend 0.74.

!Printers (1.29) should contain
===============================
(those that have changed since !Printers 1.28 are marked with a *)

  * PDriver    3.23  JPEG support
  * PDModules  4.23  (PDriverDP and PDriverPS) JPEG support

    PDumperSpt 1.10
  * PDumpers   1.08  (PDumperDM, PDumperIW and PDumperLJ) Version change only

    MakePSFont 1.06

  * RemPrnSpt  1.01  Resources directory name limited to 10 chars

---------------------------------------------------------------------------

Version: 1.30 Tue 25-Oct-94        Aideen McConville             

* Some initial work for building ROM based !Printers.
   - Added ROM specific !Run file (DataFiles.ROM.!Run)
   - Updated s.ResFiles
     incomplete - <Locale> specific files should be included in Messages module.
                - use squished versions of source (not crunched)
   - s.Version - brought up to date.
   - Makefile - still lacking 'resources' rule.

!Printers (1.30) should contain
===============================
  * RemPrnSpt  1.02  Don't check for RemotePrinterMessages when compiled for ROM


---------------------------------------------------------------------------

Version: 1.31 Wed 26-Oct-94        Mike Stephens                 

Further work for ROM based !Printers.
  - Datafiles.ROM.!Run changed (add Choices:Printers to path)
  - Datafiles.ROM.!Boot added (ditto)
  - Sources.Dummy[DP,LJ,PS] added (take place of Support[DP,LJ,PS] in ROM case
  - Sources.!RunImage changes (choices read/write changes, and #inlude of 
                               support code, controlled by -DDISC)
This code seems to work in an artificial test, but has not been tried in ROM
image form. The WimpSlot requirements for ROM based !Printers need investigation.

---------------------------------------------------------------------------

Version: 1.32 Fri 28-Oct-94        Aideen McConville             

  * Makefile
    - CC defined to be cc410 (cc 5.00 insists that C sources are in a 'c' directory)
    - Use obey files in 'crunch' directory to do BASIC crunching
      (bascrunch method was unreliable)
    - RunImage for ROM-based printers now built to 'RunImageR'
    - 'resources' rule added to copy approp. files to Messages module

  * s.ResFiles
    - Now includes correct files (none are Locale specific)

  * sources.DummyXX files
    - Changed type to BASIC (no processing necessary)

  * crunch (directory) added - contains an obey file for each source file that
    requires crunching.

---------------------------------------------------------------------------

Version: 1.33 Fri 28-Oct-94        Mike Stephens                 

Reduce wimp slot sizing in ROM.!Run, such that Printer Manager runs in around
64k of slot (depending on installed printers).

---------------------------------------------------------------------------

Version: 1.34 Sat 29-Oct-94        Aideen McConville             

* ROM installation:
  - Don't install !Printers.!Sprites (now in Wimp.Sprites; !printers and
    sm!printers were there already).
  - Install Resources.!Sprites22 for dp lj and ps

  Changed files: Makefile,
                 s.ResFiles
                 DataFiles.ROM.!Boot

---------------------------------------------------------------------------

Version: 1.35 Tue 08-Nov-94        Mike Stephens                 

New Palette file, used by Epson Stylus colour PDF's.

  Added:   DataFiles.Palettes.1
  Changed: Makefile
           UK.Messages

---------------------------------------------------------------------------

Version: 1.36 Wed 09-Nov-94        Mike Stephens                 


Bug fix. Bug was:
  . Install one or more PS printers and save choices
  . Remove a PS printer
  . Quit without saving choices
  . Restart !Printers
    => data abort starting PS printer
Cause was PROCps_create_default_font_file (in SupportPS) referring
to wrong prdt% block.

Changed files: Sources.SupportPS
               UK.Messages

---------------------------------------------------------------------------

Version: 1.37 Fri 25-Nov-94        Aideen McConville             

* Palettes.1 installed for !Printers in ROM
  (needed a new entry in s.ResFiles).

* *help version back in step with Info box version.

Changed files: s.ResFiles
               s.Version
               UK.Messages


---------------------------------------------------------------------------

Version: 1.38 Mon 28-Nov-94        Mike Stephens                 

* Check for waking-up module RemotePrinterSupport, which can now be dormant
  in ROM
* Internationalise some errors (fix MED-03882)
* Put WR/r access (public read) on saved-choices files (fix MED-03873)

Changed files: Datafiles.ROM.!Run
               s.Version
               sources.RunImage
               sources.SupportDP
               sources.SupportLJ
               sources.SupportPS
               sources.SuppSrc
               UK.Messages

---------------------------------------------------------------------------

Version: 1.39 Fri 09-Dec-94        Mike Stephens                 

* Always start RemotePrinterSupport if #define Sparrow (otherwise !Printers
  sometimes fails to start - erratic)
* Make sure temporary file is closed on Font download error
* Give info date 2 digit year instead of 4

Changed files: s.Version
               sources.RunImage
               sources.Sparrow
               sources.SupportPS
               UK.Messages

---------------------------------------------------------------------------

Version: 1.40 Tue 17-Jan-95        Aideen McConville             

Build and Version change only - No functional change

* Fix MED-03784: Module version and date derived from Messages file during build

Changed files: Makefile
               awk.Version (new file)
               s.Main
               s.Version   (deleted - now a derived file)
               UK.Messages

---------------------------------------------------------------------------

Version: 1.41 Tue 24-Jan-95        Mike Stephens                 

* Fix MED-03955 (silly tokenised message with !Help)
* Fix MED-04226 (!Printers internationalisation shortfall)

Changed files: UK.Messages
               sources.RunImage

---------------------------------------------------------------------------

Version: 1.42 Mon 20-Feb-95        Mike Stephens                 

- Fix MED-04649 (!Printers/Freeway start-up failure);
                also requires Freeway 0.18
- Fix MED-04701 (connection to null => silly filename)

Changed files: UK.Messages
               sources.RunImage
               sources.Sparrow

---------------------------------------------------------------------------

Version: 1.43 Tue 28-Feb-95        Mike Stephens                 

Fix MED-04723

Changed files: UK.Messages
               UK.Template3D

---------------------------------------------------------------------------

Version: 1.44 Fri 03-Mar-95        Mike Stephens                 

Add new (special) palette to help solve Epson Stylus colour 720 dpi
disaster (MED-04517). This fix also requires PDumperSupport 1.18 and
new PDF's.

Changed files: Makefile
               UK.Messages

Added files:   Datafiles.Palettes.2
               util.palette

util.palette contains various files used to construct the special
palette '2' (which is NOT !Repro compatible) - see util.palette.ReadMe

---------------------------------------------------------------------------

Version: 1.45 Tue 07-Mar-95        Mike Stephens                 

Oops. For 1.44, forgot to change s.ResFiles so that palette 2 is included
in ROM.

Changed files: s.ResFiles
               UK.Messages

---------------------------------------------------------------------------

Version: 1.46 Fri 31-Mar-95        Aideen McConville             

MED-05061: Ensure that the Freeway and MakePSFont modules are loaded
           before squishing RunImage.

Changed files: Makefile
               UK.Messages (Version)

***************************************************************************
                      Black - RISC OS 3.60 (4.28) build
***************************************************************************


===============================================================================

=============================================================
NFS::riscos_bl.$.Sources.Printing.Printers.Modules.MakePSFont
=============================================================

Version: 1.07 Mon 28-Nov-94        Mike Stephens                 

Added code to make module dormant in ROM at boot (if PDriver later in chain)

Added file:    s.init
Changed files: Makefile
               cmhg.mheader

---------------------------------------------------------------------------

Version: 1.08 Fri 17-Feb-95        Steve Cormie                  

* Fixed MED-04227: Module now internationalised (errors extracted into
  Messages file).

***************************************************************************
                      Black - RISC OS 3.60 (4.28) build
***************************************************************************


===============================================================================

============================================================
NFS::riscos_bl.$.Sources.Printing.Printers.Modules.PDModules
============================================================

Version: 4.21 Wed 14-Sep-94        Aideen McConville             

Version number change only.

The two modules now have a common version number which is in line with the
SrcFiler version.

---------------------------------------------------------------------------

Version: 4.22 Mon 26-Sep-94        Mike Stephens                 

Added JPEG support. This is a DEVELOPMENT VERSION ONLY of PDriverDP
and PDriverPS. More testing is required, and the DP driver is known
to have problems sharing memory with SpriteExtend in the case of large
(in terms of pixels) JPEG's. Note that, to function, these modules
need PDriver SrcFiler-version 3.22, an enhanced PSProlog2 prologue
file for PostScript (added operator, S8), and SpriteExtend 0.73

The definition of S8 is:

  /S8 { 2 copy  mul /Rem exch def 8 SMat /D32 load image } BD

---------------------------------------------------------------------------

Version: 4.23 Fri 30-Sep-94        Mike Stephens                 

Added code to share memory with SpriteExtend effectively for JPEG's in bitmap
printers, provided application sets bit 24 of R0 on PDriver_DrawPage call, to
inform driver that it knows about pre-scanning. This version seems to implement
all JPEG requirements for Black. More tests needed, and possible minor upgrades
for new Sprite features. Still needs enhanced PS prologue as described for
version 4.22. Works with SpriteExtend version 0.74.

---------------------------------------------------------------------------

Version: 4.24 Fri 21-Oct-94        Mike Stephens                 

Allow Sprite plotting with 'wide' translation tables in DP and PS printing.
Note that colour PS only allows 256 (byte) entry colour match table anyway,
so still may not plot 'strange' (very different from colour spanning) palettes
very well. Bit 24 of R0 on exit from PDriver_DrawPage and PDriver_GetRectangle
now defined to be set if requested rectangle is only for pre-scanning.

---------------------------------------------------------------------------

Version: 4.25 Tue 25-Oct-94        Mike Stephens                 

Functionally the same as 4.24, but ...
In source code, use proper (global) symbols for new JPEG SWI's, now defined
by Sprite header.

---------------------------------------------------------------------------

Version: 4.26 Sat 29-Oct-94        Aideen McConville             

* Functionally the same as 4.24, but ...
  GET JPEG SWIs from interface Hdr:SprExtend (now deleted from global Hdr:Sprite)

---------------------------------------------------------------------------

Version: 4.27 Thu 17-Nov-94        Mike Stephens                 

Bug fix: make sure 'not enough memory' error is not ignored in the case
where pre-scanning is allowed (see 4.23). This bug caused machine to crash
when printing from, eg. !Draw with little memory left.

Changed files: s.PDriverDP.PageBox
               s.PrinterDP
               Version

---------------------------------------------------------------------------

Version: 4.28 Thu 24-Nov-94        Mike Stephens                 

* Make PDriverDP and PDriverPS refuse to initialise if PDriver is not active
  (make modules dormant in ROM until needed, provided PDriver later in chain)
* Modify JPEG memory allocation to account for SpriteExtend (0.84) now using
  dynamic area instead of RMA. Also tends to leave more memory free during
  printing, available for emergencies.

Changed files: Version
               s.Core.Header
               s.PrinterDP
               s.PrinterPS
               s.PDriverDP.PageBox

---------------------------------------------------------------------------

Version: 4.29 Mon 28-Nov-94        Mike Stephens                 

Give proper message if module PDriver absent.

Changed files: s.Core.Header
               s.PrinterDP
               s.PrinterPS
               Version


---------------------------------------------------------------------------

Version: 4.30 Thu 01-Dec-94        Mike Stephens                 

* PDriverDP - fix bug with sheared output in the case: 16-bit quality,
Landscape, odd no. of rows in output strip (eg. with Epson Stylus Colour).

Changed files: s.Core.ColTrans
               s.PDriverDP.Macros
               s.PDriverDP.PageBox
               s.PDriverDP.Private2
               s.PrinterDP
               Version

s.PDriverDP.Private2 changes are the significant ones (others involve
debug/version stuff).


---------------------------------------------------------------------------

Version: 4.31 Mon 09-Jan-95        Mike Stephens                 

PDriverDP: fix MED-04280 (PDriver_AbortJob corrupts R4)
PDriverPS: fix MED-04276 (PDriver_CheckFeatures inoperative)

Changed files: s.PDriverDP.ManageJob
               s.PDriverPS.Configure
               s.PrinterDP
               s.PrinterPS
               Version

---------------------------------------------------------------------------

Version: 4.32 Tue 31-Jan-95        Mike Stephens                 

PDriverPS: Fix MED-04323 (Font_Paint translation-in-transformation-matrix)

Changed files: s.PDriverPS.Font
               s.PrinterPS
               Version

---------------------------------------------------------------------------

Version: 4.33 Fri 03-Mar-95        Mike Stephens                 

Fix MED-04626 (Deep sprites -> grey, wrong gamma)

Changed files: s.PDriverDP.Sprite
               s.PrinterDP
               Version

---------------------------------------------------------------------------

.....................................
Changes since previous release follow
.....................................

Version: 4.34 Wed 12-Apr-95        Mike Stephens                 

Fix MED-05310 (JPEG's from !Draw positioned incorrectly)

Changed files: s.Core.JPEGSWI
               s.Core.Workspace
               s.PDriverDP.Macros (debug stuff only)
               Version

---------------------------------------------------------------------------

Version: 4.35 Thu 13-Apr-95        Mike Stephens                 

Fix MED-05315 ( >5 JPEG's to PostScript => machine crashes)

Changed files: s.PDriverPS.JPEG
               Version

***************************************************************************
                      Black - RISC OS 3.60 (4.28) build
***************************************************************************


===============================================================================

==========================================================
NFS::riscos_bl.$.Sources.Printing.Printers.Modules.PDriver
==========================================================

Version: 3.21 Tue 13-Sep-94        Aideen McConville             

* Modifications to allow building of either ROM or Disc based module:

    The Disc version needs to install its own Messages in ResourcesFS.
    For the ROM version, the Messages will be included in the Messages
    module.

    This is controlled using the 'standalone' flag (FALSE by default).
    To include 'standalone' Messages, build using the StandAlone source
    header.

    Changed files: Makefile
                   s.PDriver
                   s.StandAlone (new)
                   Version

---------------------------------------------------------------------------

Version: 3.22 Mon 26-Sep-94        Mike Stephens                 

Added JPEG support. This is a DEVELOPMENT VERSION ONLY. Needs enhanced
PSprolog2 file to work with PostScript (new operator, S8).

---------------------------------------------------------------------------

Version: 3.23 Fri 30-Sep-94        Mike Stephens                 

Defined bit 13 of PDriver_Info features word (set = top byte of R0 in
PDriver_DrawPage is flags byte). Brought version number into line with
SrcFiler.

---------------------------------------------------------------------------

Version: 3.24 Mon 09-Jan-95        Mike Stephens                 

Fix PDriver_EnumerateDrivers (MED-04281)

Changed files: s.PDriver
               Version

---------------------------------------------------------------------------

Version: 3.25 Mon 20-Feb-95        Mike Stephens                 

Fix R9 register corruptions (MED-04654)

Changed files: s.PDriver
               Version

***************************************************************************
                      Black - RISC OS 3.60 (4.28) build
***************************************************************************


===============================================================================

=============================================================
NFS::riscos_bl.$.Sources.Printing.Printers.Modules.PDumperSpt
=============================================================

Version: 1.10 Mon 12-Sep-94        from Mike Stephens

* Fix MED-03675
* Higher precision error diffusion

Changed files: s.Error
               s.Manipulate
               s.PDumperSpt

***************************************************************************
                      Orlando - RISC OS 3.60 build
***************************************************************************

---------------------------------------------------------------------------

Version: 1.11 Fri 11-Nov-94        Mike Stephens                 

 - Set compile-time switch (userandom) false, to disable randomisation in
   error diffused mode. This makes printing typically 20% faster, with no
   significant change in output.
 - Minor optimise in s.FullRGB.
 - Add hdr:HostFS GET to s.PDumperSpt so compile with debug on works

Changed files: Makefile
               s.Error
               s.FullRGB
               s.PDumperSpt
               Version

---------------------------------------------------------------------------

Version: 1.12 Tue 15-Nov-94        Mike Stephens                 

Set compile-time switch (userandom) true, to re-enable randomisation in
error diffused mode. I have now found there *is* significantly better
output with randomisation in some cases (eg. no nasty patterning on
solid colours). So, I have had to undo the change I made in 1.11. Ho hum ...

Changed files: s.Error    (comment only)
               s.PDumperSpt
               Version


One day, it would be nice to investigate where all the time is going with
randomisation, and try to improve it.


---------------------------------------------------------------------------

Version: 1.13 Thu 17-Nov-94        Mike Stephens                 

Speed-ups :-) Optimisations in colour error diffusion make things typically
15-20% faster than version 1.12, so most of the cost of randomisation
(over 1.11) is recovered.

Changed files: s.Error
               s.FullRGB
               Version

---------------------------------------------------------------------------

Version: 1.14 Thu 24-Nov-94        Mike Stephens                 

Refuse to initialise if PDriver not active; ie. be dormant in ROM until
needed, provided PDriver is later in chain.

Changed files: Version
               s.PDumperSpt

---------------------------------------------------------------------------

Version: 1.15 Mon 28-Nov-94        Mike Stephens                 

Give proper message if module PDriver absent.

Changed files: s.PDumperSpt
               Version

---------------------------------------------------------------------------

Version: 1.16 Wed 04-Jan-95        Mike Stephens                 

Fix MED-04204 (bad patterning, near white, error diffused)

Changed files: s.Error
               s.PDumperSpt
               Version

---------------------------------------------------------------------------

Version: 1.17 Fri 13-Jan-95        Mike Stephens                 

Fix MED-04348 (bad patterning, near 25% dot occupancy, error diffused)

Changed files: s.Error
               Version

---------------------------------------------------------------------------

Version: 1.18 Fri 03-Mar-95        Mike Stephens                 

Make changes which notice special, ink density correcting palette
'2', for Epson Stylus Color at 720 dpi. This is one of the changes needed
to fix MED-04517

Changed files: s.Manipulate
               s.PDumperSPt
               Version

***************************************************************************
                      Black - RISC OS 3.60 (4.28) build
***************************************************************************


===============================================================================

============================================================
NFS::riscos_bl.$.Sources.Printing.Printers.Modules.RemPrnSpt
============================================================

Version: 0.18 Wed 14-Sep-94        Aideen McConville             

* Shortened Resources directory name to 'RemotePrin' (10 chars).
  The new (more manageable!) method of building the Messages module
  prohibits longer names.
  
* The version of the messages module (RemotePrinterMessages) now
  corresponds to the version of the main module (RemPrnSpt)

  Changed files: h.msgs
                 Makefile

---------------------------------------------------------------------------

Version: 1.01 Thu 20-Oct-94        Aideen McConville             

* Version change only:
  Since the Remote Printers Messages module previously had version 1.00,
  the new common version number needs to be higher.
  Changed files: cmhg.header, Makefile

---------------------------------------------------------------------------

Version: 1.02 Tue 25-Oct-94        Aideen McConville             

* Only check for RemotePrinterMessages module being loaded if we're
  disc-based.
  Changed files:
    c.Module
    Makefile

---------------------------------------------------------------------------

Version: 1.03 Mon 28-Nov-94        Mike Stephens                 

Refuse to initialise unless module PDriver is active; ie. be dormant in ROM
at boot up, provided PDriver is later in chain. !Printers (v1.38) will
awaken RemPrnSpt when it (!Printers) starts, if ShareFS is then active.

New files:     s.init
Changed files: cmhg.header
               Makefile

***************************************************************************
                      Black - RISC OS 3.60 (4.28) build
***************************************************************************


===============================================================================

===================================================
NFS::riscos_bl.$.Sources.Printing.Printers.PDumpers
===================================================

Version: 1.08 Thu 15-Sep-94        Aideen McConville             

All dumpers now use a common version number (corresponding to the SrcFiler
version number.

---------------------------------------------------------------------------

Version: 1.09 Thu 03-Nov-94        Mike Stephens                 

Added Escape P2 dumper (initially intended to support Epson Stylus
Colour printer).

  Changed files: Makefile
                 Version
  Added files:   !MkE2
                 PDumperE2 directory, and files within it

---------------------------------------------------------------------------

Version: 1.10 Mon 07-Nov-94        Mike Stephens                 

Escape P2 dumper update: optimise multiple line-ends over white space
(manifests as irritatingly noisy, tiny vertical increments and/
or lots of redundant data sent) into one relative vertical move - still slow
though!

  Changed files: Version
                 Generic.s.Header
                 PDumperE2.Makefile
                 PDumperE2.s.OutputDump
                 PDumperE2.s.StartJob
                 PDumperE2.s.StartPage
                 PDumperE2.s.Version
                 PDumperE2.s.Workspace

---------------------------------------------------------------------------

Version: 1.11 Fri 11-Nov-94        Mike Stephens                 

Escape P2 dumper update: improve speed in skipping white space (this is
useful but limited until whole driver can be persuaded to quickly deal
with white space). Also, more extensively tested than version 1.10.

  Changed files: Version
                 PDumperE2.s.OutputDump

---------------------------------------------------------------------------

Version: 1.12 Thu 24-Nov-94        Mike Stephens                 

Make all dumpers refuse to initialise unless PDriver is active; ie. make
them dormant in ROM until needed, provided that PDriver is later in chain.

Changed files: Version
               s.Header

---------------------------------------------------------------------------

Version: 1.13 Mon 28-Nov-94        Mike Stephens                 

Give proper message if module PDriver absent.

Changed files: Generic.s.Header
               Version

---------------------------------------------------------------------------

Version: 1.14 Fri 10-Mar-95        Mike Stephens                 

Fix (workaround) MED-04759 (Epson Stylus Color firmware bug)

Changed files: Version
               PDumperE2.s.OututDump

***************************************************************************
                      Black - RISC OS 3.60 (4.28) build
***************************************************************************


===============================================================================

==========================================
NFS::riscos_bl.$.Sources.Printing.T1ToFont
==========================================

Version: 1.28 Tue 31-Jan-95        Aideen McConville             

* Fix MED-04386: Makefile - !Sprites23 no longer installed

AMcC (13-Mar-95): Small ammendment to install rule (set Access for dirs).
No new version.

***************************************************************************
                      Black - RISC OS 3.60 (4.28) build
***************************************************************************


===============================================================================

=========================================
NFS::riscos_bl.$.Sources.Programmer.BASIC
=========================================

Version: 1.11 Tue 23-Aug-94        Steve Cormie                  

* Fix for MED-00079: now looks up command help/syntax in Global.Messages file.
* Brought version numbers into line with source filer.

---------------------------------------------------------------------------

Version: 1.12 Wed 12-Oct-94        Aideen McConville             

* Added hdr.BASIC (lists SWI names for BASICTrans) - needed for swis.h
  Updated Makefile to export the above.

---------------------------------------------------------------------------

Version: 1.13 Mon 31-Oct-94        Steve Cormie                  

* Added directed comments to Messages file for message tokenisation.
* Moved command help/syntax from Global.Messages to Messages file.

---------------------------------------------------------------------------

Tue 08-Nov-94 Aideen McConville

* Updated Makefile to build BASIC64 and install on Disc in !System.Modules

No new version made.

---------------------------------------------------------------------------

Version: 1.14 Thu 17-Nov-94        Steve Cormie                  

* Message file path must be word aligned in module body for command
  help and syntax to be looked up properly.

***************************************************************************
                      Black - RISC OS 3.60 (4.28) build
***************************************************************************


===============================================================================

============================================
NFS::riscos_bl.$.Sources.Programmer.Debugger
============================================

Version: 1.45 Fri 28-Oct-94        Steve Cormie                  

* Added directed comments to Messages file for message tokenisation.
* Moved command help/syntax from Global.Messages to Messages file.

***************************************************************************
                      Black - RISC OS 3.60 (4.28) build
***************************************************************************


===============================================================================

==========================================
NFS::riscos_bl.$.Sources.Programmer.HostFS
==========================================


===============================================================================

========================================
NFS::riscos_bl.$.Sources.Programmer.Obey
========================================

Version: 0.32 Mon 31-Oct-94        Steve Cormie                  

* Created Messages file (only used for command help/syntax).
* Added directed comments to Messages file for message tokenisation.
* Moved command help/syntax from Global.Messages to Messages file.

---------------------------------------------------------------------------

Version: 0.33 Thu 17-Nov-94        Steve Cormie                  

* Message file path must be word aligned in module body for command
  help and syntax to be looked up properly.

***************************************************************************
                      Black - RISC OS 3.60 (4.28) build
***************************************************************************


===============================================================================

==============================================
NFS::riscos_bl.$.Sources.Programmer.Old_HostFS
==============================================


===============================================================================

==========================================
NFS::riscos_bl.$.Sources.SystemRes.ARMovie
==========================================

Version: 0.37 Wed 08-Mar-95        Aideen McConville             

 * New bas.Player from Sophie

---------------------------------------------------------------------------

AMcC    ()         : Fixed MED-04386: Don't install !Sprites23
SCormie (07-Feb-95): Fixed MED-03827: Added "CDNet: 8" to Access file.
AMcC    (13-Feb-95): Makefile: install dependency list was incomplete

AMcC    (08-Mar-95): Added 16-bit Sound directory in Resources
                     Updated Makefile to install above
                     New !Boot and !Run
AMcC    (09-Mar-95): Makefile: simplified install rule

SCormie (22-Mar-95): Added   Resources.SetSndDir (MED-05001)
                     Updated Makefile
                             Resources.!Boot
                             Resources.!Run

AMcC    (24-mar-95): Makefile - clean rule now removes crunched.Player

AMcC    (28-Apr-95): Fixed MED-05341 (bas.Player updated, kept original
                     version of Player 0.37 as bas.Player037)


***************************************************************************
                      Black - RISC OS 3.60 (4.28) build
***************************************************************************

************************************************************************************
**** Changes made to files should be logged immediately above this box.         ****
**** Do not make a new version unless installing a release from Sophie Wilson   ****
************************************************************************************

===============================================================================

=======================================
NFS::riscos_bl.$.Sources.SystemRes.Boot
=======================================

Version: 0.28 Fri 18-Nov-94        JCoxhead                      

   First version of Boot, ArmBoot and ShareBoot applications built from
common sources and suitable for all releases of RISC O S.

---------------------------------------------------------------------------

Version: 0.29 Mon 21-Nov-94        JCoxhead                      

 * Changed Desktop and DesktopBye to boot the contents of Boot:^.Utilities,
if it is present.

 * Makefile now deletes unnecessary files from the installed boot
application.

---------------------------------------------------------------------------

Version: 0.30 Mon 21-Nov-94        Aideen McConville             

* Added ResetBoot (and updated Makefile to install it).

---------------------------------------------------------------------------

Version: 0.31 Wed 30-Nov-94        Steve Cormie                  

* Fixed MED-03829: ROMPatch code modified to work around ARM710 bug.

---------------------------------------------------------------------------

Version: 0.32 Thu 08-Dec-94        Martin Clemoes                

* Created AKF53 monitor definition file and minor correction to AKF70 one.


AMcC

* Removed Utils.ClrMonitor

---------------------------------------------------------------------------

Version: 0.33 Fri 09-Dec-94        Steve Cormie

* Fix MED-03856
  ResetBoot.UK.!HelpText: Removed reference to Chapter title in  User Guide.             

---------------------------------------------------------------------------

Version: 0.34 Fri 09-Dec-94        Aideen McConville             

 * Fix MED-04058 - re-instate proper VProtect module

 * Fix MED-04046 - ensure correct monitor definition files are installed
                   Substituted DDickin's copy of AKF70

 * Set access permissions for installed !Boot

 Changed files:
    Boot.Makefile
    Configure.Monitors.Acorn.AKF70
    Utils.VProtect

---------------------------------------------------------------------------

Version: 0.35 Mon 12-Dec-94        Aideen McConville             

 * Makefile - corrected access permissions for Choices

 * Boot.!Run - rmload VProtect rather that run it

---------------------------------------------------------------------------

Version: 0.36 Tue 13-Dec-94        Aideen McConville             

 * Removed Library.FontMerge directory - this is installed by Configure.
 * Updated Makefile to refrain from removing FontMerge from installed
   !Boot !!

---------------------------------------------------------------------------

05-Jan-95    Aideen McConville       Added Doc dir (no new version)
9th Jan 1995 JCoxhead                Squeeze LoadCMOS, SafeLogon, ClrMonitor
---------------------------------------------------------------------------

Version: 0.37 Mon 09-Jan-95        Aideen McConville             

* Updated VProtect - now in rm and modsqz'd to Utils
* Updated Makefile to modsqz VProtect.

---------------------------------------------------------------------------

Version: 0.38 Thu 26-Jan-95        JCoxhead                      

   Many changes to make Boot applications work under RISC OS 2.00. The main
problem area were:

 o A path variable defined in terms of a path variable does not work.
 o Many OS_File and OS_GBPB calls do not not support path variables at all.
 o There is no Filer_Boot *command.
 o Filer_OpenDir does not GSTrans its argument.
 o os_VARTYPE_LITERAL_STRING is not valid for OS_SetVarVal.
 o No Obey -c.
 o There is no support for files of type Desktop.
 o The following SWI's were not introduced until RISC OS 3: OSFSControl_-
CanonicalisePath, OSModule_ EnumerateROMWithInfo, WimpReadSysInfo_-
DesktopState.
 o The Scrap application doesn't work at all (it needs OSFSControl_-
CanonicalisePath).

   These were the changes:

 * Use <Boot$Dir> rather than Boot: to define Run$Path in !Boot.
 * RMLoad VProtect only on OS > 2.00.
 * Use os_VARTYPE_STRING rather than os_VARTYPE_LITERAL_STRING.
 * Use own code to decode module version numbers.
 * Set Alias$BootObey to Obey -c, or Obey.
 * Use Boot$State rather than Wimp$State: set to "commands" or "desktop", but
using wimpreadsysinfo_task_count() rather than wimpreadsysinfo_desktop_-
state().
 * Don't do WimpSlot -next or FreePool on pre-350 machines.
 * Remove setting of Run$Path in PreDesktop (unnecessary now anyway).
 * Change all Choices variables to refer to Boot$Dir, not Boot$Path,
similarly references to Choices: changed to <Choices$Dir>. in arguments to
Repeat, since OSGBPB_DirEntries couldn't hack it
 * If BootVars finds that Boot$Dir has no file system or disc name
components, it inserts them. (This is canonicalisation of a sort.)
 * BootVars moved to Utils, since this is its logical home.
 * Move Desktop, DesktopBye and PreDesk from Source to ROxxxHook.
 * Modify Repeat to use <Boot$Dir> not Boot: and BootObey not Obey -c.
 * For RO200 only, set Alias$@RunType_FEA, so that Desktop files can be run;
also, IconSprites the icon for them.
 * For RO200 only, alias Filer_Boot to Filer_CloseDir|mFiler_OpenDir (in that
order!!), and make sure that their argument is always GSTransed before they
see it (using Do).
 * Scrap, Configure moved into OS-dependent directories, since they don't
work on RISC OS 2.00. BootResources$Path introduced for backwards compatibility.
 * Moved Alias$Logon to PreDesktop files; moved Alias$Desktop_SetPalette to
PreDesktop files that need it.

   Other changes:

 * Use a common !Run file for all boot applications in the source tree.

---------------------------------------------------------------------------

Version: 0.40 Fri 27-Jan-95        JCoxhead                      

 * Modify BootVars to do "canonicalisation" of Boot$Dir.

---------------------------------------------------------------------------

Version: 0.41 Mon 30-Jan-95        Aideen McConville             

 * Makefile:
     Corrected access permissions (files in Choices mustn't be locked)
     Extracted common installation bits into separate rules

---------------------------------------------------------------------------

Version: 0.42 Mon 30-Jan-95        JCoxhead                      

 * Modified ResetBoot to cope with the new Choices$Dir possibilites.

---------------------------------------------------------------------------

Version: 0.43 Mon 30-Jan-95        Aideen McConville             

* Makefile:
    Resources.Configure dir now installed in !ResetBoot
    Correct !Run file now installed in !ResetBoot

---------------------------------------------------------------------------

Version: 0.44 Tue 31-Jan-95        Aideen McConville             

* Version prepended to !Help files (rather than !Boot)
  !ResetBoot now uses the common Version id.

* Fix MED-04389 - rmensure VProtect 1.81 in !Boot.!Run
  (also install non-modsqz'd version of VProtect in !ArmBoot (for RO2))

* Some small fixes to !ResetBoot (from JC)

Changed files:

    Makefile

    !Boot.UK.!Help            |
    !ArmBoot.UK.!Help         |-- Extra empty line at top
    !ShareBoot.UK.!Help       |   (Version will be prepended by install)
    !ResetBoot.UK.!HelpText   |

    !ResetBoot.!RunImage
    Source.!Run

---------------------------------------------------------------------------

Version: 0.45 Mon 13-Feb-95        Aideen McConville             

* Resources directory moved back to !Boot from !Boot.Choices.Boot

Changes:
   Makefile - Configure - installed in !Boot.Resources
            - ResetBoot - Configure not installed.

 All files below: 'Choices:Boot.Resources' changed to 'Boot:Resources'

   R0310Hook.Desktop
   R0310Hook.DesktopBye

   R0350Hook.Boot.Desktop    (required?)
   R0350Hook.Boot.DesktopBye (required?)
   R0350Hook.Boot.PreDesk.Configure.VRAM
   R0350Hook.Boot.PreDesk.Configure.NoVRAM
   R0350Hook.Desktop
   R0350Hook.DesktopBye

   R0360Hook.Boot.PreDesk.Configure.VRAM
   R0360Hook.Boot.PreDesk.Configure.NoVRAM
   R0360Hook.Desktop
   R0360Hook.DesktopBye

   ShareBoot.UK.!Boot
   Source.!Run

---------------------------------------------------------------------------

Version: 0.46 Thu 23-Feb-95        JCoxhead                      

 * Do not use BootResources$Dir if not set (in !Boot).
 * Read the disc name from the file server and use that in BootVars'
"canonicalisation" code.
 * Get the net number by asking Internet, if Econet won't tell us (not done
yet).
 * Use BootResources: in more places.
 * Save Alias$@LoadType_FFB rather than assuming its value.
 * Moved almost all of !Boot.!Run into !Boot.Utils.BootRun, so it is executed
only on startup (rather than also before Configure is started under the
desktop).
 * Added a WimpSlot command to !Boot.!Run.
 * Different location for BootResources: either !Boot.Resources, or
!Boot.Resources.ROxxxHook.

---------------------------------------------------------------------------

Version: 0.47 Wed 01-Mar-95        Aideen McConville             

* Fix MED-04739: AKF70 is the default monitor for 3.6

---------------------------------------------------------------------------

Version: 0.48 Tue 07-Mar-95        Alan Glover                   

* Replace the AKF70 monitor file with one tested with an AKF70.

---------------------------------------------------------------------------

Version: 0.49 Fri 10-Mar-95        JCoxhead                      

 * Use released struct dib, struct dibchain definitions.
 * Use DCI4 in any Internet module >= 3.50.
 * Restore LoadType variables in BootRun file.
 * Use `<Choices$Write>.' rather than `Choices:' in the definition of
Boot$ToBe... variables.
 * In PreDesktop files, use AddApp Apps.!* rather than Repeat AddApp Apps
-applications for reasons not yet fully understood.

---------------------------------------------------------------------------

Version: 0.50 Fri 10-Mar-95        Alan Glover                   

Fix bug MED-04928 - modified AKF70 mdf.

---------------------------------------------------------------------------

Version: 0.51 Fri 10-Mar-95        Aideen McConville             

* Added RO360Hook.Boot.PreDesk.SetUpNet
  Updated Makefile to install it in !Boot.Choices.Boot.PreDesk
  (note: not in !ArmBoot or !ShareBoot)

---------------------------------------------------------------------------

Version: 0.52 Thu 16-Mar-95        Alan Glover                   

* Final (hopefully!) version of AKF70 mdf (1.02)

---------------------------------------------------------------------------

Version: 0.53 Thu 16-Mar-95        JCoxhead                      

 * Report "No boot application has been run on startup. Some facilities may
not be available or set up correctly" only on machines with OS >= 3.50. (Only
these need a boot application in order to be set up correctly.)

---------------------------------------------------------------------------

Version: 0.54 Mon 27-Mar-95        Aideen McConville             

* MED-04739 again - AKF70 monitor definition file removed.

  Changed files: Makefile
                 RO360Hook.Boot.PreDesk.Configure.NoVRAM
                 RO360Hook.Boot.PreDesk.Configure.VRAM
                 Version

***************************************************************************
                      Black - RISC OS 3.60 (4.28) build
***************************************************************************


---------------------------------------------------------------------------

.....................................
Changes since previous release follow
.....................................


===============================================================================

============================================
NFS::riscos_bl.$.Sources.SystemRes.Configure
============================================

Version: 1.66 Wed 09-Nov-94        JCoxhead                      

 * Gives a warning when editing files in a network-wide position (i e,
   !ArmBoot.Choices, !ArmBoot.Utils.RO###Hook or the same for !ShareBoot).

 * New code for system merging. See Doc.Merge for details.

 * Quits when the main window is closed.

---------------------------------------------------------------------------

Version: 1.67 Fri 18-Nov-94        Steve Cormie                  

* Added option to sound window for configuration of 16 bit sound.
* Renamed "Hard disc drives" window "Discs" and added a box for configuring
  the number of CD ROM drives (prevention of configuring more than 2 IDE
  devices still to be added).

---------------------------------------------------------------------------

Version: 1.68 Fri 09-Dec-94        Steve Cormie                  

* Fixed MED-03943: Added interactive help for CD ROM configuration icons.

---------------------------------------------------------------------------

Version: 1.69 Wed 21-Dec-94        JCoxhead                      

 * Modified system_merge() to check that incoming modules are consistent with
existing ones: i e, modules in Leter" directories (where e g 350 is later
than 310) should normally have later version numbers. The code added here
checks slightly more than it has to, which is a shame; but it is a gem of
economy, mostly.
 * Fixed bug: the sense of the comparison used for deciding whether to copy a
module on top of another appears to have been inverted (<= instead of >=).
Can this really be true?

---------------------------------------------------------------------------

Version: 1.70 Wed 11-Jan-95        Steve Cormie                  

* Added ATAPI_GetDrives call to c.HardDiscs so as to limit the number of IDE
  drives which can be configured if there are any ATAPI IDE CD-ROM drives
  connected.
* Fixed MED-03641: Broadcast loader configuration details moved off Econet
  configuration window.
* Fixed MED-04290: Fully update screen window if reopened while it is already
  open (no longer data aborts if Default selected first).

---------------------------------------------------------------------------

Version: 1.71 Fri 20-Jan-95        Steve Cormie                  

* Fixed MED-02332: File server enumeration now implemented properly
  (NetFS_UpdateFSList called before enumeration and NetFS_EnableCache after).
* Fixed MED-03812: Print server icon was left selected hence looked greyed out.

---------------------------------------------------------------------------

Version: 1.72 Thu 26-Jan-95        JCoxhead                      

 * Use new BootRsources$Path variable to locate reousrce directory: ensure OS-
independence, and also would allow machine-specific mode files in future (if
necessary).

---------------------------------------------------------------------------

Version: 1.73 Thu 26-Jan-95        JCoxhead                      

 * Check Choices:Boot.PreDesk.BandLimit for a VIDSBandWidthLimit file, when necessary.
MED-04372
---------------------------------------------------------------------------

Version: 1.74 Mon 30-Jan-95        Aideen McConville             

 * Makefile - updated to allow separate installation of !Configure
   and FontMerge (their installation paths may change independently)

---------------------------------------------------------------------------

Version: 1.75 Tue 31-Jan-95        Aideen McConville             

 * MED-04386 - Makefile - don't install Sprites23 file.
                        - also added access commands to install rules

---------------------------------------------------------------------------

Version: 1.76 Fri 24-Feb-95        Steve Cormie                  

* Fixed MED-04622: CD-ROM configuration should have re-initialised CDFSDriver.
* Fixed MED-04623: CD-ROM configuration now behaves sensibly if >4 CD-ROMs
  configured.

---------------------------------------------------------------------------

Version: 1.77 Wed 08-Mar-95        Steve Cormie                  

* Fixed the fix for MED-04623: It really does now behave sensibly for >4 CD-ROMs.
* Fixed MED-04855: "16 bit" text in sound window now a separate icon (for alignment).

---------------------------------------------------------------------------

Version: 1.78 Wed 22-Mar-95        JCoxhead                      

 * Fixed MED-05069 etc. Copies directories into System recursively; copies
modules based on module version number, everything else based on datestamp.

 * Also removed support for RISC O S 3.00: when Systems with a 300 datestamp
are merged in, they will be put into 310.Modules rather than 300.Modules. If
this creates problems for owners of RISC O S 3.00 machines, they are to be
encouraged to upgrade.

---------------------------------------------------------------------------

Version: 1.79 Fri 24-Mar-95        Aideen McConville             

* Created new version - Version 1.78 above didn't include the updated
  system.c (Resources.UK.Messages - updated)


***************************************************************************
                      Black - RISC OS 3.60 (4.28) build
***************************************************************************


---------------------------------------------------------------------------

.....................................
Changes since previous release follow
.....................................


===============================================================================

========================================
NFS::riscos_bl.$.Sources.SystemRes.Fonts
========================================

Version: 1.16 Tue 31-Jan-95        Aideen McConville             

* MED-04386 - Makefile - !Sprites23 no longer installed.
                       - access attributes set by install rules

***************************************************************************
                      Black - RISC OS 3.60 (4.28) build
***************************************************************************


===============================================================================

============================================
NFS::riscos_bl.$.Sources.SystemRes.MchConfig
============================================

Version: 1.01 Mon 14-Nov-94        JCoxhead                      

   First release, according to spec. Some minor variations have been
introduced.

 * There is a 'Default' button, after all. This not only deletes the
machine-specific files, but also resets the Choices$* variables, which would
otherwise only be done at the next boot. Without this, testing is very
inconvenient.

 * On versions of RISC O S before 350, the text 'not available' appears in
the protection icons.

 * Always creates the MchConfig directory on startup.

---------------------------------------------------------------------------

Version: 1.02 Wed 14-Dec-94        Aideen McConville             

 * Slight update to install rule (needed to create !MchConfig dir and
   install files inside it)

---------------------------------------------------------------------------

Version: 1.03 Thu 09-Mar-95        JCoxhead                      

 * Fixed MED-4805: pressing return doesn't activate the default action
button; the cancel button on the saveas box is at an odd alignment and so
doesn't redraw correctly when depressed; if the CMOS file/Boot directory does
exist then you get an error box warning you that it is about to delete the
files but no Cancel button to be able to abort it.

---------------------------------------------------------------------------

Version: 1.04 Thu 30-Mar-95        JCoxhead                      

 * Fixed MED-5044: do not give error if no file found on 'Default.'

***************************************************************************
                      Black - RISC OS 3.60 (4.28) build
***************************************************************************


---------------------------------------------------------------------------

.....................................
Changes since previous release follow
.....................................


===============================================================================

=============================================
NFS::riscos_bl.$.Sources.SystemRes.PartNumber
=============================================

Version: 3.95 Fri 13-Jan-95        Aideen McConville             

Black {UK} Applications Suite PartNumber installed on HardDisc in !Boot

---------------------------------------------------------------------------

Version: 4.07 Mon 13-Feb-95        Aideen McConville             

PartNumber updated for release 4.07

---------------------------------------------------------------------------

Version: 4.14 Thu 02-Mar-95        Aideen McConville             

PartNumber updated for release 4.14

---------------------------------------------------------------------------

.....................................
Changes since previous release follow
.....................................


===============================================================================

=========================================
NFS::riscos_bl.$.Sources.SystemRes.Public
=========================================

Version: 0.01 Mon 09-Jan-95        Aideen McConville             

Created.

---------------------------------------------------------------------------

Version: 0.02 Thu 23-Mar-95        Aideen McConville             

* Fixed MED-04880 - make directory publically writable.

***************************************************************************
                      Black - RISC OS 3.60 (4.28) build
***************************************************************************


===============================================================================

========================================
NFS::riscos_bl.$.Sources.SystemRes.Scrap
========================================

Version: 1.88 Tue 31-Jan-95        Aideen McConville             

* Fix MED-04386: !Sprites23 no longer installed (Makefile)

***************************************************************************
                      Black - RISC OS 3.60 (4.28) build
***************************************************************************


---------------------------------------------------------------------------

.....................................
Changes since previous release follow
.....................................


===============================================================================

=========================================
NFS::riscos_bl.$.Sources.SystemRes.System
=========================================

Version: 0.66 Tue 15-Nov-94        JCoxhead                      

   System made generic across all supported operating systems, so it can be
placed in a central place on a network and used successfully by all client
machines. This involves

 * Merging all previously released Systems into it.
 * New SysPaths command to set up System$Path correctly.

---------------------------------------------------------------------------

Version: 0.67 Mon 12-Dec-94        Aideen McConville             

* Makefile - updated to install modules in !System.Modules

---------------------------------------------------------------------------

Version: 0.68 Mon 30-Jan-95        Aideen McConville             

* Makefile - undid (incorrect) change in 0.67 above.
* Created 360.Modules - now installed by Makefile
* Updated 350.Modules (from Aquarius)

     DDEUtils   1.53 (04 Jan 1995)
     DDT        1.72 (06 Jan 1995)
     FrontEnd   1.16 (11 Jan 1995)

---------------------------------------------------------------------------

Version: 0.69 Mon 30-Jan-95        Aideen McConville             

* Updated Version in Resources.!Run

---------------------------------------------------------------------------

Version: 0.70 Mon 30-Jan-95        Aideen McConville             

* MED-04362 - moved 3.10 compatible modules from 350.Modules
  to 310.Modules.

---------------------------------------------------------------------------

Version: 0.71 Tue 31-Jan-95        Aideen McConville             

* Fix MED-04386: !Sprites23 no longer installed (Makefile)

---------------------------------------------------------------------------

Version: 0.72 Wed 01-Mar-95        Aideen McConville             

* c.main: now includes OSLib:macros.h (for compatibility with OSLib 4.60)

---------------------------------------------------------------------------

Version: 0.73 Mon 06-Mar-95        JCoxhead                      

 * Sorts the directories so that appear in the right order in System$Path
even if the filing system returns them in an unrelated order.

---------------------------------------------------------------------------

Version: 0.74 Mon 20-Mar-95        JCoxhead                      

 * Fixed fault: was leaving final dot off System$Path sometimes.

***************************************************************************
                      Black - RISC OS 3.60 (4.28) build
***************************************************************************


===============================================================================

============================================
NFS::riscos_bl.$.Sources.Utilities.Calibrate
============================================

Version: 0.01 Mon 21-Nov-94        William Turner
             


---------------------------------------------------------------------------

Version: 0.02 Wed 07-Dec-94        WTurner                       

Fixed bug MED-04036

***************************************************************************
                      Black - RISC OS 3.60 (4.28) build
***************************************************************************


===============================================================================

========================================
NFS::riscos_bl.$.Sources.Utilities.HForm
========================================

Version: 2.24 Fri 19-Aug-94        Alan Glover                   

Fix MED-03092 - didn't like trying to initialise drive with errors on
track 0

---------------------------------------------------------------------------

Version: 2.25 Mon 05-Sep-94        sproven                       

Added support for LBA, and installed aglover's fix for MED-03045.


---------------------------------------------------------------------------

Version: 2.26 Thu 17-Nov-94        sproven                       

Added support for BigDisc:

All disc addresses handled internally as a sector number.
Dual defect list handling added.
Backwards compatability support included - uses ADFS_MiscOp 6 to determine
filing system info and then uses SectorDiscOp or DiscOp appropriately.

---------------------------------------------------------------------------

Version: 2.27 Tue 22-Nov-94        sproven                       

Added support for defect editing in 64 bits.


---------------------------------------------------------------------------

Version: 2.28 Fri 09-Dec-94        sproven                       

Various tweaks - variable name fixes etc.

---------------------------------------------------------------------------

Version: 2.29 Fri 09-Dec-94        sproven                       

Fixed so that with LBA capable discs, disc was never formatted to
more than the LBA addressable range.  Also fixed messages file to
show correct version number.

---------------------------------------------------------------------------

Version: 2.30 Fri 16-Dec-94        sproven                       

Fixed MED-04214, by increasing size of map buffer to 256K.  This
should be plenty for all discs as the map can never exceed 64K
(need 128K buffer because map is stored twice, plus a bit for
root dir.)  Assuming all machines have min. 2M DRAM.

---------------------------------------------------------------------------

Version: 2.31 Wed 21-Dec-94        sproven                       

Removed spurious debugging print and fixed !run to do basic -quit

---------------------------------------------------------------------------

Version: 2.32 Mon 09-Jan-95        sproven                       

Fixed MED-04260, MED-04259, MED-04258

---------------------------------------------------------------------------

Version: 2.33 Wed 18-Jan-95        sproven                       

Fixed MED-04384 and MED-04383 (bas.!runimage and resources.uk.messages).

---------------------------------------------------------------------------

Version: 2.34 Mon 06-Feb-95        Aideen McConville             

Fixed MED-04386 - don't install !Sprites23
                - bar HForm from running on pre 3.60 machines.

Changed files: Makefile, Resources.UK.Messages, Resources.UK.!Run


---------------------------------------------------------------------------

Version: 2.35 Fri 10-Feb-95        sproven                       

Added support for FileCore's ShareSize field.

Changed files: bas.!RunImage, Resources.UK.Messages

---------------------------------------------------------------------------

Same Version: Mon 13-Feb-95       AMcConville

Small correction to Makefile introduced in 2.34

---------------------------------------------------------------------------

Version: 2.36 Thu 16-Feb-95        sproven                       

* Added support for choosing drive number using autoreply.
* Added boot option.
* Fixed identify command to use correct precedence.

Changed: bas.!runimage, resources.uk.messages

---------------------------------------------------------------------------

Version: 2.37 Fri 17-Feb-95        sproven                       

* Added support for 'This disc is big' flag in disc record.  Prevents
  FileCore mounting disc on small filing system when disc is large.

* Added check that disc was not too large for filing system on which
  disc was being formatted.  Aborts format in this situation.

Changed: bas.!runimage, resources.uk.messages

---------------------------------------------------------------------------

Version: 2.38 Thu 23-Feb-95        sproven                       

Improved calculation of ShareSize, and fixed bug whereby the sharesize
was not placed in the disc record.  Also removed spurious debug messages.

Changed: bas.!runimage, resources.uk.messages

---------------------------------------------------------------------------

Version: 2.39 Thu 02-Mar-95        sproven                       

Fixed defect handling to not fail when defects cannot be
mapped out - instead just warns user and continues.

Changed: bas.!runimage, resources.uk.messages

---------------------------------------------------------------------------

Version: 2.40 Fri 03-Mar-95        sproven                       

Fixed MED-04834, MED-04385 - defect list handling broken for
single defect list.  Added missing THEN from multiline IF
to prevent writing double defect list on small drives; fixed
defect list print code to print list properly.  Fixed map
handling not to fall over with single defect list.

Changed: bas.!runimage, resources.uk.messages

---------------------------------------------------------------------------

Version: 2.41 Sat 11-Mar-95        sproven                       

Finally Fixed MED-04619 (correct drive/head register parameters).

Changed: bas.!runimage, resources.uk.messages

---------------------------------------------------------------------------

Version: 2.42 Wed 15-Mar-95        sproven                       

Changed FNBigADFS to use bit 9 for BigDisc instead of Bit 2.


AMcC (13-Mar-95): Small ammendment to Install rule (sets Access for dir)
No new version.

---------------------------------------------------------------------------

Version: 2.43 Fri 31-Mar-95        Steve Cormie                  

* Fixed MED-05193: Added defaults for Conner CFS270A, CFS425A and CFA850A drives.

***************************************************************************
                      Black - RISC OS 3.60 (4.28) build
***************************************************************************


---------------------------------------------------------------------------

.....................................
Changes since previous release follow
.....................................


===============================================================================

=====================================================
NFS::riscos_bl.$.Sources.Utilities.Patches.AdvancePch
=====================================================


===============================================================================

==============================================
NFS::riscos_bl.$.Sources.Utilities.Patches.DDE
==============================================

Version: 0.02 Fri 31-Mar-95        Aideen McConville             

Makefile: Install rules now sets access perms on files and dirs

MED-05202: !Install utilities now copy system modules to <System$Dir>.Modules
           rather that <System$path>Modules.

Changed files: Assembler.!installa.c.Specific
                       C.!installc.c.Specific

***************************************************************************
                      Black - RISC OS 3.60 (4.28) build
***************************************************************************


===============================================================================

====================================================
NFS::riscos_bl.$.Sources.Utilities.Patches.PCEmPatch
====================================================


===============================================================================

================================================
NFS::riscos_bl.$.Sources.Utilities.Patches.Patch
================================================

Version: 1.31 Tue 31-Jan-95        Aideen McConville             

* Fix MED-04386: Makefile - !Sprites23 no longer installed
                 Templates (updated version and dates)

---------------------------------------------------------------------------

Version: 1.32 Fri 17-Mar-95        Aideen McConville             

* Fix MED-04993: Makefile - no longer installs Patches.Acorn.Internet
                 Templates (updated version and dates)

***************************************************************************
                      Black - RISC OS 3.60 (4.28) build
***************************************************************************


===============================================================================

==================================================
NFS::riscos_bl.$.Sources.Utilities.Patches.SparkFS
==================================================


===============================================================================

===========================================
NFS::riscos_bl.$.Sources.Utilities.SaveCMOS
===========================================

Version: 0.14 Fri 10-Mar-95        Steve Cormie                  

* Fixed MED-04524: Updated Factory defaults file for Black.

---------------------------------------------------------------------------

Version: 0.15 Mon 13-Mar-95        Steve Cormie                  

* Removed Factory option as it could never work for all platforms.

***************************************************************************
                      Black - RISC OS 3.60 (4.28) build
***************************************************************************


===============================================================================

============================================
NFS::riscos_bl.$.Sources.Utilities.ShowScrap
============================================

Version: 0.02 Tue 31-Jan-95        Aideen McConville             

* Fix MED-04386: Makefile - !Sprites23 no longer installed

* Added version to !Help file

***************************************************************************
                      Black - RISC OS 3.60 (4.28) build
***************************************************************************


===============================================================================

